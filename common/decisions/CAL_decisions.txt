CAL_gravitas_category = {
	CAL_senate_voting_mission = {
		available = {
			always = no
		}
		allowed = {
			always = no
		}
		is_good = no
		timeout_effect = {
			CAL_senate_voting_result = yes
		}
		days_mission_timeout = 35
	}
	CAL_landscape_evolution = {
		available = {
			always = no
		}
		activation = {
			has_country_flag = CAL_senate_opened
		}
		is_good = yes
		timeout_effect = {
			set_temp_variable = { CAL_gravitas_change_populare = 5 }
			set_temp_variable = { CAL_gravitas_change_optimate = 5 }
			set_temp_variable = { CAL_gravitas_change_legiones = 5 }
			set_temp_variable = { CAL_gravitas_change_preatoriae = 5 }
			set_temp_variable = { CAL_gravitas_change_emperor = 0 }
			#KONSULOWIE
			set_temp_variable = {
				CAL_optimates_consuls = 3
			}
			subtract_from_temp_variable = {
				CAL_optimates_consuls = CAL_populares_consuls
			}
			set_temp_variable = {
				CAL_populares_gravitas_from_consuls = CAL_populares_consuls
			}
			multiply_temp_variable = {
				CAL_populares_gravitas_from_consuls = 10
			}
			set_temp_variable = {
				CAL_optimates_gravitas_from_consuls = CAL_optimates_consuls
			}
			multiply_temp_variable = {
				CAL_optimates_gravitas_from_consuls = 10
			}
			add_to_temp_variable = {
				CAL_gravitas_change_populare = CAL_populares_gravitas_from_consuls
			}
			add_to_temp_variable = {
				CAL_gravitas_change_optimate = CAL_optimates_gravitas_from_consuls
			}
			#senat
			set_temp_variable = {
				CAL_populares_gravitas_from_senate = CAL_populares_percentage
			}
			set_temp_variable = {
				CAL_optimates_gravitas_from_senate = 1
			}
			subtract_from_temp_variable = {
				CAL_optimates_gravitas_from_senate = CAL_populares_percentage
			}
			multiply_temp_variable = {
				CAL_populares_gravitas_from_senate = 10
			}
			multiply_temp_variable = {
				CAL_optimates_gravitas_from_senate = 10
			}
			add_to_temp_variable = {
				CAL_gravitas_change_populare = CAL_populares_gravitas_from_senate
			}
			add_to_temp_variable = {
				CAL_gravitas_change_optimate = CAL_optimates_gravitas_from_senate
			}
			#loyalty-bonus-populare
			if ={
				limit = {
					check_variable = {
						var = CAL_populares_loyalty
						value = 10
						compare = less_than_or_equals
					}
				}
				add_to_temp_variable = {
					CAL_gravitas_change_populare = 5
				}
				subtract_from_temp_variable = {
					CAL_gravitas_change_emperor = 10
				}
			}
			else_if = {
				limit = {
					check_variable = {
						var = CAL_populares_loyalty
						value = 20
						compare = less_than_or_equals
					}
				}
				add_to_temp_variable = {
					CAL_gravitas_change_populare = 3
				}
				subtract_from_temp_variable = {
					CAL_gravitas_change_emperor = 5
				}
			}
			else_if = {
				limit = {
					check_variable = {
						var = CAL_populares_loyalty
						value = 30
						compare = less_than_or_equals
					}
				}
				add_to_temp_variable = {
					CAL_gravitas_change_populare = 1
				}
			}
			else_if = {
				limit = {
					check_variable = {
						var = CAL_populares_loyalty
						value = 80
						compare = less_than_or_equals
					}
				}
				add_to_temp_variable = {
					CAL_gravitas_change_emperor = 5
				}
			}
			else_if = {
				limit = {
					check_variable = {
						var = CAL_populares_loyalty
						value = 90
						compare = less_than_or_equals
					}
				}
				add_to_temp_variable = {
					CAL_gravitas_change_emperor = 10
				}
				subtract_from_temp_variable = {
					CAL_gravitas_change_populare = 1
				}
			}
			else = {
				add_to_temp_variable = {
					CAL_gravitas_change_emperor = 15
				}
				subtract_from_temp_variable = {
					CAL_gravitas_change_populare = 3
				}
			}
			#loyalty-bonus-optimate
			if ={
				limit = {
					check_variable = {
						var = CAL_optimates_loyalty
						value = 10
						compare = less_than_or_equals
					}
				}
				add_to_temp_variable = {
					CAL_gravitas_change_optimate = 5
				}
				subtract_from_temp_variable = {
					CAL_gravitas_change_emperor = 10
				}
			}
			else_if = {
				limit = {
					check_variable = {
						var = CAL_optimates_loyalty
						value = 20
						compare = less_than_or_equals
					}
				}
				add_to_temp_variable = {
					CAL_gravitas_change_optimate = 3
				}
				subtract_from_temp_variable = {
					CAL_gravitas_change_emperor = 5
				}
			}
			else_if = {
				limit = {
					check_variable = {
						var = CAL_optimates_loyalty
						value = 30
						compare = less_than_or_equals
					}
				}
				add_to_temp_variable = {
					CAL_gravitas_change_optimate = 1
				}
			}
			else_if = {
				limit = {
					check_variable = {
						var = CAL_optimates_loyalty
						value = 80
						compare = less_than_or_equals
					}
				}
				add_to_temp_variable = {
					CAL_gravitas_change_emperor = 5
				}
			}
			else_if = {
				limit = {
					check_variable = {
						var = CAL_optimates_loyalty
						value = 90
						compare = less_than_or_equals
					}
				}
				add_to_temp_variable = {
					CAL_gravitas_change_emperor = 10
				}
				subtract_from_temp_variable = {
					CAL_gravitas_change_optimate = 1
				}
			}
			else = {
				add_to_temp_variable = {
					CAL_gravitas_change_emperor = 15
				}
				subtract_from_temp_variable = {
					CAL_gravitas_change_optimate = 3
				}
			}
			#loyalty-bonus-legiones
			if ={
				limit = {
					check_variable = {
						var = CAL_legiones_loyalty
						value = 10
						compare = less_than_or_equals
					}
				}
				add_to_temp_variable = {
					CAL_gravitas_change_legiones = 5
				}
				subtract_from_temp_variable = {
					CAL_gravitas_change_emperor = 10
				}
			}
			else_if = {
				limit = {
					check_variable = {
						var = CAL_legiones_loyalty
						value = 20
						compare = less_than_or_equals
					}
				}
				add_to_temp_variable = {
					CAL_gravitas_change_legiones = 3
				}
				subtract_from_temp_variable = {
					CAL_gravitas_change_emperor = 5
				}
			}
			else_if = {
				limit = {
					check_variable = {
						var = CAL_legiones_loyalty
						value = 30
						compare = less_than_or_equals
					}
				}
				add_to_temp_variable = {
					CAL_gravitas_change_legiones = 1
				}
			}
			else_if = {
				limit = {
					check_variable = {
						var = CAL_legiones_loyalty
						value = 80
						compare = less_than_or_equals
					}
				}
				add_to_temp_variable = {
					CAL_gravitas_change_emperor = 5
				}
			}
			else_if = {
				limit = {
					check_variable = {
						var = CAL_legiones_loyalty
						value = 90
						compare = less_than_or_equals
					}
				}
				add_to_temp_variable = {
					CAL_gravitas_change_emperor = 10
				}
				subtract_from_temp_variable = {
					CAL_gravitas_change_legiones = 1
				}
			}
			else = {
				add_to_temp_variable = {
					CAL_gravitas_change_emperor = 15
				}
				subtract_from_temp_variable = {
					CAL_gravitas_change_legiones = 3
				}
			}
			#loyalty-bonus-preatoriae
			if ={
				limit = {
					check_variable = {
						var = CAL_praetoriae_loyalty
						value = 10
						compare = less_than_or_equals
					}
				}
				add_to_temp_variable = {
					CAL_gravitas_change_preatoriae = 5
				}
				subtract_from_temp_variable = {
					CAL_gravitas_change_emperor = 10
				}
			}
			else_if = {
				limit = {
					check_variable = {
						var = CAL_preatoriae_loyalty
						value = 20
						compare = less_than_or_equals
					}
				}
				add_to_temp_variable = {
					CAL_gravitas_change_preatoriae = 3
				}
				subtract_from_temp_variable = {
					CAL_gravitas_change_emperor = 5
				}
			}
			else_if = {
				limit = {
					check_variable = {
						var = CAL_preatoriae_loyalty
						value = 30
						compare = less_than_or_equals
					}
				}
				add_to_temp_variable = {
					CAL_gravitas_change_preatoriae = 1
				}
			}
			else_if = {
				limit = {
					check_variable = {
						var = CAL_preatoriae_loyalty
						value = 80
						compare = less_than_or_equals
					}
				}
				add_to_temp_variable = {
					CAL_gravitas_change_emperor = 5
				}
			}
			else_if = {
				limit = {
					check_variable = {
						var = CAL_preatoriae_loyalty
						value = 90
						compare = less_than_or_equals
					}
				}
				add_to_temp_variable = {
					CAL_gravitas_change_emperor = 10
				}
				subtract_from_temp_variable = {
					CAL_gravitas_change_preatoriae = 1
				}
			}
			else = {
				add_to_temp_variable = {
					CAL_gravitas_change_emperor = 15
				}
				subtract_from_temp_variable = {
					CAL_gravitas_change_preatoriae = 3
				}
			}
			set_temp_variable = {
				CAL_populares_gravitas_from_units = CAL_units_under_populares
			}
			divide_temp_variable = {
				CAL_populares_gravitas_from_units = 10
			}
			add_to_temp_variable = {
				CAL_gravitas_change_populare = CAL_populares_gravitas_from_units
			}
			set_temp_variable = {
				CAL_optimates_gravitas_from_units = CAL_units_under_optimates
			}
			divide_temp_variable = {
				CAL_optimates_gravitas_from_units = 10
			}
			add_to_temp_variable = {
				CAL_gravitas_change_optimate  = CAL_optimates_gravitas_from_units
			}
			set_temp_variable = {
				CAL_legiones_gravitas_from_units = CAL_units_under_legiones
			}
			divide_temp_variable = {
				CAL_legiones_gravitas_from_units = 10
			}
			add_to_temp_variable = {
				CAL_gravitas_change_legiones = CAL_legiones_gravitas_from_units
			}
			set_temp_variable = {
				CAL_preatoriae_gravitas_from_units = CAL_units_under_praetoriae
			}
			divide_temp_variable = {
				CAL_preatoriae_gravitas_from_units = 10
			}
			add_to_temp_variable = {
				CAL_gravitas_change_preatoriae = CAL_preatoriae_gravitas_from_units
			}
			add_to_variable = {
				var = CAL_populares_gravitas
				value = CAL_gravitas_change_populare
				tooltip = CAL_change_gravitas_populares_tt_zwei
			}
			add_to_variable = {
				var = CAL_optimates_gravitas
				value = CAL_gravitas_change_optimate
				tooltip = CAL_change_gravitas_optimates_tt_zwei
			}
			add_to_variable = {
				var = CAL_legiones_gravitas
				value = CAL_gravitas_change_legiones
				tooltip = CAL_change_gravitas_legiones_tt_zwei
			}
			add_to_variable = {
				var = CAL_praetoriae_gravitas
				value = CAL_gravitas_change_preatoriae
				tooltip = CAL_change_gravitas_praetoriae_tt_zwei
			}
			add_to_variable = {
				var = CAL_emperor_gravitas
				value = CAL_gravitas_change_emperor
				tooltip = CAL_change_gravitas_emperor_tt_zwei
			}			
			clamp_variable = {
				var = CAL_populares_gravitas
				max = 200
			}
			clamp_variable = {
				var = CAL_optimates_gravitas
				max = 200
			}
			clamp_variable = {
				var = CAL_legiones_gravitas
				max = 200
			}
			clamp_variable = {
				var = CAL_praetoriae_gravitas
				max = 200
			}
			clamp_variable = {
				var = CAL_emperor_gravitas
				max = 200
			}
		}
		days_mission_timeout = 90
	}
	show_senatebox_gui = {
		visible = {
			is_ai = no
			is_debug = yes
		}
		complete_effect = {
			set_country_flag = senatebox_shown
		}
	}
	
	hide_senatebox_gui = {
		visible = {
			is_ai = no
			is_debug = yes
			has_country_flag = senatebox_shown
		}
		complete_effect = {
			clr_country_flag = senatebox_shown
		}
	}
    CAL_debug_add_populares_gravitas = {
		available = {
			always = yes
		}
        visible = {
            always = yes
			is_debug = yes
        }
		icon = mission_icon   
		complete_effect = {
			set_temp_variable = { CAL_gravitas_change = 5 }
			add_to_variable = {
				var = CAL_populares_gravitas
				value = CAL_gravitas_change
				tooltip = CAL_change_gravitas_populares_tt
			}
		}
	}
	CAL_debug_add_optimates_gravitas = {
		available = {
			always = yes
		}
        visible = {
            always = yes
			is_debug = yes
        }
		icon = mission_icon   
		complete_effect = {
			set_temp_variable = { CAL_gravitas_change = 5 }
			add_to_variable = {
				var = CAL_optimates_gravitas
				value = CAL_gravitas_change
				tooltip = CAL_change_gravitas_optimates_tt
			}
		}
	}
	CAL_debug_add_legiones_gravitas = {
		available = {
			always = yes
		}
        visible = {
            always = yes
			is_debug = yes
        }
		icon = mission_icon   
		complete_effect = {
			set_temp_variable = { CAL_gravitas_change = 5 }
			add_to_variable = {
				var = CAL_legiones_gravitas
				value = CAL_gravitas_change
				tooltip = CAL_change_gravitas_legiones_tt
			}
		}
	}
	CAL_debug_add_praetoriae_gravitas = {
		available = {
			always = yes
		}
        visible = {
            always = yes
			is_debug = yes
        }
		icon = mission_icon   
		complete_effect = {
			set_temp_variable = { CAL_gravitas_change = 5 }
			add_to_variable = {
				var = CAL_praetoriae_gravitas
				value = CAL_gravitas_change
				tooltip = CAL_change_gravitas_praetoriae_tt
			}
		}
	}
	CAL_imperial_intervention = {
		available = {
			check_variable = {
				var = CAL_emperor_gravitas
				value = 40
				compare = greater_than_or_equals
			}
			not = {
				has_country_flag = emperor_intervened
			}
		}
        visible = {
			has_active_mission = CAL_senate_voting_mission
        }
		complete_effect = {
			subtract_from_variable = {
				var = CAL_emperor_gravitas 
				value = 40
				tooltip = CAL_change_gravitas_emperor_tt
			}
			if = {
				limit = {
					has_country_flag = CAL_populares_lex_voting
				}
				CAL_intervene_to_optimates = yes
			} 
			else_if = {
				limit = {
					has_country_flag = CAL_optimates_lex_voting
				}
				CAL_intervene_to_populares = yes
			}
			else = {
				log = "you don't set flag"
			}
			set_country_flag = emperor_intervened
			custom_effect_tooltip = CAL_quarter_senators_pushed
		}
	}
}