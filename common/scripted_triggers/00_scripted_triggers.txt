
can_ROOT_get_wargoal_on_THIS = {
	exists = yes
	NOT = { is_in_faction_with = ROOT }
	NOT = { is_subject_of = ROOT }
}



is_border_conflict_defender_vs_FROM = {
	has_variable = ROOT.defender_state_vs_@FROM
}

has_not_initiated_border_incident_with_FROM = {
	custom_trigger_tooltip = {
		tooltip = not_initiated_border_incident_with_FROM
		NOT = {
			any_state = {
				check_variable = { FROM.defender_state_vs_@PREV = id }
			}
		}
	}
}

has_not_initiated_border_incident_with_ROOT = {
	custom_trigger_tooltip = {
		tooltip = not_initiated_border_incident_with_ROOT
		NOT = {
			any_state = {
				check_variable = { ROOT.defender_state_vs_@PREV = id }
			}
		}
	}
}

#State scope
has_ROOT_at_least_1_div_in_current_state_scope = {
	custom_trigger_tooltip = {
		tooltip = at_least_one_division_in_state
		ROOT = { divisions_in_state = { state = PREV size > 0 } }
	}
}


#State scope
is_controlled_by_ROOT_or_subject = {
	custom_trigger_tooltip = {
		tooltip = is_controlled_by_ROOT_or_subject
		CONTROLLER = {
			OR = {
				tag = ROOT
				is_subject_of = ROOT
			}
		}
	}
}

is_not_controlled_by_ROOT_or_subject = {
	custom_trigger_tooltip = {
		tooltip = is_not_controlled_by_ROOT_or_subject
		CONTROLLER = {
			NOT = {
				OR = {
					tag = ROOT
					is_subject_of = ROOT
				}
			}
		}
	}
}

#Country scope
is_free_or_subject_of_root = {
	OR = {
		is_subject = no
		is_subject_of = ROOT
	}
}

#State scope
is_controlled_by_ROOT_or_ally = {
	custom_trigger_tooltip = {
		tooltip = is_controlled_by_ROOT_or_ally
		CONTROLLER = {
			OR = {
				tag = ROOT
				is_subject_of = ROOT
				is_in_faction_with = ROOT
			}
		}
	}
}

#State scope
is_not_controlled_by_ROOT_or_ally = {
	custom_trigger_tooltip = {
		tooltip = is_not_controlled_by_ROOT_or_ally
		CONTROLLER = {
			NOT = {
				tag = ROOT
				is_subject_of = ROOT
				is_in_faction_with = ROOT
			}
		}
	}
}

has_large_ally_not_pick_closed_economy = {
	any_of_scopes = {
		array = faction_members

		NOT = { tag = PREV }
		num_of_military_factories > 30
	}
}

owns_or_subject_of = {
	custom_trigger_tooltip = {
		tooltip = owns_or_subject_of_tt
		owner = {
			OR = {
				tag = ROOT
				is_subject_of = ROOT
			}
		}
	}
}

controls_or_subject_of = {
	custom_trigger_tooltip = {
		tooltip = controls_or_subject_of_tt
		controller = {
			OR = {
				tag = ROOT
				is_subject_of = ROOT
			}
		}
	}
}

is_core_or_compliance_60 = {
	custom_trigger_tooltip = {
		tooltip = is_core_or_compliance_60_tt
		OR = {
			controller = {
				PREV = { is_core_of = PREV }
			}
			compliance > 60
		}
	}
}


has_same_ideology = {
	custom_trigger_tooltip = {
		tooltip = has_same_ideology_tt
		OR = {
			AND = {
				has_government = marxism_cranism
				ROOT = { has_government = marxism_cranism }
			}
			AND = {
				has_government = squattism
				ROOT = { has_government = squattism }
			}
			AND = {
				has_government = socialdemocrature
				ROOT = { has_government = socialdemocrature }
			}
			AND = {
				has_government = euroliberalism
				ROOT = { has_government = euroliberalism }
			}
			AND = {
				has_government = freemarketism
				ROOT = { has_government = freemarketism }
			}
			AND = {
				has_government = corporativism
				ROOT = { has_government = corporativism }
			}
			AND = {
				has_government = paternal_conservatism
				ROOT = { has_government = paternal_conservatism }
			}
			AND = {
				has_government = autocracy
				ROOT = { has_government = autocracy }
			}
			AND = {
				has_government = reactionary
				ROOT = { has_government = reactionary }
			}
			AND = {
				has_government = neonationalism
				ROOT = { has_government = neonationalism }
			}
			AND = {
				has_government = postpolonism
				ROOT = { has_government = postpolonism }
			}
		}
	}
}


has_specialist_level_trigger = {
	skill > 5
	skill < 6
}

has_expert_level_trigger = {
	skill > 6
	skill < 7
}

has_genius_level_trigger = {
	skill > 7
}


has_subject_autonomy_feature = {
	has_dlc = "Together for Victory"
	#TODO_Manu: More DLCs?
}


has_tech_sharing_feature = {
	OR = {
		has_dlc = "Together for Victory"
		has_dlc = "Death or Dishonor"
		has_dlc = "Waking the Tiger"
		has_dlc = "La Resistance"
	}
}

has_war_with_non_exiled_country = {
	custom_trigger_tooltip = {
		tooltip = has_war_with_non_exiled_country_tt
		has_war = yes
		any_enemy_country = {
			is_government_in_exile = no
		}
	}

}

is_at_peace_exiled_countries_excluded = {
	custom_trigger_tooltip = {
		tooltip = is_at_peace_exiled_countries_excluded_tt
		NOT = {
			any_enemy_country = {
				is_government_in_exile = no
			}
		}
	}
}

#State scope
state_is_fully_controlled_by_ROOT_or_subject = {
	custom_trigger_tooltip = {
		tooltip = state_is_fully_controlled_by_ROOT_or_subject_tt
		OR = {
			is_fully_controlled_by = ROOT
			controller = {
				is_subject_of = ROOT
				has_full_control_of_state = PREV
			}
		}
	}
}

#State scope
state_is_fully_controlled_by_ROOT_subject_or_faction_member = {
	custom_trigger_tooltip = {
		tooltip = state_is_fully_controlled_by_ROOT_subject_or_faction_member_tt
		OR = {
			is_fully_controlled_by = ROOT
			controller = {
				OR = {
					is_subject_of = ROOT
					is_in_faction_with = ROOT
				}
				has_full_control_of_state = PREV
			}
		}
	}
}

state_has_any_resource = {
	OR = {
		has_resources_amount = {
			resource = oil
			amount > 0
		}
		has_resources_amount = {
			resource = aluminium
			amount > 0
		}
		has_resources_amount = {
			resource = synthetic_materials
			amount > 0
		}
		has_resources_amount = {
			resource = food
			amount > 0
		}
		has_resources_amount = {
			resource = steel
			amount > 0
		}
		has_resources_amount = {
			resource = junk
			amount > 0
		}
		has_resources_amount = {
			resource = coal
			amount > 0
		}
		has_resources_amount = {
			resource = electronics
			amount > 0
		}		
	}
}

country_can_be_reasonable_target_of_wargoal = { #Expected scopes: Target country is THIS, country getting wargoal is PREV
	NOT = {
		has_war_with = ROOT
		is_in_faction_with = PREV
		has_guaranteed = PREV
		is_guaranteed_by = PREV
		has_non_aggression_pact_with = PREV
		is_subject_of = PREV
	}
}


has_military_academy = {
	NOT = {
		original_tag = BEX 
		}
}


has_naval_academy = {
	NOT = {
		original_tag = BEX 
		}
}

has_air_academy = {
	NOT = {
		original_tag = BEX 
		}
}

has_air_force_command = {
	NOT = {
		original_tag = BEX 
		}
}

can_research_land_doctrine = {
	custom_trigger_tooltip = {
		tooltip = "Can research start land doctrine"
		NOT = {
			check_variable = {
				var = doctrines_researched
				value = 2
				compare = greater_than_or_equals
			}
		}
	}
	
}
can_unlock_new_special_forces_tree = {
	if = {
		limit = { NOT = { has_variable = sf_trees } }
		custom_trigger_tooltip = {
			tooltip = can_unlock_new_special_forces_tree_none
			NOT = { has_variable = sf_trees }
		}
	}
	else_if = {
		limit = { check_variable = { sf_trees > 0 } }
		custom_trigger_tooltip = {
			tooltip = can_unlock_new_special_forces_tree_more_yes
			check_variable = { sf_trees > 0 }
		}
	}
	else = {
		custom_trigger_tooltip = {
			tooltip = can_unlock_new_special_forces_tree_more_no
			always = no
		}
	}
}

#to są triggery do doktryn fuzyjnych (proszę napisać "dziękuję pan kris" - 29.11.2025)

didnt_formulate_fully_conv_doctrine = {
	NOT = {
		AND = { 
		OR = {
			has_completed_subdoctrine = nato_infantry
			has_completed_subdoctrine = warsaw_pact_infantry
		}
		OR = {
			has_completed_subdoctrine = nato_support
			has_completed_subdoctrine = warsaw_pact_support
		} 
		OR = {
			has_completed_subdoctrine = nato_armor
			has_completed_subdoctrine = warsaw_pact_armor
		} 
		OR = {
			has_completed_subdoctrine = nato_operations
			has_completed_subdoctrine = warsaw_pact_operations
		} 
		}           
	}
}

didnt_formulate_fully_tech_doctrine = {
	NOT = {
		AND = { 
			OR = {
				has_completed_subdoctrine = elite_tech_infantry
				has_completed_subdoctrine = common_tech_infantry
			}
			OR = {
				has_completed_subdoctrine = elite_tech_support
				has_completed_subdoctrine = common_tech_support
			} 
			OR = {
				has_completed_subdoctrine = elite_tech_armor
				has_completed_subdoctrine = common_tech_armor
			} 
			OR = {
				has_completed_subdoctrine = elite_tech_operations
				has_completed_subdoctrine = common_tech_operations
			} 
		}           
	} 
}

didnt_formulate_fully_asm_doctrine = {
	NOT = {
		AND = { 
			OR = {
				has_completed_subdoctrine = partisan_infantry
				has_completed_subdoctrine = terrorist_infantry
			}
			OR = {
				has_completed_subdoctrine = partisan_support
				has_completed_subdoctrine = terrorist_support
			} 
			OR = {
				has_completed_subdoctrine = partisan_armor
				has_completed_subdoctrine = terrorist_armor
			} 
			OR = {
				has_completed_subdoctrine = partisan_operations
				has_completed_subdoctrine = terrorist_operations
			} 
		}           
	}  
}

didnt_formulate_fully_cqc_doctrine = {
	NOT = {
		AND = { 
			OR = {
				has_completed_subdoctrine = honor_infantry
				has_completed_subdoctrine = horde_infantry
			}
			OR = {
				has_completed_subdoctrine = honor_support
				has_completed_subdoctrine = horde_support
			} 
			OR = {
				has_completed_subdoctrine = honor_armor
				has_completed_subdoctrine = horde_armor
			} 
			OR = {
				has_completed_subdoctrine = honor_operations
				has_completed_subdoctrine = horde_operations
			} 
		}           
	}
}

got_subdoctrines_from_tech_and_conv = {
	OR = {
		has_completed_subdoctrine = elite_tech_infantry
		has_completed_subdoctrine = common_tech_infantry
		has_completed_subdoctrine = nato_infantry
		has_completed_subdoctrine = warsaw_pact_infantry
	}
	OR = {
		has_completed_subdoctrine = elite_tech_support
		has_completed_subdoctrine = common_tech_support
		has_completed_subdoctrine = nato_support
		has_completed_subdoctrine = warsaw_pact_support
	} 
	OR = {
		has_completed_subdoctrine = elite_tech_armor
		has_completed_subdoctrine = common_tech_armor
		has_completed_subdoctrine = nato_armor
		has_completed_subdoctrine = warsaw_pact_armor
	} 
	OR = {
		has_completed_subdoctrine = elite_tech_operations
		has_completed_subdoctrine = common_tech_operations
		has_completed_subdoctrine = nato_operations
		has_completed_subdoctrine = warsaw_pact_operations
	}	 
}

got_subdoctrines_from_asm_and_conv = {
	OR = {
		has_completed_subdoctrine = partisan_infantry
		has_completed_subdoctrine = terrorist_infantry
		has_completed_subdoctrine = nato_infantry
		has_completed_subdoctrine = warsaw_pact_infantry
	}
	OR = {
		has_completed_subdoctrine = partisan_support
		has_completed_subdoctrine = terrorist_support
		has_completed_subdoctrine = nato_support
		has_completed_subdoctrine = warsaw_pact_support
	} 
	OR = {
		has_completed_subdoctrine = partisan_armor
		has_completed_subdoctrine = terrorist_armor
		has_completed_subdoctrine = nato_armor
		has_completed_subdoctrine = warsaw_pact_armor
	} 
	OR = {
		has_completed_subdoctrine = partisan_operations
		has_completed_subdoctrine = terrorist_operations
		has_completed_subdoctrine = nato_operations
		has_completed_subdoctrine = warsaw_pact_operations
	}
	
}

got_subdoctrines_from_asm_and_cqc = {
	OR = {
		has_completed_subdoctrine = partisan_infantry
		has_completed_subdoctrine = terrorist_infantry
		has_completed_subdoctrine = honor_infantry
		has_completed_subdoctrine = horde_infantry
	}
	OR = {
		has_completed_subdoctrine = partisan_support
		has_completed_subdoctrine = terrorist_support
		has_completed_subdoctrine = honor_support
		has_completed_subdoctrine = horde_support
	} 
	OR = {
		has_completed_subdoctrine = partisan_armor
		has_completed_subdoctrine = terrorist_armor
		has_completed_subdoctrine = honor_armor
		has_completed_subdoctrine = horde_armor
	} 
	OR = {
		has_completed_subdoctrine = partisan_operations
		has_completed_subdoctrine = terrorist_operations
		has_completed_subdoctrine = honor_operations
		has_completed_subdoctrine = horde_operations
	}
}

got_subdoctrines_from_asm_and_tech = {
	OR = {
		has_completed_subdoctrine = partisan_infantry
		has_completed_subdoctrine = terrorist_infantry
		has_completed_subdoctrine = elite_tech_infantry
		has_completed_subdoctrine = common_tech_infantry
	}
	OR = {
		has_completed_subdoctrine = partisan_support
		has_completed_subdoctrine = terrorist_support
		has_completed_subdoctrine = elite_tech_support
		has_completed_subdoctrine = common_tech_support
	} 
	OR = {
		has_completed_subdoctrine = partisan_armor
		has_completed_subdoctrine = terrorist_armor
		has_completed_subdoctrine = elite_tech_armor
		has_completed_subdoctrine = common_tech_armor
	} 
	OR = {
		has_completed_subdoctrine = partisan_operations
		has_completed_subdoctrine = terrorist_operations
		has_completed_subdoctrine = elite_tech_operations
		has_completed_subdoctrine = common_tech_operations
	}
}

got_subdoctrines_from_conv_and_cqc = {
	OR = {
		has_completed_subdoctrine = nato_infantry
		has_completed_subdoctrine = warsaw_pact_infantry
		has_completed_subdoctrine = honor_infantry
		has_completed_subdoctrine = horde_infantry
	}
	OR = {
		has_completed_subdoctrine = nato_support
		has_completed_subdoctrine = warsaw_pact_support
		has_completed_subdoctrine = honor_support
		has_completed_subdoctrine = horde_support
	} 
	OR = {
		has_completed_subdoctrine = nato_armor
		has_completed_subdoctrine = warsaw_pact_armor
		has_completed_subdoctrine = honor_armor
		has_completed_subdoctrine = horde_armor
	} 
	OR = {
		has_completed_subdoctrine = nato_operations
		has_completed_subdoctrine = warsaw_pact_operations
		has_completed_subdoctrine = honor_operations
		has_completed_subdoctrine = horde_operations
	}
}

got_subdoctrines_from_tech_and_cqc = {
	OR = {
		has_completed_subdoctrine = elite_tech_infantry
		has_completed_subdoctrine = common_tech_infantry
		has_completed_subdoctrine = honor_infantry
		has_completed_subdoctrine = horde_infantry
	}
	OR = {
		has_completed_subdoctrine = elite_tech_support
		has_completed_subdoctrine = common_tech_support
		has_completed_subdoctrine = honor_support
		has_completed_subdoctrine = horde_support
	} 
	OR = {
		has_completed_subdoctrine = elite_tech_armor
		has_completed_subdoctrine = common_tech_armor
		has_completed_subdoctrine = honor_armor
		has_completed_subdoctrine = horde_armor
	} 
	OR = {
		has_completed_subdoctrine = elite_tech_operations
		has_completed_subdoctrine = common_tech_operations
		has_completed_subdoctrine = honor_operations
		has_completed_subdoctrine = horde_operations
	}
}

# These are to make strength comparisons easier 

FROM_is_stronger = {
	strength_ratio = {
		tag = FROM 
		ratio < 1
	}
}

FROM_is_twice_as_strong = {
	strength_ratio = {
		tag = FROM 
		ratio < 0.5
	}
}

FROM_is_weaker = {
	strength_ratio = {
		tag = FROM 
		ratio > 1
	}
}

FROM_is_twice_as_weak = {
	strength_ratio = {
		tag = FROM 
		ratio > 2
	}
}
