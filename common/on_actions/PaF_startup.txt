on_actions = {
	on_state_control_changed = {
		effect = {
			ROOT = {
				count_buildings = yes
				set_variable = { prev_civ_factories = num_of_civils }
				set_variable = { prev_mil_factories = num_of_militars }
				set_variable = { prev_dockyards = num_of_dockyards }
				set_variable = { prev_synths = num_of_synthetic_refineries }
				set_variable = { prev_hitech = num_of_high_tech_complexes }
				set_variable = { prev_silos = num_of_fuel_siloes }
				set_variable = { prev_coal_plants = sum_of_power_plants }
				set_variable = { prev_wind_farms = sum_of_wind_farms }
				set_variable = { prev_recycling = num_of_recycling_plants }
				set_variable = { prev_steel = num_of_steel_works }
				set_variable = { prev_farms = num_of_big_ass_farms }
				set_variable = { prev_temples = num_of_cathedrals }
				set_variable = { prev_universities = num_of_universities }
				set_variable = { prev_hospitals = num_of_hospitals }
				set_variable = { prev_prisons = num_of_prisons }
				set_variable = { prev_januszexes = num_of_januszexes }
				set_variable = { prev_ports = num_of_ports }
				set_variable = { prev_facilities = num_of_facilities }
				set_variable = { prev_reactors = num_of_reactors }
				set_variable = { prev_rockets = num_of_rockets }
				set_variable = { prev_dams = num_of_dams }
				set_variable = { prev_airbase = num_of_airbase }
				set_variable = { prev_supplyhub = num_of_supplyhub }
				set_variable = { prev_bunker = num_of_bunker }
				set_variable = { prev_stronghold = num_of_stronghold }
				set_variable = { prev_aa = num_of_aa }
				set_variable = { prev_radar = num_of_radar }	
			}
			if = {
				limit = {
					OR = {
						original_tag = ALP
						original_tag = PRT
						original_tag = CAL
						AND = {
							original_tag = KLO
							is_subject_of = CAL
						}
					}
				}
				if = {
					limit = {
						original_tag = CAL
						has_country_flag = CAL_central_imperial_department
						FROM.FROM = {
							NOT = {
								is_core_of = CAL
							}
						}
					}
					multiply_variable = {
						FROM.FROM.coring_cost = 0.8
					}
					round_variable = FROM.FROM.coring_cost
				}
			}
			else_if = {
				limit = {
					OR = {
						original_tag = EKS
						original_tag = EKW
						original_tag = TOU
						original_tag = BOG
						original_tag = KLB
						original_tag = BRG
					}
					has_global_flag = eurokom_has_fallen
				}
				meta_effect = {
					text = {
						FROM.FROM = {
							set_state_name = STATE_[STATE_ID]
						}
					}
					STATE_ID = "[?FROM.FROM.GetID]"
				}
			}
			if = {
				limit = {
					FROM = {
						original_tag = CAL
						has_country_flag = CAL_central_imperial_department
					}
					FROM.FROM = {
						NOT = {
							is_core_of = CAL
						}
					}
				}
				divide_variable = {
					FROM.FROM.coring_cost = 0.8
				}
				round_variable = FROM.FROM.coring_cost
			}
		}
	}
	on_startup = {
		effect = {
			if = {
				limit = {
					is_debug = yes
					BBW = {
						is_ai = no
					}
				}
				set_global_flag = BBW_is_player #do debugu customowych unifikacji
			}
			add_to_array = { global.german_settlers_states = 419 }
			add_to_array = { global.german_settlers_states = 606 }
			add_to_array = { global.german_settlers_states = 387 }
			add_to_array = { global.german_settlers_states = 607 }
			add_to_array = { global.german_settlers_states = 371 }
			add_to_array = { global.german_settlers_states = 414 }
			add_to_array = { global.german_settlers_states = 408 }
			add_to_array = { global.german_settlers_states = 407 }
			add_to_array = { global.german_settlers_states = 345 }
			add_to_array = { global.german_settlers_states = 1095 }
			add_to_array = { global.german_settlers_states = 325 }
			add_to_array = { global.german_settlers_states = 293 }
			add_to_array = { global.german_settlers_states = 297 }
			add_to_array = { global.german_settlers_states = 287 }
			add_to_array = { global.german_settlers_states = 267 }
			add_to_array = { global.german_settlers_states = 273 }
			add_to_array = { global.german_settlers_states = 227 }
			add_to_array = { global.german_settlers_states = 973 }
			add_to_array = { global.german_settlers_states = 989 }
			add_to_array = { global.german_settlers_states = 209 }
			add_to_array = { global.german_settlers_states = 990 }
			add_to_array = { global.german_settlers_states = 988 }
			add_to_array = { global.german_settlers_states = 205 }
			add_to_array = { global.german_settlers_states = 188 }
			add_to_array = { global.german_settlers_states = 206 }
			add_to_array = { global.german_settlers_states = 178 }
			add_to_array = { global.german_settlers_states = 164 }
			add_to_array = { global.german_settlers_states = 161 }
			add_to_array = { global.german_settlers_states = 155 }
			add_to_array = { global.german_settlers_states = 983 }
			add_to_array = { global.german_settlers_states = 158 }
			add_to_array = { global.german_settlers_states = 614 }
			add_to_array = { global.german_settlers_states = 127 }
			add_to_array = { global.german_settlers_states = 615 }
			add_to_array = { global.german_settlers_states = 122 }
			add_to_array = { global.german_settlers_states = 105 }
			add_to_array = { global.german_settlers_states = 106 }
			add_to_array = { global.german_settlers_states = 616 }
			add_to_array = { global.german_settlers_states = 90 }
			add_to_array = { global.german_settlers_states = 54 }
			add_to_array = { global.german_settlers_states = 68 }
			add_to_array = { global.german_settlers_states = 620 }
			add_to_array = { global.german_settlers_states = 621 }
			add_to_array = { global.german_settlers_states = 622 }
			add_to_array = { global.german_settlers_states = 623 }
			add_to_array = { global.german_settlers_states = 1076 }
			add_to_array = { global.german_settlers_states = 627 }
			add_to_array = { global.german_settlers_states = 628 }
			add_to_array = { global.german_settlers_states = 630 }
			for_each_scope_loop = {
				array = global.german_settlers_states
				add_dynamic_modifier = {
					modifier = niemcy_prosze_pana
				}
			}

			add_to_array = { global.coal_deposits_states = 349 }
			add_to_array = { global.coal_deposits_states = 322 }
			add_to_array = { global.coal_deposits_states = 304 }
			add_to_array = { global.coal_deposits_states = 355 }
			add_to_array = { global.coal_deposits_states = 466 }
			add_to_array = { global.coal_deposits_states = 470 }
			add_to_array = { global.coal_deposits_states = 471 }
			add_to_array = { global.coal_deposits_states = 476 }
			add_to_array = { global.coal_deposits_states = 487 }
			add_to_array = { global.coal_deposits_states = 490 }
			add_to_array = { global.coal_deposits_states = 493 }
			add_to_array = { global.coal_deposits_states = 500 }
			add_to_array = { global.coal_deposits_states = 502 }
			add_to_array = { global.coal_deposits_states = 504 }
			add_to_array = { global.coal_deposits_states = 511 }
			add_to_array = { global.coal_deposits_states = 513 }
			add_to_array = { global.coal_deposits_states = 516 }
			add_to_array = { global.coal_deposits_states = 521 }
			add_to_array = { global.coal_deposits_states = 590 }
			add_to_array = { global.coal_deposits_states = 593 }
			add_to_array = { global.coal_deposits_states = 734 }
			add_to_array = { global.coal_deposits_states = 761 }
			add_to_array = { global.coal_deposits_states = 762 }
			add_to_array = { global.coal_deposits_states = 764 }
			add_to_array = { global.coal_deposits_states = 766 }
			add_to_array = { global.coal_deposits_states = 786 }
			add_to_array = { global.coal_deposits_states = 787 }
			add_to_array = { global.coal_deposits_states = 788 }
			add_to_array = { global.coal_deposits_states = 789 }
			add_to_array = { global.coal_deposits_states = 790 }
			add_to_array = { global.coal_deposits_states = 794 }
			add_to_array = { global.coal_deposits_states = 928 }
			add_to_array = { global.coal_deposits_states = 253 }
			add_to_array = { global.coal_deposits_states = 292 }
			add_to_array = { global.coal_deposits_states = 912 }
			add_to_array = { global.coal_deposits_states = 697 }
			add_to_array = { global.coal_deposits_states = 320 }
			add_to_array = { global.coal_deposits_states = 193 }
			add_to_array = { global.coal_deposits_states = 687 }
			add_to_array = { global.coal_deposits_states = 680 }
			add_to_array = { global.coal_deposits_states = 989 }
			add_to_array = { global.coal_deposits_states = 991 }
			add_to_array = { global.coal_deposits_states = 267 }
			add_to_array = { global.coal_deposits_states = 1095 }
			add_to_array = { global.coal_deposits_states = 356 }
			add_to_array = { global.coal_deposits_states = 266 }
			add_to_array = { global.coal_deposits_states = 260 }
			add_to_array = { global.coal_deposits_states = 219 }
			add_to_array = { global.coal_deposits_states = 155 }
			add_to_array = { global.coal_deposits_states = 361 }
			add_to_array = { global.coal_deposits_states = 681 }
			add_to_array = { global.coal_deposits_states = 352 }
			add_to_array = { global.coal_deposits_states = 293 }
			add_to_array = { global.coal_deposits_states = 297 }
			add_to_array = { global.coal_deposits_states = 992 }
			add_to_array = { global.coal_deposits_states = 703 }
			add_to_array = { global.coal_deposits_states = 852 }
			add_to_array = { global.coal_deposits_states = 200 }
			add_to_array = { global.coal_deposits_states = 136 }
			add_to_array = { global.coal_deposits_states = 1039 }
			add_to_array = { global.coal_deposits_states = 434 }
			add_to_array = { global.coal_deposits_states = 453 }
			add_to_array = { global.coal_deposits_states = 460 }
			add_to_array = { global.coal_deposits_states = 464 }
			add_to_array = { global.coal_deposits_states = 474 }
			add_to_array = { global.coal_deposits_states = 475 }
			add_to_array = { global.coal_deposits_states = 479 }
			add_to_array = { global.coal_deposits_states = 481 }
			add_to_array = { global.coal_deposits_states = 486 }
			add_to_array = { global.coal_deposits_states = 496 }
			add_to_array = { global.coal_deposits_states = 501 }
			add_to_array = { global.coal_deposits_states = 510 }
			add_to_array = { global.coal_deposits_states = 589 }
			add_to_array = { global.coal_deposits_states = 598 }
			add_to_array = { global.coal_deposits_states = 732 }
			add_to_array = { global.coal_deposits_states = 763 }
			add_to_array = { global.coal_deposits_states = 767 }
			add_to_array = { global.coal_deposits_states = 768 }
			add_to_array = { global.coal_deposits_states = 782 }
			add_to_array = { global.coal_deposits_states = 784 }
			add_to_array = { global.coal_deposits_states = 791 }
			add_to_array = { global.coal_deposits_states = 798 }
			add_to_array = { global.coal_deposits_states = 800 }
			add_to_array = { global.coal_deposits_states = 927 }
			add_to_array = { global.coal_deposits_states = 585 }
			add_to_array = { global.coal_deposits_states = 726 }
			add_to_array = { global.coal_deposits_states = 727 }
		
			for_each_scope_loop = {
				array = global.coal_deposits_states
				set_state_flag = coal_deposit_found
			}
			every_state = {
				limit = {
					has_state_flag = coal_deposit_found
				}
				meta_effect = {	
					text = {
						THIS = {
							add_dynamic_modifier = {
								modifier = coal_deposit_modifier_[STATE_ID]
							}
						}
					}
					STATE_ID = "[?THIS.GetID]"
				}
			}
			random_country = {
				limit = {
					any_controlled_state = {
						has_state_flag = coal_deposit_found
					}
				}
				country_event = {
					id = config.3
					days = 365
				}
			}
			STE = {
				every_controlled_state = {
					meta_effect = {	
						text = {
							THIS = {
								set_state_name = GER_STATE_[STATE_ID]
							}
						}
						STATE_ID = "[?THIS.GetID]"
					}
				}
			}
			#every_state = {
			#	limit = {
			#		has_state_flag = coal_deposit_found
			#	}
			#	add_dynamic_modifier = {
			#		modifier = coal_deposit_modifier
			#	}
			#}
			1095 = { OWNER = { set_variable = { global.coal_deposit_level_1095 = 0  } } }
			1039 = { OWNER = { set_variable = { global.coal_deposit_level_1039 = 0  } } }
			349 = { OWNER = { set_variable = { global.coal_deposit_level_349 = 1560 } } }
			322 = { OWNER = { set_variable = { global.coal_deposit_level_322 = 0 } } }
			304 = { OWNER = { set_variable = { global.coal_deposit_level_304 = 0 } } }
			355 = { OWNER = { set_variable = { global.coal_deposit_level_355 = 148 } } }
			466 = { OWNER = { set_variable = { global.coal_deposit_level_466 = 3903 } } }
			470 = { OWNER = { set_variable = { global.coal_deposit_level_470 = 1120 } } }
			471 = { OWNER = { set_variable = { global.coal_deposit_level_471 = 1262 } } }
			476 = { OWNER = { set_variable = { global.coal_deposit_level_476 = 5017 } } }
			487 = { OWNER = { set_variable = { global.coal_deposit_level_487 = 1981 } } }
			490 = { OWNER = { set_variable = { global.coal_deposit_level_490 = 654 } } }
			493 = { OWNER = { set_variable = { global.coal_deposit_level_493 = 331 } } }
			500 = { OWNER = { set_variable = { global.coal_deposit_level_500 = 878 } } }
			502 = { OWNER = { set_variable = { global.coal_deposit_level_502 = 1071 } } }
			504 = { OWNER = { set_variable = { global.coal_deposit_level_504 = 783 } } }
			511 = { OWNER = { set_variable = { global.coal_deposit_level_511 = 934 } } }
			513 = { OWNER = { set_variable = { global.coal_deposit_level_513 = 817 } } }
			516 = { OWNER = { set_variable = { global.coal_deposit_level_516 = 2034 } } }
			521 = { OWNER = { set_variable = { global.coal_deposit_level_521 = 387 } } }
			590 = { OWNER = { set_variable = { global.coal_deposit_level_590 = 1127 } } }
			593 = { OWNER = { set_variable = { global.coal_deposit_level_593 = 96 } } }
			734 = { OWNER = { set_variable = { global.coal_deposit_level_734 = 108 } } }
			761 = { OWNER = { set_variable = { global.coal_deposit_level_761 = 3979 } } }
			762 = { OWNER = { set_variable = { global.coal_deposit_level_762 = 3176 } } }
			764 = { OWNER = { set_variable = { global.coal_deposit_level_764 = 2518 } } }
			766 = { OWNER = { set_variable = { global.coal_deposit_level_766 = 552 } } }
			786 = { OWNER = { set_variable = { global.coal_deposit_level_786 = 2605 } } }
			787 = { OWNER = { set_variable = { global.coal_deposit_level_787 = 0 } } }
			788 = { OWNER = { set_variable = { global.coal_deposit_level_788 = 278 } } }
			789 = { OWNER = { set_variable = { global.coal_deposit_level_789 = 934 } } }
			790 = { OWNER = { set_variable = { global.coal_deposit_level_790 = 2844 } } }
			794 = { OWNER = { set_variable = { global.coal_deposit_level_794 = 1428 } } }
			928 = { OWNER = { set_variable = { global.coal_deposit_level_928 = 1507 } } }
			253 = { OWNER = { set_variable = { global.coal_deposit_level_253 = 0 } } }
			292 = { OWNER = { set_variable = { global.coal_deposit_level_292 = 0 } } }
			912 = { OWNER = { set_variable = { global.coal_deposit_level_912 = 81 } } }
			697 = { OWNER = { set_variable = { global.coal_deposit_level_697 = 0 } } }
			320 = { OWNER = { set_variable = { global.coal_deposit_level_320 = 0 } } }
			193 = { OWNER = { set_variable = { global.coal_deposit_level_193 = 0 } } }
			687 = { OWNER = { set_variable = { global.coal_deposit_level_687 = 0 } } }
			680 = { OWNER = { set_variable = { global.coal_deposit_level_680 = 3392 } } }
			989 = { OWNER = { set_variable = { global.coal_deposit_level_989 = 0 } } }
			991 = { OWNER = { set_variable = { global.coal_deposit_level_991 = 0 } } }
			267 = { OWNER = { set_variable = { global.coal_deposit_level_267 = 76 } } }
			356 = { OWNER = { set_variable = { global.coal_deposit_level_356 = 3864 } } }
			266 = { OWNER = { set_variable = { global.coal_deposit_level_266 = 12 } } }
			260 = { OWNER = { set_variable = { global.coal_deposit_level_260 = 0 } } }
			219 = { OWNER = { set_variable = { global.coal_deposit_level_219 = 173 } } }
			155 = { OWNER = { set_variable = { global.coal_deposit_level_155 = 617 } } }
			361 = { OWNER = { set_variable = { global.coal_deposit_level_361 = 0 } } }
			681 = { OWNER = { set_variable = { global.coal_deposit_level_681 = 0 } } }
			352 = { OWNER = { set_variable = { global.coal_deposit_level_352 = 0 } } }
			293 = { OWNER = { set_variable = { global.coal_deposit_level_293 = 11 } } }
			297 = { OWNER = { set_variable = { global.coal_deposit_level_297 = 0 } } }
			992 = { OWNER = { set_variable = { global.coal_deposit_level_992 = 0 } } }
			703 = { OWNER = { set_variable = { global.coal_deposit_level_703 = 0 } } }
			852 = { OWNER = { set_variable = { global.coal_deposit_level_852 = 0 } } }
			200 = { OWNER = { set_variable = { global.coal_deposit_level_200 = 0 } } }
			136 = { OWNER = { set_variable = { global.coal_deposit_level_136 = 0 } } }
			434 = { OWNER = { set_variable = { global.coal_deposit_level_434 = 48 } } }
			453 = { OWNER = { set_variable = { global.coal_deposit_level_453 = 10 } } }
			460 = { OWNER = { set_variable = { global.coal_deposit_level_460 = 183 } } }
			464 = { OWNER = { set_variable = { global.coal_deposit_level_464 = 516 } } }
			474 = { OWNER = { set_variable = { global.coal_deposit_level_474 = 200 } } }
			475 = { OWNER = { set_variable = { global.coal_deposit_level_475 = 50 } } }
			479 = { OWNER = { set_variable = { global.coal_deposit_level_479 = 1457 } } }
			481 = { OWNER = { set_variable = { global.coal_deposit_level_481 = 507 } } }
			486 = { OWNER = { set_variable = { global.coal_deposit_level_486 = 183 } } }
			496 = { OWNER = { set_variable = { global.coal_deposit_level_496 = 560 } } }
			501 = { OWNER = { set_variable = { global.coal_deposit_level_501 = 0 } } }
			510 = { OWNER = { set_variable = { global.coal_deposit_level_510 = 0 } } }
			589 = { OWNER = { set_variable = { global.coal_deposit_level_589 = 53 } } }
			598 = { OWNER = { set_variable = { global.coal_deposit_level_598 = 0 } } }
			732 = { OWNER = { set_variable = { global.coal_deposit_level_732 = 124 } } }
			763 = { OWNER = { set_variable = { global.coal_deposit_level_763 = 783 } } }
			767 = { OWNER = { set_variable = { global.coal_deposit_level_767 = 515 } } }
			768 = { OWNER = { set_variable = { global.coal_deposit_level_768 = 829 } } }
			782 = { OWNER = { set_variable = { global.coal_deposit_level_782 = 0 } } }
			784 = { OWNER = { set_variable = { global.coal_deposit_level_784 = 100 } } }
			791 = { OWNER = { set_variable = { global.coal_deposit_level_791 = 0 } } }
			798 = { OWNER = { set_variable = { global.coal_deposit_level_798 = 526 } } }
			800 = { OWNER = { set_variable = { global.coal_deposit_level_800 = 0 } } }
			927 = { OWNER = { set_variable = { global.coal_deposit_level_927 = 0 } } }
			585 = { OWNER = { set_variable = { global.coal_deposit_level_585 = 0 } } }
			726 = { OWNER = { set_variable = { global.coal_deposit_level_726 = 304 } } }
			727 = { OWNER = { set_variable = { global.coal_deposit_level_727 = 1346 } } }
			903 = { 
				set_state_flag = coal_deposit_found
				set_state_flag = coal_deposit_unlock_1
				set_state_flag = coal_deposit_unlock_2
				set_state_flag = coal_deposit_unlock_3
				add_dynamic_modifier = {
					modifier = coal_deposit_modifier_903
				}
				OWNER = { 
					set_variable = { global.coal_deposit_level_903 = 4624 } 
				} 
			}
			803 = { 
				set_state_flag = coal_deposit_found
				set_state_flag = coal_deposit_unlock_1
				set_state_flag = coal_deposit_unlock_2
				set_state_flag = coal_deposit_unlock_3
				add_dynamic_modifier = {
					modifier = coal_deposit_modifier_803
				}
				OWNER = { 
					set_variable = { global.coal_deposit_level_803 = 2137 } 
				} 
			}
			every_state = {
				limit = {
					has_state_category = rural
				}
				add_resource = {
					type = food
					amount = 6
				}
			}
			every_state = {
				limit = {
					has_state_category = town
				}
				add_resource = {
					type = food
					amount = 2
				}
			}			
			every_country = {
				limit = { has_idea = observer_country }
				add_offsite_building = { type = arms_factory level = 10 }
			}
			every_country = {
				limit = { is_poland_unifier = yes }
				give_market_access = TSB
				add_opinion_modifier = {
					target = TSB
					modifier = trade_agreement
				}
				add_opinion_modifier = {
					target = TSB
					modifier = cheat_opinion_modifier_good
				}				
			}
			CAL = {
				scoped_play_song = "calisia"
			}

			ALP = {
				scoped_play_song = "legio"
			}
			JOM = {
				set_variable = {
					jomsborg_rune_counter = 0
				}
			}
			BYD = {
				country_event = {
					id = swiecie.1
					days = 21
				}
			}
			KUJ = {
				country_event = {
					id = swiecie.2
					days = 21
				}
			}
			SWC = {
				set_country_flag = SWC_fighting_GSW
			}
			BRZ = {
				create_other_teams = yes
			}			
			random_country = { #hoi znowu jest upośledzone i nie daje zrobić oskryptowanego efektu jak normalny koder by myślał
				create_arrays_of_needed_poland_states = yes
				create_array_of_religious_laws = yes
				voivodeship_mines_array = yes
			}
			every_country = {
				limit = {
					is_ai = no
					OR = {
						original_tag = BOM
						original_tag = BPD
						original_tag = ARK
						original_tag = TIG
						original_tag = KON
					}
				}
				set_country_flag = curse_of_piu
			}
			STA = {
				set_country_flag = is_starachowice
			}
			every_country = {
				limit = {
						should_be_in_main_menu_and_doesnt_have_a_fucking_tree = yes
					}
				load_focus_tree = generic_focus
			}
			every_country = {
				limit = {
					has_idea = podlasie_tribe_idea
					}
					
				load_focus_tree = blank_tree
			}			
			every_country = {
				limit = {
					NOT = {
						has_tech = industry_revival
					}
				}
				set_variable = {active_workshops = 0}
				set_variable = {workshops_count = 0}				
			}
			#podlasie	
			add_to_array = { global.podlasie_tribes = TNO }
			add_to_array = { global.podlasie_tribes = COL }
			add_to_array = { global.podlasie_tribes = ZAM }
			add_to_array = { global.podlasie_tribes = HMA }
			add_to_array = { global.podlasie_tribes = BAG }
			add_to_array = { global.podlasie_tribes = SAW }
			add_to_array = { global.podlasie_tribes = MON }
			add_to_array = { global.podlasie_tribes = WIL }
			add_to_array = { global.podlasie_tribes = UHL }
			add_to_array = { global.podlasie_tribes = DRO }
			add_to_array = { global.podlasie_tribes = ZAB }
			add_to_array = { global.podlasie_tribes = SUP }
			add_to_array = { global.podlasie_tribes = GRO }
			add_to_array = { global.podlasie_tribes = TYK }
			add_to_array = { global.podlasie_tribes = OSO }
			add_to_array = { global.podlasie_tribes = DAM }
			add_to_array = { global.podlasie_tribes = BRD }
			add_to_array = { global.podlasie_tribes = AUG }
			add_to_array = { global.podlasie_tribes = SEI }
			#warmia
			add_to_array = { global.rightful_warmia_clay = 40}
			add_to_array = { global.rightful_warmia_clay = 42}
			add_to_array = { global.rightful_warmia_clay = 46}
			add_to_array = { global.rightful_warmia_clay = 47}
			add_to_array = { global.rightful_warmia_clay = 51}
			add_to_array = { global.rightful_warmia_clay = 632}
			add_to_array = { global.rightful_warmia_clay = 875}
		
			
			every_state = {
				set_variable = { coring_cost = state_population_k }
				multiply_variable = { coring_cost = 0.6 }
				round_variable = coring_cost
				clamp_variable = {
					var = coring_cost
					max = 200
				}
			}

			every_country = {
				set_variable = { rare_buildings_divider = 20 }
				set_variable = {
					var = doctrines_researched
					value = 0
				}
				set_variable = {
					budget = 0
				}
				set_variable = { cost_for_tanks = 0.3 }
				#set_variable = { cost_for_tanks = 1 } #modern, set in technology
				set_variable = { cost_for_ifv = 0.15 }
				#set_variable = { cost_for_ifv = 0.8 } #modern, set in technology
				set_variable = { cost_for_apc = 0.1 }
				#set_variable = { cost_for_apc = 0.6 } #modern, set in technology
				set_variable = { cost_for_trucks = 0.05 }
				set_variable = { cost_for_armored_cars = 0.1 }
				set_variable = { cost_for_artillery = 0.05 }
				set_variable = { cost_for_spart = 0.8 }
				set_variable = { cost_for_early_airplanes = 0.5 }
				set_variable = { cost_for_fighters = 0.5 }
				set_variable = { cost_for_bombers = 0.5 }
				set_variable = { cost_for_transports = 0.5 }
				#set_variable = { cost_for_late_airplane = 3 } #modern, set in technology
				set_variable = { cost_for_early_drones = 0.005 }
				set_variable = { cost_for_late_drones = 0.6 } 
				set_variable = { cost_for_helicopters = 1.5 } 
				set_variable = { cost_for_kayaks = 0.07 }
				set_variable = { cost_for_bigger_ships = 5 }
				set_variable = { cost_for_submarines = 1 }
				#set_variable = { cost_for_submarines = 5 } #modern, set in technology
				count_buildings = yes				
				set_variable = { cost_for_civilian_factory = 100 }
				set_variable = { cost_for_military_factory = 150 }
				set_variable = { cost_for_dockyards = 300 }
				set_variable = { cost_for_synthethic_refineries = 500 }
				set_variable = { cost_for_high_tech_complexes = 350 }
				set_variable = { cost_for_fuel_siloes = 50 }
				set_variable = { cost_for_power_plants = 700 }
				set_variable = { cost_for_wind_farms = 300 }
				set_variable = { cost_for_recycling_plants = 100 }
				set_variable = { cost_for_steel_works = 400 }
				set_variable = { cost_for_farms = 100 }
				set_variable = { cost_for_temples = 50 }
				set_variable = { cost_for_universities = 250 }
				set_variable = { cost_for_hospitals = 200 }
				set_variable = { cost_for_prisons = 50 }
				set_variable = { cost_for_januszexes = 300 }
				set_variable = { cost_for_ports = 200 }
				set_variable = { cost_for_facilities = 1500 }
				set_variable = { cost_for_reactor = 5000 }
				set_variable = { cost_for_rockets = 800 }
				set_variable = { cost_for_dams = 2000 }
				set_variable = { cost_for_airbase = 200 }
				set_variable = { cost_for_supplyhub = 150 }
				set_variable = { cost_for_bunker = 2 }
				set_variable = { cost_for_stronghold = 50 }
				set_variable = { cost_for_aa = 15 }
				set_variable = { cost_for_radar = 20 }
				set_variable = { payments_for_civilian_factory = 1 }
				set_variable = { payments_for_military_factory = 1 }
				set_variable = { payments_for_dockyards = 1 }
				set_variable = { payments_for_synthethic_refineries = 1.5 }
				set_variable = { payments_for_high_tech_complexes = 2.5 }
				set_variable = { payments_for_fuel_siloes = 1.25 }
				set_variable = { payments_for_power_plants = 3.5 }
				set_variable = { payments_for_wind_farms = 2 }
				set_variable = { payments_for_recycling_plants = 1.5 }
				set_variable = { payments_for_steel_works = 4 }
				set_variable = { payments_for_farms = 0.5 }
				set_variable = { payments_for_temples = 0.5 }
				set_variable = { payments_for_universities = 0.75 }
				set_variable = { payments_for_hospitals = 1 }
				set_variable = { payments_for_prisons = 0.4 }
				set_variable = { payments_for_januszexes = 0.75 }
				set_variable = { payments_for_ports = 1.2 }
				set_variable = { payments_for_facilities = 5 }
				set_variable = { payments_for_reactor = 5 }
				set_variable = { payments_for_rockets = 3 }
				set_variable = { payments_for_dams = 2 }
				set_variable = { payments_for_airbase = 0.5 }
				set_variable = { payments_for_supplyhub = 0.75 }
				set_variable = { payments_for_bunker = 0.1 }
				set_variable = { payments_for_stronghold = 0.5 }
				set_variable = { payments_for_aa = 0.05 }
				set_variable = { payments_for_radar = 0.4 }				
				set_variable = { prev_civ_factories = num_of_civils }
				set_variable = { prev_mil_factories = num_of_militars }
				set_variable = { prev_dockyards = num_of_dockyards }
				set_variable = { prev_synths = num_of_synthetic_refineries }
				set_variable = { prev_hitech = num_of_high_tech_complexes }
				set_variable = { prev_silos = num_of_fuel_siloes }
				set_variable = { prev_coal_plants = sum_of_power_plants }
				set_variable = { prev_wind_farms = sum_of_wind_farms }
				set_variable = { prev_recycling = num_of_recycling_plants }
				set_variable = { prev_steel = num_of_steel_works }
				set_variable = { prev_farms = num_of_big_ass_farms }
				set_variable = { prev_temples = num_of_cathedrals }
				set_variable = { prev_universities = num_of_universities }
				set_variable = { prev_hospitals = num_of_hospitals }
				set_variable = { prev_prisons = num_of_prisons }
				set_variable = { prev_januszexes = num_of_januszexes }
				set_variable = { prev_ports = num_of_ports }
				set_variable = { prev_facilities = num_of_facilities }
				set_variable = { prev_reactors = num_of_reactors }
				set_variable = { prev_rockets = num_of_rockets }
				set_variable = { prev_dams = num_of_dams }
				set_variable = { prev_airbase = num_of_airbase }
				set_variable = { prev_supplyhub = num_of_supplyhub }
				set_variable = { prev_bunker = num_of_bunker }
				set_variable = { prev_stronghold = num_of_stronghold }
				set_variable = { prev_aa = num_of_aa }
				set_variable = { prev_radar = num_of_radar }			
				calculate_energy_balance = yes
				calculate_food_balance = yes
				public_buildings_effect = yes
				get_taxes = yes
				set_variable = { global.PaF_Opening_Screen = 1 }
				if = {
					limit = {
						is_upper_silesia = yes
						is_ai = yes
					}
					add_ideas = silesia_minor_surrender
				}			
			}
			PRK = {
				set_country_flag = ziobro_start_war
				activate_mission = ziobro_holy_war
				country_event = {
					id = ziobro.16
					days = 1 
					}
			}
			FRA = {
				country_event = {
					id = fluff_france.1
					days = 55
				}
				diplomatic_relation = {
					country = GER
					relation = non_aggression_pact
					active = yes
				}
			}
			EKS = {
				country_lock_all_division_template = yes
				country_event = {
					id = eksrozpad.1
					days = 160 
				}
			}			
			EKW = {
				country_lock_all_division_template = yes
				country_event = {
					id = ekwrozpad.1
					days = 180
				}
			}
			DGR = {
				if = {
					limit = {
						 is_ai = yes 
						}
					DGR_ai_army = yes
					remove_ideas = DGR_district_wars
				}
			}
			GDA = {
				country_lock_all_division_template = yes
				country_event = {
					id = gdarozpad.1
					days = 194 
				}
			}
			HOR = {
				country_event = {
					id = procesja.1
					days = 186 
				}
			}
			CAL = {
				286 = {
					add_dynamic_modifier = {
							modifier = CAL_ager_publicus_modifier
						}
				}
				688 = {
					add_dynamic_modifier = {
							modifier = CAL_ager_publicus_modifier
						}
				}
			}
			POZ = {
				country_lock_all_division_template = yes
				country_event = {
					id = pozrozpad.1
					days = 188
					}
				country_event = {
					id = pozrozpad.2
					days = 201
					}
				country_event = {
					id = poz.1
					days = 1
					}
			}
			KSZ = {
				country_lock_all_division_template = yes
				country_event = {
					id = kszrozpad.1
					days = 190 
					}
			}
			RZE = {
				country_event = {
					id = rzeszow_siege.1
					days = 14
					}
			}
			WML = {
			#	if = {
			#		limit = { WML = { is_ai = yes } }
			#		load_focus_tree = WML_festung_lodzig
			#		}
			#	else = {
			#		load_focus_tree = holownia_focus
			#		}
				country_event = {
					id = WML_dialogue.1
					days = 21
				}
			}
			SAP = {
				if = {
					limit = {
						tag = SAP
						NOT = { is_ai = yes }
					} 
					BBW = { set_cosmetic_tag = BBW_witcher }
					ZHP = { set_cosmetic_tag = ZHP_witcher }
					ZYD = { set_cosmetic_tag = ZYD_witcher }
					KRS = { set_cosmetic_tag = KRS_witcher }				
					WML = { set_cosmetic_tag = WML_witcher }		
					ZON = { set_cosmetic_tag = ZON_witcher }
					LKS = { set_cosmetic_tag = LKS_witcher }
					RDM = { set_cosmetic_tag = RDM_witcher }
					AMW = { set_cosmetic_tag = AMW_witcher }
					TIG = { set_cosmetic_tag = TIG_witcher }
					POG = { set_cosmetic_tag = POG_witcher }
					RUT = { set_cosmetic_tag = RUT_witcher }
					KAR = { set_cosmetic_tag = KAR_witcher }
				}
			}
			ZHP = {
				hidden_effect = {
					set_variable = { ZHP_deurbanization_progress = 0 }
				}
			}
			MNI = {
				country_lock_all_division_template = yes
				country_event = {
					id = niemcy.1
					days = 1 
				}
				MNI_activate_mechanic = yes
			}
			KES = {
				delete_eurokom_templates = yes
				if = {
					limit = { 
						any_country = {
							is_southern_greater_poland = yes
							is_ai = no
						}
						}
					KES = { load_oob = "KES_2027" }
					else = { KES = { load_oob = "KES_2027_AI" } }
				}
			}
			1056 = {
				add_dynamic_modifier = {
					modifier = TOR_zamieszki
				}
				add_compliance = -65
				add_resistance = 10
			}
		}

	}
	on_weekly = {
		effect = {
			calculate_energy_balance = yes
			calculate_food_balance = yes
			if = {
				limit = {
					has_country_flag = unified_voivodeship
				}
				count_voi_ownership = yes
			}
			if = {
				limit = {
					has_war = yes
					has_country_flag = getting_ready_to_war
				}
				clr_country_flag = getting_ready_to_war
			}
			count_buildings = yes
			public_buildings_effect = yes
		}
	}
	on_daily = {
		effect = {
			every_country = {
				limit = { is_ai = no }
				get_building_cost = yes
				get_taxes = yes
			}
		}
	}
	on_daily_CAL = {
		effect = {
			if = {
				limit = {
					has_country_flag = {
						flag = CAL_senate_voting_started
						days > 17
					}
					NOT = {
						has_country_flag = CAL_senate_military_made_a_move
					}
				}
				CAL_senate_military_moves = yes
				CAL_clamp_on_loyalty_and_gravitas = yes
				set_country_flag = CAL_senate_military_made_a_move
			}
			CAL_count_units_allegiance = yes
			if = {
				limit = {
					has_country_flag = CAL_senate_opened
				}
				CAL_set_civilian_loyalty_effects = yes
			}
			if = {
				limit = {
					OR = {
						has_idea = CAL_legiones_rebellious
						has_idea = CAL_legiones_disloyal
						has_idea = CAL_legiones_hesistant
						has_idea = CAL_legiones_loyal
						has_idea = CAL_legiones_fanatical
					}
				}
				CAL_set_military_loyalty_effects = yes
			}
			if = {
				limit = {
					is_ai = no
				}
				set_variable = {
					global.unifiers_count = 0
				}
				for_each_scope_loop = {
					array = global.countries
					if = {
						limit = {
							exists = yes
							is_poland_unifier = yes
						}
						add_to_variable = {
							global.unifiers_count = 1
						}
					}
				}
				if = {
					limit = {
						check_variable = {
							global.unifiers_count < 3 
						}
					}
					country_event = {
						id = calisia.52
						days = 7
					}
				}
				
			}
			if = {
				limit = {
					NOT = {
						has_country_flag = CAL_praetorians_will_remember_that
					}
				}
				if = {
					limit = {
						check_variable = {
							CAL_praetoriae_loyalty > 30
						}
					}
					set_country_flag = CAL_praetorians_will_remember_that
				}
				#log = "Praetorians will remember that..."
			}
		}
	}
	on_monthly_EKS = {
		effect = {
			if = {
				limit = {
					has_global_flag = eurokom_has_fallen
				}
				every_controlled_state = {
					meta_effect = {	
						text = {
							THIS = {
								set_state_name = STATE_[STATE_ID]
							}
						}
						STATE_ID = "[?THIS.GetID]"
					}
				}
			}
		}
	}
	on_monthly_EKW = {
		effect = {
			if = {
				limit = {
					has_global_flag = eurokom_has_fallen
				}
				every_controlled_state = {
					meta_effect = {	
						text = {
							THIS = {
								set_state_name = STATE_[STATE_ID]
							}
						}
						STATE_ID = "[?THIS.GetID]"
					}
				}
			}
		}
	}
	on_monthly_TOU = {
		effect = {
			if = {
				limit = {
					has_global_flag = eurokom_has_fallen
				}
				every_controlled_state = {
					meta_effect = {	
						text = {
							THIS = {
								set_state_name = STATE_[STATE_ID]
							}
						}
						STATE_ID = "[?THIS.GetID]"
					}
				}
			}
		}
	}
	on_monthly_BRG = {
		effect = {
			if = {
				limit = {
					has_global_flag = eurokom_has_fallen
				}
				every_controlled_state = {
					meta_effect = {	
						text = {
							THIS = {
								set_state_name = STATE_[STATE_ID]
							}
						}
						STATE_ID = "[?THIS.GetID]"
					}
				}
			}
		}
	}
	on_monthly_BOG = {
		effect = {
			if = {
				limit = {
					has_global_flag = eurokom_has_fallen
				}
				every_controlled_state = {
					meta_effect = {	
						text = {
							THIS = {
								set_state_name = STATE_[STATE_ID]
							}
						}
						STATE_ID = "[?THIS.GetID]"
					}
				}
			}
		}
	}	
	on_weekly_GAS = {
		effect = {
			if = {
				limit = {
					GAS = {
						surrender_progress > 0.1
						surrender_progress < 0.25
					}
				}
				GAS = { country_event = GAS.1 }
			}
			if = {
				limit = {
					GAS = {
						surrender_progress > 0.25
						surrender_progress < 0.5
					}
				}
				GAS = { country_event = GAS.2 }
			}
			if = {
				limit = {
					GAS = {
						surrender_progress > 0.5
						surrender_progress < 0.75
					}
				}
				GAS = { country_event = GAS.3 }
			}
			if = {
				limit = {
					GAS = {
						surrender_progress > 0.75
					}
				}
				GAS = { country_event = GAS.4 }
			}									
		}
	}
	on_weekly_SWE = {
		effect = {
			if = {
				limit = {
					date > 2037.09.01
					NOT = {
						has_global_flag = CAL_jutes_spawned
					}
					JOM = {
						exists = no
					}
					CAL = {
						is_ai = no
					}
				}
				CAL_spawn_jutes = yes
			}
			if = {
				limit = {
					date > 2037.10.01
					NOT = {
						has_global_flag = CAL_ostrogoths_spawned
					}
					CAL = {
						is_ai = no
					}
				}
				CAL_spawn_ostrogoths = yes
			}
			if = {
				limit = {
					date > 2037.11.01
					NOT = {
						has_global_flag = CAL_franks_spawned
					}
					CAL = {
						is_ai = no
					}
				}
				CAL_spawn_franks = yes
			}
			if = {
				limit = {
					date > 2037.12.01
					NOT = {
						has_global_flag = CAL_visigoths_spawned
					}
					CAL = {
						is_ai = no
					}
				}
				CAL_spawn_visigoths = yes
			}
			if = {
				limit = {
					date > 2038.01.01
					NOT = {
						has_global_flag = CAL_saxons_spawned
					}
					CAL = {
						is_ai = no
					}
				}
				CAL_spawn_saxons = yes
			}
			if = {
				limit = {
					date > 2038.02.01
					NOT = {
						has_global_flag = CAL_vandals_spawned
					}
					CAL = {
						is_ai = no
					}
					WAN = {
						exists = no
					}
				}
				CAL_spawn_vandals = yes
			}
			if = {
				limit = {
					date > 2038.03.01
					NOT = {
						has_global_flag = CAL_estes_spawned
					}
					CAL = {
						is_ai = no
					}
				}
				CAL_spawn_estes = yes
			}
			if = {
				limit = {
					date > 2038.04.01
					NOT = {
						has_global_flag = CAL_huns_spawned
					}
					CAL = {
						is_ai = no
					}
					KON = {
						exists = no
					}
				}
				CAL_spawn_huns = yes
			}
			if = {
				limit = {
					date > 2038.05.01
					NOT = {
						has_global_flag = CAL_scythians_spawned
					}
					CAL = {
						is_ai = no
					}
				}
				CAL_spawn_scythians = yes
			}
			# if = {
			# 	limit = {
			# 		date > 2038.06.01
			# 		NOT = {
			# 			has_global_flag = CAL_spartakus_risen
			# 		}
			# 		CAL = {
			# 			is_ai = no
			# 		}
			# 	}
			# 	CAL_spawn_slave_revolt = yes
			# }
		}
	}
	on_weekly_ZHP = {
		effect = {
			if = {
				limit = {
					check_variable = { ZHP_deurbanization_progress < 25}
				}
				swap_ideas = {
					remove_idea = ZHP_deurban2
					add_idea = ZHP_deurban1
				}
			}
			if = {
				limit = {
					check_variable = { ZHP_deurbanization_progress > 24}
					has_idea = ZHP_deurban1
				}
				swap_ideas = {
					remove_idea = ZHP_deurban1
					add_idea = ZHP_deurban2
				}
			}
			if = {
				limit = {
					check_variable = { ZHP_deurbanization_progress < 50}
					has_idea = ZHP_deurban3
				}
				swap_ideas = {
					remove_idea = ZHP_deurban3
					add_idea = ZHP_deurban2
				}
			}
			if = {
				limit = {
					check_variable = { ZHP_deurbanization_progress > 49}
					has_idea = ZHP_deurban2
				}
				swap_ideas = {
					remove_idea = ZHP_deurban2
					add_idea = ZHP_deurban3
				}
			}
			if = {
				limit = {
					check_variable = { ZHP_deurbanization_progress < 75}
					has_idea = ZHP_deurban4
				}
				swap_ideas = {
					remove_idea = ZHP_deurban4
					add_idea = ZHP_deurban3
				}
			}
			if = {
				limit = {
					check_variable = { ZHP_deurbanization_progress > 74}
					has_idea = ZHP_deurban3
				}
				swap_ideas = {
					remove_idea = ZHP_deurban3
					add_idea = ZHP_deurban4
				}
			}
			if = {
				limit = {
					has_country_flag = applied_the_final_solution
				}
				set_temp_variable = { days_after_last_fs = global.num_days}
				log = "[?appliance_date]"
				log = "[?days_after_last_fs]"
				subtract_from_temp_variable = {days_after_last_fs = appliance_date}
				log = "[?days_after_last_fs]"
				if = {
					limit = {
						check_variable = {
							var = days_after_last_fs
							value = 365
							compare = greater_than_or_equals
						}
					}
					clr_country_flag = applied_the_final_solution
				}
			}
		}
	}
	on_monthly = {
		effect = {
			if = {
				limit = { 
					OR = {
						is_somsiad = no
						is_ai = no 
					}
				}
				get_monthly_budget = yes
				calculate_food_effects = yes
			}
		}
	}
	on_monthly_ZHR = {
		effect = {
			if = {
				limit = {
					has_character = ZHP_marek_jedraszewski
					NOT = {
						has_country_leader = {
							character = ZHP_marek_jedraszewski
							ruling_only = yes
						}
					}
				}
				retire_country_leader = yes
				add_country_leader_role = {
					character = ZHP_marek_jedraszewski
					promote_leader = yes
					country_leader = {
						ideology = paternal_conservatism_subtype
						expire="1.1.1.1"
						id = -1
					}
				}
			}
		}
	}
	
	on_monthly_GFL = {
		effect = {
			if = {
				limit = {
					has_character = ZHP_orsza
					NOT = {
						has_country_leader = {
							character = ZHP_orsza
							ruling_only = yes
						}
					}
				}
				retire_country_leader = yes
				add_country_leader_role = {
					character = ZHP_orsza
					country_leader = {
						ideology = scout_system_subtype
						expire="1.1.1.1"
						id = -1
					}
				}
			}
		}
	}
	
	on_monthly_CAL = {
		effect = {
			if = {
				limit = {
					NOT = {
						has_country_flag = CAL_senate_closed_due_to_grmans
					}
				}
				if = {
					limit = {
						check_variable = {
							var = CAL_emperor_gravitas
							value = 160
							compare = greater_than_or_equals
						}
					}
					subtract_from_variable = {
						CAL_legiones_loyalty = 1
					}
					subtract_from_variable = {
						CAL_populares_loyalty = 1
					}
					subtract_from_variable = {
						CAL_praetoriae_loyalty = 1
					}
					subtract_from_variable = {
						CAL_optimates_loyalty = 1
					}
				}
				if = {
					limit = {
						check_variable = {
							CAL_populares_percentage > 0.6
						}
					}
					subtract_from_variable = {
						CAL_optimates_loyalty = 1
					}
				} 
				else_if = {
					limit = {
						check_variable = {
							CAL_populares_percentage < 0.4
						}
					}
					subtract_from_variable = {
						CAL_populares_loyalty = 1
					}
				}
				# if = {
				# 	limit = {
				# 		check_variable = {
				# 			CAL_emperor_gravitas < CAL_populares_gravitas
				# 		}
				# 	}
				# 	subtract_from_variable = {
				# 		CAL_populares_loyalty = 2
				# 	}
				# }
				# if = {
				# 	limit = {
				# 		check_variable = {
				# 			CAL_emperor_gravitas < CAL_praetoriae_gravitas
				# 		}
				# 	}
				# 	subtract_from_variable = {
				# 		CAL_praetoriae_loyalty = 2
				# 	}
				# }
				# if = {
				# 	limit = {
				# 		check_variable = {
				# 			CAL_emperor_gravitas < CAL_optimates_gravitas
				# 		}
				# 	}
				# 	subtract_from_variable = {
				# 		CAL_optimates_loyalty = 2
				# 	}
				# }
				# if = {
				# 	limit = {
				# 		check_variable = {
				# 			CAL_emperor_gravitas < CAL_legiones_gravitas
				# 		}
				# 	}
				# 	subtract_from_variable = {
				# 		CAL_legiones_loyalty = 2
				# 	}
				# }
				#loyalty-bonus-populare
				if ={
					limit = {
						check_variable = {
							var = CAL_populares_loyalty
							value = 15
							compare = less_than_or_equals
						}
					}
					add_to_variable = {
						CAL_populares_gravitas = 5
					}
				}
				else_if = {
					limit = {
						check_variable = {
							var = CAL_populares_loyalty
							value = 30
							compare = less_than_or_equals
						}
					}
					add_to_variable = {
						CAL_populares_gravitas = 3
					}
				}
				else_if = {
					limit = {
						check_variable = {
							CAL_populares_loyalty > 80
						}
						check_variable = {
							var = CAL_populares_loyalty
							value = 90
							compare = less_than_or_equals
						}
					}
					subtract_from_variable =  {
						CAL_populares_gravitas = 1
					}
				}
				else = {
					subtract_from_variable =  {
						CAL_populares_gravitas = -3
					}
				}
				#loyalty-bonus-optimate
				if ={
					limit = {
						check_variable = {
							var = CAL_optimates_loyalty
							value = 15
							compare = less_than_or_equals
						}
					}
					add_to_variable = {
						CAL_optimates_gravitas = 5
					}
				}
				else_if = {
					limit = {
						check_variable = {
							var = CAL_optimates_loyalty
							value = 30
							compare = less_than_or_equals
						}
					}
					add_to_variable = {
						CAL_optimates_gravitas = 3
					}
				}
				else_if = {
					limit = {
						check_variable = {
							CAL_optimates_loyalty > 80
						}
						check_variable = {
							var = CAL_optimates_loyalty
							value = 90
							compare = less_than_or_equals
						}
					}
					subtract_from_variable =  {
						CAL_optimates_gravitas = 1
					}
				}
				else = {
					subtract_from_variable =  {
						CAL_optimates_gravitas = -3
					}
				}
				#loyalty-bonus-legiones
				if ={
					limit = {
						check_variable = {
							var = CAL_legiones_loyalty
							value = 15
							compare = less_than_or_equals
						}
					}
					add_to_variable = {
						CAL_legiones_gravitas = 5
					}
				}
				else_if = {
					limit = {
						check_variable = {
							var = CAL_legiones_loyalty
							value = 30
							compare = less_than_or_equals
						}
					}
					add_to_variable = {
						CAL_legiones_gravitas = 3
					}
				}
				else_if = {
					limit = {
						check_variable = {
							CAL_legiones_loyalty > 80
						}
						check_variable = {
							var = CAL_legiones_loyalty
							value = 90
							compare = less_than_or_equals
						}
					}
					subtract_from_variable =  {
						CAL_legiones_gravitas = 1
					}
				}
				else = {
					subtract_from_variable =  {
						CAL_legiones_gravitas = -3
					}
				}
				#loyalty-bonus-preatoriae
				if= {
					limit = {
						NOT = {
							has_country_flag = CAL_praetorians_banned
						}
					}
					if ={
						limit = {
							check_variable = {
								var = CAL_praetoriae_loyalty
								value = 15
								compare = less_than_or_equals
							}
						}
						add_to_variable = {
							CAL_praetoriae_gravitas = 5
						}
					}
					else_if = {
						limit = {
							check_variable = {
								var = CAL_praetoriae_loyalty
								value = 30
								compare = less_than_or_equals
							}
						}
						add_to_variable = {
							CAL_praetoriae_gravitas = 3
						}
					}
					else_if = {
						limit = {
							check_variable = {
								CAL_praetoriae_loyalty > 80
							}
							check_variable = {
								var = CAL_praetoriae_loyalty
								value = 90
								compare = less_than_or_equals
							}
						}
						subtract_from_variable =  {
							CAL_praetoriae_gravitas = 1
						}
					}
					else = {
						subtract_from_variable =  {
							CAL_praetoriae_gravitas = -3
						}
					}
				}
				
				CAL_clamp_on_loyalty_and_gravitas = yes
			}
			
		}
		
	}	
	on_monthly_EKS = {
		effect = {
			if = {
				limit = {
					has_global_flag = eurokom_has_fallen
				}
				reset_vp_name = yes
			}
		}
	}
	on_monthly_EKW = {
		effect = {
			if = {
				limit = {
					has_global_flag = eurokom_has_fallen
				}
				reset_vp_name = yes
			}
		}
	}
	on_monthly_TOU = {
		effect = {
			if = {
				limit = {
					has_global_flag = eurokom_has_fallen
				}
				reset_vp_name = yes
			}
		}
	}
	on_monthly_BRG = {
		effect = {
			if = {
				limit = {
					has_global_flag = eurokom_has_fallen
				}
				reset_vp_name = yes
			}
		}
	}
	on_monthly_BOG = {
		effect = {
			if = {
				limit = {
					has_global_flag = eurokom_has_fallen
				}
				reset_vp_name = yes
			}
		}
	}		
	on_monthly_BEX = {
		effect = {
			damage_units = {
				damage = 0.05
			}
		}
	}
	on_war = {
		effect = {
		if = {
			limit = { THIS = { is_ai = yes }
			NOT = {
				any_enemy_country = {
					is_ai = no
				}
			} 
			}
			THIS = { add_ideas = AI_bridge_crossing_idea } 
		}	
		}
	}
	on_declare_war = {
		effect = {
			log = "[?From.casualties] - [?ROOT.casualties_k]"
			
			if = {
				limit = {
					FROM = {
						has_country_flag = getting_ready_to_war
					}
				}
				FROM = {
					clr_country_flag = getting_ready_to_war
				}
			}
			if = {
				limit = {
					ROOT = {
						has_country_flag = getting_ready_to_war
					}
				}
				ROOT = {
					clr_country_flag = getting_ready_to_war
				}
			}
		}
	}
	on_unit_leader_promote_from_ranks_veteran = {
		effect = {
			if = {
				limit = {
					OWNER = {
						original_tag = CAL
					}
				}
				ROOT = {
					random_list = {
						50 = {
							add_unit_leader_trait = popular
						}
						50 = {
							add_unit_leader_trait = optimate
						}
					}
					random_list = {
						50 = {
							add_unit_leader_trait = praetorian
						}
						50 = {
							add_unit_leader_trait = legionarius
						}
					}
				}
			}
		}
	}
	on_unit_leader_promote_from_ranks_green = {
		effect = {
			if = {
				limit = {
					OWNER = {
						original_tag = CAL
					}
				}
				ROOT = {
					random_list = {
						50 = {
							add_unit_leader_trait = popular
						}
						50 = {
							add_unit_leader_trait = optimate
						}
					}
					random_list = {
						50 = {
							add_unit_leader_trait = praetorian
						}
						50 = {
							add_unit_leader_trait = legionarius
						}
					}
				}
			}
		}
	}
}
