on_actions = {
	on_startup = {
		effect = {
				#podlasie	
				add_to_array = { global.podlasie_tribes = TNO }
				add_to_array = { global.podlasie_tribes = COL }
				add_to_array = { global.podlasie_tribes = ZAM }
				add_to_array = { global.podlasie_tribes = HMA }
				add_to_array = { global.podlasie_tribes = WIL }
				add_to_array = { global.podlasie_tribes = UHL }
				add_to_array = { global.podlasie_tribes = DRO }
				add_to_array = { global.podlasie_tribes = ZAB }
				add_to_array = { global.podlasie_tribes = SUP }
				add_to_array = { global.podlasie_tribes = GRO }
				add_to_array = { global.podlasie_tribes = TYK }
				add_to_array = { global.podlasie_tribes = OSO }
				add_to_array = { global.podlasie_tribes = DAM }
				add_to_array = { global.podlasie_tribes = BRD }
				add_to_array = { global.podlasie_tribes = AUG }
				add_to_array = { global.podlasie_tribes = SEI }
				add_to_array = { global.podlasie_tribes = RAJ }
				#warmia
				add_to_array = { global.rightful_warmia_clay = 40}
				add_to_array = { global.rightful_warmia_clay = 42}
				add_to_array = { global.rightful_warmia_clay = 46}
				add_to_array = { global.rightful_warmia_clay = 47}
				add_to_array = { global.rightful_warmia_clay = 51}
				add_to_array = { global.rightful_warmia_clay = 632}
				add_to_array = { global.rightful_warmia_clay = 875}
			
			
			
			every_state = {
				set_variable = { coring_cost = state_population_k }
				
				#set_variable = { coring_time = coring_cost }
				multiply_variable = { coring_cost = 0.6 }
				#divide_variable = { coring_time = 2 }
				round_variable = coring_cost
				#round_variable = coring_time
				if = {
					limit = {
						is_controlled_by = CAL
					}
					meta_effect = {
						text = {
							set_state_name = STATE_[STATE_ID]_CAL
						}
						STATE_ID = "[?THIS.GetID]"
					}
				}
				if = {
					limit = {
						is_controlled_by = CZE
					}
					meta_effect = {
						text = {
							set_state_name = STATE_[STATE_ID]_CZE
						}
						STATE_ID = "[?THIS.GetID]"
					}
				}
				if = {
					limit = {
						OR = {
							is_controlled_by = KAM
							is_controlled_by = MNI
							is_controlled_by = RAS
							is_controlled_by = WRT
							is_controlled_by = POM
							is_controlled_by = KES
							is_controlled_by = KOS
							is_controlled_by = TEU 
						}
					}
					meta_effect = {
						text = {
							set_state_name = STATE_[STATE_ID]_GER
						}
						STATE_ID = "[?THIS.GetID]"
					}
				}
				if = {
					limit = {
						is_controlled_by = JOM
					}
					meta_effect = {
						text = {
							set_state_name = STATE_[STATE_ID]_JOM
						}
						STATE_ID = "[?THIS.GetID]"
					}
				}
				if = {
					limit = {
						OR = {
							is_controlled_by = LEH
							is_controlled_by = LCH
							is_controlled_by = WAN
							is_controlled_by = JAS
						}
					}
					meta_effect = {
						text = {
							set_state_name = STATE_[STATE_ID]_LEH
						}
						STATE_ID = "[?THIS.GetID]"
					}
				}
				if = {
					limit = {
						OR = {
							is_controlled_by = UPA
							is_controlled_by = KOZ
							is_controlled_by = UHR
							is_controlled_by = BEL
							is_controlled_by = ROS
							is_controlled_by = LEM
						}
					}
					meta_effect = {
						text = {
							set_state_name = STATE_[STATE_ID]_UKROS
						}
						STATE_ID = "[?THIS.GetID]"
					}
				}
				if = {
					limit = {
						is_controlled_by = USP
					}
					meta_effect = {
						text = {
							set_state_name = STATE_[STATE_ID]_USP
						}
						STATE_ID = "[?THIS.GetID]"
					}
				}
			}
			every_country = {
				set_variable = {
					var = doctrines_researched
					value = 0
				}
				calculate_energy_balance = yes
				set_variable = { PaF_Opening_Screen = 1 }
			}
			if = {
				limit = { 
					AND = {
						is_poland_unifier = yes
						is_ai = yes
						}
					}
					add_ideas = fucking_ai 
				}
			if = {
				limit = { 
					AND = {
						is_upper_silesia = yes
						is_ai = yes
						}
					}
					add_ideas = silesia_minor_surrender
				}

			PRK = {
				set_country_flag = ziobro_start_war
				activate_mission = ziobro_holy_war
				country_event = {
					id = ziobro.16
					days = 1 
					}
			}
			EKS = {
				country_event = {
					id = eksrozpad.1
					days = 160 
					}
				country_event = {
					id = eks.1
					days = 1 
					}
			}			
			EKW = {
				country_event = {
					id = ekwrozpad.1
					days = 180
					}
				country_event = {
					id = ekw.3
					days = 1 
					}
			}
			GDA = {
				country_event = {
					id = gdarozpad.1
					days = 194 
					}
				country_event = {
					id = wmg.1
					days = 1 
					}
			}
			KSZ = {
				country_event = {
					id = kszrozpad.1
					days = 190 
					}
				country_event = {
					id = kaszub.1
					days = 1 
					}
			}
			RZE = {
				country_event = {
					id = rzeszow_siege.1
					days = 14
					}
			}
			OSW = {
				add_to_war = { 
					targeted_alliance = PRK 
					enemy = SND 
					hostility_reason = asked_to_join
				}
				add_to_war = { 
					targeted_alliance = PRK 
					enemy = STA
					hostility_reason = asked_to_join
				}
			}
			BOH = {
				add_to_war = { 
					targeted_alliance = PRK 
					enemy = SND 
					hostility_reason = asked_to_join
				}
				add_to_war = { 
					targeted_alliance = PRK 
					enemy = STA
					hostility_reason = asked_to_join
				}
			}
			BOM = {
				scoped_play_song = "intro_bombas"
			}
			JOM = {
				scoped_play_song = "intro_jomsborg"
			}
			ZYR = {
				scoped_play_song = "intro_jaruzelska"
				}
			PLC = {
				scoped_play_song = "intro_policja"
				}
			BIE = {
				scoped_play_song = "intro_bielany"
				}
			RAS = {
				scoped_play_song = "intro_ras"
			}
			BBW = {
				scoped_play_song = "intro_bractwo"
				set_variable = { energy_exported = 0 }
				every_neighbor_country = {
					set_variable = { energy_imported = 0 }
				}
			}
			FER = {
				scoped_play_song = "intro_ferajna"
			}
			KON = {
				scoped_play_song = "intro_konon"
			}
			KOR = {
				scoped_play_song = "intro_korsarze"
			}
			KOZ = {
				scoped_play_song = "intro_kozacy"
			}
			WML = {
				scoped_play_song = "intro_lodz"
				if = {
					limit = { WML = { is_ai = yes } }
					load_focus_tree = WML_festung_lodzig
					}
				else = {
					load_focus_tree = holownia_focus
					}
			}
			MSL = {
				scoped_play_song = "intro_myslenice"
			}
			GUR = {
				scoped_play_song = "intro_podhale"
			}
			SAP = {
				scoped_play_song = "intro_sapek"
				if = { limit = { tag = SAP
								 NOT = { is_ai = yes } } 
					BBW = { set_cosmetic_tag = BBW_witcher }
					ZHP = { set_cosmetic_tag = ZHP_witcher }
					ZYD = { set_cosmetic_tag = ZYD_witcher }
					KRS = { set_cosmetic_tag = KRS_witcher }				
					WML = { set_cosmetic_tag = WML_witcher }		
					ZON = { set_cosmetic_tag = ZON_witcher }
					}
			}
			KRS = {
				scoped_play_song = "intro_skrzydlewscy"
			}
			TRC = {
				scoped_play_song = "intro_torcida"
			}
			UHR = {
				scoped_play_song = "intro_umh"
			}
			UPA = {
				scoped_play_song = "intro_upa"
			}
			ZYD = {
				scoped_play_song = "intro_widzew"
			}
			ZHP = {
				scoped_play_song = "intro_zhp"
			}
			RUD = {
				scoped_play_song = "intro_ruda"
			}
			ZAW = {
				scoped_play_song = "intro_zawiercie"
				}
			CIE = {
				scoped_play_song = "intro_cieszyn"
				}
			ASG = { 
				scoped_play_song = "intro_asg"
				}
			BSK = {
				scoped_play_song = "intro_golce"
				}
			JSW = {
				scoped_play_song = "intro_jsw"
				}
			KAT = {
				scoped_play_song = "intro_katowice"
				}
			GLI = {
				scoped_play_song = "intro_twardoch"
				}
			CCH = {
				scoped_play_song = "intro_czestochowa"
				}
			JAW = {
				scoped_play_song = "intro_antifa"
				}
			DGR = {
				scoped_play_song = "intro_dg"
				}
			WDW = {
				scoped_play_song = "intro_wadowice"
				}
			SOS = {
				scoped_play_song = "intro_sosnowiec"
				}
			JWK = {
				scoped_play_song = "intro_jwk"
				}
			BRZ = {
				scoped_play_song = "intro_buzzer"
				}
			MNI = {
				scoped_play_song = "intro_oppeln"
				country_event = {
					id = niemcy.1
					days = 1 
					}
				}
			FEL = { 
				scoped_play_song = "intro_felix"
			}
			BSC = { 
				scoped_play_song = "intro_bieszczady"
			}
		}
	}
	on_daily = {
		effect = {
			calculate_energy_balance = yes
		}
	}
	on_daily_ZHR = {
		effect = {
			if = {
				limit = {
					has_character = ZHP_marek_jedraszewski
					not = {
						has_country_leader = {
							character = ZHP_marek_jedraszewski
							ruling_only = yes
						}
					}
				}
				retire_country_leader = yes
				add_country_leader_role = {
					character = ZHP_marek_jedraszewski
					promote_leader = yes
					country_leader = {
						ideology = paternal_conservatism_subtype
						expire="1.1.1.1"
						id = -1
					}
				}
			}
		}
	}
	
	on_daily_GFL = {
		effect = {
			if = {
				limit = {
					has_character = ZHP_orsza
					not = {
						has_country_leader = {
							character = ZHP_orsza
							ruling_only = yes
						}
					}
				}
				retire_country_leader = yes
				add_country_leader_role = {
					character = ZHP_orsza
					country_leader = {
						ideology = scout_system_subtype
						expire="1.1.1.1"
						id = -1
					}
				}
			}
		}
	}
	
	on_declare_war = {
		effect = {
			if = {
				limit = {
					FROM = { tag = BBW }
					has_country_flag = importing_energy
				}
				clr_country_flag = importing_energy
				remove_opinion_modifier = {
					target = BBW
					modifier = aided_industry
				}
				remove_ideas = importing_energy_idea
				BBW = {
					add_offsite_building = {
						type = industrial_complex
						level = -1
					}
				}
				log = "[GetDateText]: [ROOT.GetName] cancels energy imports"
			}
		}
	}

	on_state_control_changed = {
		effect = {
			if = {
				limit = {
					original_tag = CAL
				}
				meta_effect = {
					text = {
						FROM.FROM = {
							set_state_name = STATE_[STATE_ID]_CAL
						}
					}
					STATE_ID = "[?FROM.FROM.GetID]"
				}
			}
			else_if = {
				limit = {
					original_tag = CZE
				}
				meta_effect = {
					text = {
						FROM.FROM = {
							set_state_name = STATE_[STATE_ID]_CZE
						}
					}
					STATE_ID = "[?FROM.FROM.GetID]"
				}
			}
			else_if = {
				limit = {
					OR = {
						original_tag = KAM
						original_tag = MNI
						original_tag = RAS
						original_tag = WRT
						original_tag = POM
						original_tag = KES
						original_tag = KOS
						original_tag = TEU 
					}
				}
				meta_effect = {
					text = {
						FROM.FROM = {
							set_state_name = STATE_[STATE_ID]_GER
						}
					}
					STATE_ID = "[?FROM.FROM.GetID]"
				}
			}
			else_if = {
				limit = {
					original_tag = JOM
				}
				meta_effect = {
					text = {
						FROM.FROM = {
							set_state_name = STATE_[STATE_ID]_JOM
						}
					}
					STATE_ID = "[?FROM.FROM.GetID]"
				}
			}
			else_if = {
				limit = {
					OR = {
						original_tag = LEH
						original_tag = LCH
						original_tag = WAN
						original_tag = JAS
					}
				}
				meta_effect = {
					text = {
						FROM.FROM = {
							set_state_name = STATE_[STATE_ID]_LEH
						}
					}
					STATE_ID = "[?FROM.FROM.GetID]"
				}
			}
			else_if = {
				limit = {
					OR = {
						original_tag = UPA
						original_tag = KOZ
						original_tag = UHR
						original_tag = BEL
						original_tag = ROS
					}
				}
				meta_effect = {
					text = {
						FROM.FROM = {
							set_state_name = STATE_[STATE_ID]_UKROS
						}
					}
					STATE_ID = "[?FROM.FROM.GetID]"
				}
			}
			else_if = {
				limit = {
					original_tag = USP
				}
				meta_effect = {
					text = {
						FROM.FROM = {
							set_state_name = STATE_[STATE_ID]_USP
						}
					}
					STATE_ID = "[?FROM.FROM.GetID]"
				}
			}
			else = {
				meta_effect = {
					text = {
						FROM.FROM = {
							set_state_name = STATE_[STATE_ID]
						}
					}
					STATE_ID = "[?FROM.FROM.GetID]"
				}
			}
		}
	}
}
