set_initial_team = {
	log = "---------------------------------------------------"
	set_temp_variable = {
		attackers = 0
	}
	while_loop_effect = {
		limit = {
			check_variable = {
				attackers < 2
			}
		}
		set_temp_variable = {
			max_power = 0
		}
		every_character = {
			limit = {
				has_character_flag = is_footballer
				has_character_flag = is_attacker
				NOT = {
					has_character_flag = is_active
				}
			}
			log = "current max power: [?max_power]"
			log = "current char: [THIS.GetName] ([?THIS.fb_power])"
			IF = {
				limit = {
					check_variable = {
						max_power = 0
					}
				}
				set_temp_variable = {
					max_power = THIS.fb_power
				}
				set_character_flag = initially_chosen
			}
			ELSE_IF = {
				limit = {
					check_variable = {
						max_power < THIS.fb_power
					}
				}
				log = "change chosen char to [THIS.GetName]"
				set_temp_variable = {
					max_power = THIS.fb_power
				}
				ROOT = {
					every_character = {
						limit = {
							has_character_flag = initially_chosen
						}
						clr_character_flag = initially_chosen
						log = "[THIS.GetName] loses the flag"
					}
				}
				set_character_flag = initially_chosen
			}
		}
		every_character = {
			limit = {
				has_character_flag = initially_chosen
			}
			clr_character_flag = initially_chosen
			set_character_flag = is_active
			log = "[THIS.GetName] was chosen to team"
		}
		add_to_temp_variable = {
			attackers = 1
		}
		log = "loop ended"
	}
	every_character = {
		limit = {
			has_character_flag = is_footballer
			NOT = {
				has_character_flag = is_attacker
			}
		}
		set_character_flag = is_active
	}
	random_character = {
		limit = {
			has_character_flag = is_attacker
			has_character_flag = is_active
		}
		set_character_flag = left_atk
		set_variable = {ROOT.left_atk_tee_number = THIS.tee_number}
		log = "[THIS.GetName] is on left attack"
	}
	random_character = {
		limit = {
			has_character_flag = is_attacker
			has_character_flag = is_active
			NOT = {
				has_character_flag = left_atk
			}
		}
		set_character_flag = right_atk
		set_variable = {ROOT.right_atk_tee_number = THIS.tee_number}
		log = "[THIS.GetName] is on right attack"
	}
	random_character = {
		limit = {
			has_character_flag = is_midfielder
			has_character_flag = is_active
		}
		set_character_flag = left_mid
		set_variable = {ROOT.left_mid_tee_number = THIS.tee_number}
		log = "[THIS.GetName] is on left mid"
	}
	random_character = {
		limit = {
			has_character_flag = is_midfielder
			has_character_flag = is_active
			NOT = {
				has_character_flag = left_mid
			}
		}
		set_character_flag = left_mid
		set_character_flag = center_mid
		set_variable = {ROOT.left_center_mid_tee_number = THIS.tee_number}
		log = "[THIS.GetName] is on left-center mid"
	}
	random_character = {
		limit = {
			has_character_flag = is_midfielder
			has_character_flag = is_active
			NOT = {
				has_character_flag = left_mid
			}
		}
		set_character_flag = right_mid
		set_character_flag = center_mid
		set_variable = {ROOT.right_center_mid_tee_number = THIS.tee_number}
		log = "[THIS.GetName] is on right-center mid"
	}
	random_character = {
		limit = {
			has_character_flag = is_midfielder
			has_character_flag = is_active
			NOT = {
				has_character_flag = left_mid
			}
			NOT = {
				has_character_flag = center_mid
			}
			NOT = {
				has_character_flag = right_mid
			}
		}
		set_character_flag = right_mid
		set_variable = {ROOT.right_mid_tee_number = THIS.tee_number}
		log = "[THIS.GetName] is on right mid"
	}
	random_character = {
		limit = {
			has_character_flag = is_defender
			has_character_flag = is_active
		}
		set_character_flag = left_def
		set_variable = {ROOT.left_def_tee_number = THIS.tee_number}
		log = "[THIS.GetName] is on left defense"
	}
	random_character = {
		limit = {
			has_character_flag = is_defender
			has_character_flag = is_active
			NOT = {
				has_character_flag = left_def
			}
		}
		set_character_flag = left_def
		set_character_flag = center_def
		set_variable = {ROOT.left_center_def_tee_number = THIS.tee_number}
		log = "[THIS.GetName] is on left-center defense"
	}
	random_character = {
		limit = {
			has_character_flag = is_defender
			has_character_flag = is_active
			NOT = {
				has_character_flag = left_def
			}
		}
		set_character_flag = center_def
		set_character_flag = right_def
		set_variable = {ROOT.right_center_def_tee_number = THIS.tee_number}
		log = "[THIS.GetName] is on right-center defense"
	}
	random_character = {
		limit = {
			has_character_flag = is_defender
			has_character_flag = is_active
			NOT = {
				has_character_flag = left_def
			}
			NOT = {
				has_character_flag = center_def
			}
			NOT = {
				has_character_flag = right_def
			}
		}
		set_character_flag = right_def
		set_variable = {ROOT.right_def_tee_number = THIS.tee_number}
		log = "[THIS.GetName] is on right defense"
	}
	random_character = {
		limit = {
			has_character_flag = is_goalkeeper
		}
		set_variable = {ROOT.gk_tee_number = THIS.tee_number}
		log = "[THIS.GetName] is is_goalkeeper"
	}

}

clear_team_ui_flags = {
	clr_country_flag = left_atk_chosen
	clr_country_flag = center_atk_chosen
	clr_country_flag = right_atk_chosen
	clr_country_flag = left_mid_chosen
	clr_country_flag = center_mid_chosen
	clr_country_flag = right_mid_chosen
	clr_country_flag = left_def_chosen
	clr_country_flag = center_def_chosen
	clr_country_flag = right_def_chosen
	clr_country_flag = gk_chosen
}