
# tba

# Ager Publicus (P) - pretorianie
# Tributorum (P) - pretorianie
# Militae (O) - legioniści
# Securitatis (P) - pretorianie
# Subsidiarum Socialum (P) - legioniści
# Administrationis (P) - pretorianie 
# Coequatio: 
# (P) - pretorianie
# (O) - legioniści

CAL_add_new_senators = {
	if = {
		limit = {
			check_variable = {
				CAL_senate_lvl = 2
			}
		}
		set_temp_variable = {
			CAL_new_senators_count = 50
		}
		else_if = {
			limit = {
				check_variable = {
					CAL_senate_lvl = 3
				}
			}
			set_temp_variable = {
				CAL_new_senators_count = 150
			}
		}
		else = {
			set_temp_variable = {
				CAL_new_senators_count = 600
			}
		}
	}
	set_temp_variable = {
		parties_to_take = party_popularity@autocracy
	}
	add_to_temp_variable = {
		parties_to_take = party_popularity@neonationalism
	}
	add_to_temp_variable = {
		parties_to_take = party_popularity@reactionary
	}
	add_to_temp_variable = {
		parties_to_take = party_popularity@squattism
	}
	add_to_temp_variable = {
		parties_to_take = party_popularity@socialdemocrature
	}

	set_temp_variable = {
		parties_propopulare = party_popularity@socialdemocrature
	}

	add_to_temp_variable = {
		parties_propopulare = party_popularity@squattism
	}

	set_temp_variable = {
		new_populares_percentage = parties_propopulare
	}

	divide_temp_variable = {
		new_populares_percentage = parties_to_take
	}

	multiply_temp_variable = {
		CAL_new_senators_count = new_populares_percentage
	}
	round_temp_variable = CAL_new_senators_count
	add_to_variable = {
		CAL_populares_count = CAL_new_senators_count
	}
	if = {
		limit = {
			check_variable = {
				CAL_senate_lvl = 2
			}
		}
		set_variable = {
			CAL_optimates_count = 150
		}
		subtract_from_variable = {
			CAL_optimates_count = CAL_populares_count
		}
		else_if = {
			limit = {
				check_variable = {
					CAL_senate_lvl = 3
				}
			}
			set_variable = {
				CAL_optimates_count = 300
			}
			subtract_from_variable = {
				CAL_optimates_count = CAL_populares_count
			}
		}
		else = {
			set_variable = {
				CAL_optimates_count = 900
			}
			subtract_from_variable = {
				CAL_optimates_count = CAL_populares_count
			}
		}
	}
	CAL_redraw_senate_diagram = yes
}

CAL_redraw_senate_diagram = {
	set_variable = {
		CAL_populares_percentage = CAL_populares_count
	}
	set_variable = {
		CAL_populares_at_row1 = 0
	}
	set_variable = {
		CAL_populares_at_row2 = 0
	}
	set_variable = {
		CAL_populares_at_row3 = 0
	}
	set_variable = {
		CAL_populares_at_row4 = 0
	}
	set_variable = {
		CAL_populares_at_row5 = 0
	}
	set_variable = {
		CAL_populares_at_row6 = 0
	}
	set_variable = {
		CAL_populares_at_row7 = 0
	}
	set_variable = {
		CAL_populares_at_row8 = 0
	}
	set_variable = {
		CAL_populares_at_row9 = 0
	}
	set_variable = {
		CAL_populares_at_row10 = 0
	}
	set_variable = {
		CAL_populares_at_row11 = 0
	}
	set_variable = {
		CAL_populares_at_row12 = 0
	}
	set_variable = {
		CAL_populares_at_row13 = 0
	}
	set_variable = {
		CAL_populares_at_row14 = 0
	}
	set_variable = {
		CAL_populares_at_row15 = 0
	}
	set_variable = {
		CAL_populares_at_row16 = 0
	}
	set_variable = {
		CAL_populares_at_row17 = 0
	}
	set_variable = {
		CAL_populares_at_row18 = 0
	}
	set_variable = {
		CAL_populares_at_row19 = 0
	}
	set_variable = {
		CAL_optimates_at_row1 = 0
	}
	
	if = {
		limit = {
			check_variable = {
				CAL_senate_lvl = 1
			}
		}
		divide_variable = {
			CAL_populares_percentage = 100
		}
	}
	else_if = {
		limit = {
			check_variable = {
				CAL_senate_lvl = 2
			}
		}
		divide_variable = {
			CAL_populares_percentage = 150
		}
	}
	else_if = {
		limit = {
			check_variable = {
				CAL_senate_lvl = 3
			}
		}
		divide_variable = {
			CAL_populares_percentage = 300
		}
	}
	else = {
		divide_variable = {
			CAL_populares_percentage = 900
		}
	}
	set_variable = {
		CAL_populares_seats_to_draw = CAL_populares_count
	}
	#drawing
	#round 1
	set_variable = {
		CAL_populares_seats_to_draw_this_round = CAL_populares_percentage
	}
	multiply_variable = {
		CAL_populares_seats_to_draw_this_round = 21
	}
	round_variable = CAL_populares_seats_to_draw_this_round
	if = {
		limit = { 
			check_variable = { CAL_populares_seats_to_draw_this_round = 0 }
			check_variable = { CAL_populares_count > 0 }
		}
		set_variable = {
			CAL_populares_seats_to_draw_this_round = 1
		}
	}
	set_variable = {CAL_populares_at_row1 = CAL_populares_seats_to_draw_this_round}
	subtract_from_variable = { CAL_populares_seats_to_draw = CAL_populares_at_row1}
	#ROUND 2
	if = {
		limit = {
			check_variable = {
				CAL_populares_seats_to_draw > 0 
			}
		}
		set_variable = {
			CAL_populares_seats_to_draw_this_round = CAL_populares_percentage
		}
		multiply_variable = {
			CAL_populares_seats_to_draw_this_round = 24
		}
		round_variable = CAL_populares_seats_to_draw_this_round
		if = {
			limit = { 
				check_variable = { CAL_populares_seats_to_draw_this_round = 0 }

			}
			set_variable = {
				CAL_populares_seats_to_draw_this_round = 1
			}
		}
		set_variable = {CAL_populares_at_row2 = CAL_populares_seats_to_draw_this_round}
		subtract_from_variable = { CAL_populares_seats_to_draw = CAL_populares_at_row2}
	}

	#ROUND 3
	if = {
		limit = {
			check_variable = {
				CAL_populares_seats_to_draw > 0 
			}
		}
		set_variable = {
			CAL_populares_seats_to_draw_this_round = CAL_populares_percentage
		}
		multiply_variable = {
			CAL_populares_seats_to_draw_this_round = 26
		}
		round_variable = CAL_populares_seats_to_draw_this_round
		if = {
			limit = { 
				check_variable = { CAL_populares_seats_to_draw_this_round = 0 }

			}
			set_variable = {
				CAL_populares_seats_to_draw_this_round = 1
			}
		}
		set_variable = {CAL_populares_at_row3 = CAL_populares_seats_to_draw_this_round}
		subtract_from_variable = { CAL_populares_seats_to_draw = CAL_populares_at_row3}
	}

	#ROUND 4
	if = {
		limit = {
			check_variable = {
				CAL_populares_seats_to_draw > 0 
			}
		}
		set_variable = {
			CAL_populares_seats_to_draw_this_round = CAL_populares_percentage
		}
		multiply_variable = {
			CAL_populares_seats_to_draw_this_round = 29
		}
		round_variable = CAL_populares_seats_to_draw_this_round
		if = {
			limit = { 
				check_variable = { CAL_populares_seats_to_draw_this_round = 0 }
			}
			set_variable = {
				CAL_populares_seats_to_draw_this_round = 1
			}
		}
		if = {
			limit = {
				check_variable = {
					CAL_populares_seats_to_draw < CAL_populares_seats_to_draw_this_round
				}
			}
			set_variable = {CAL_populares_seats_to_draw_this_round = CAL_populares_seats_to_draw}
		}
		set_variable = {CAL_populares_at_row4 = CAL_populares_seats_to_draw_this_round}
		subtract_from_variable = { CAL_populares_seats_to_draw = CAL_populares_at_row4}
	}

	# bonus dla senatu lvl 1
	
	if = {
		limit = {
			check_variable = {
				CAL_senate_lvl = 1
			}
			
		}
		if = {
			limit = {
				check_variable = {
					CAL_populares_seats_to_draw > 0
				}
			}
			while_loop_effect = {
				limit = {
					check_variable = {
						CAL_populares_seats_to_draw > 0
					}
				}
				if = {
					limit = {
						check_variable = {
							CAL_populares_seats_to_draw > 0
						}
					}
					add_to_variable = {
						CAL_populares_at_row4 = 1
					}
					subtract_from_variable = {
						CAL_populares_seats_to_draw = 1
					}
				}
				if = {
					limit = {
						check_variable = {
							CAL_populares_seats_to_draw > 0
						}
					}
					add_to_variable = {
						CAL_populares_at_row3 = 1
					}
					subtract_from_variable = {
						CAL_populares_seats_to_draw = 1
					}
				}
				if = {
					limit = {
						check_variable = {
							CAL_populares_seats_to_draw > 0
						}
					}
					add_to_variable = {
						CAL_populares_at_row2 = 1
					}
					subtract_from_variable = {
						CAL_populares_seats_to_draw = 1
					}
				}
				if = {
					limit = {
						check_variable = {
							CAL_populares_seats_to_draw > 0
						}
					}
					add_to_variable = {
						CAL_populares_at_row1 = 1
					}
					subtract_from_variable = {
						CAL_populares_seats_to_draw = 1
					}
				}
			}
		}

	}

	#ROUND 5
	if = {
		limit = {
			check_variable = {
				CAL_populares_seats_to_draw > 0 
			}
		}
		set_variable = {
			CAL_populares_seats_to_draw_this_round = CAL_populares_percentage
		}
		multiply_variable = {
			CAL_populares_seats_to_draw_this_round = 25
		}	
		round_variable = CAL_populares_seats_to_draw_this_round
		if = {
			limit = { 
				check_variable = { CAL_populares_seats_to_draw_this_round = 0 }
			}
			set_variable = {
				CAL_populares_seats_to_draw_this_round = 1
			}
		}
		if = {
			limit = {
				check_variable = {
					CAL_populares_seats_to_draw < CAL_populares_seats_to_draw_this_round
				}
			}
			set_variable = {CAL_populares_seats_to_draw_this_round = CAL_populares_seats_to_draw}
		}
		set_variable = {CAL_populares_at_row5 = CAL_populares_seats_to_draw_this_round}
		subtract_from_variable = { CAL_populares_seats_to_draw = CAL_populares_at_row5}
	}
	# round 6
	if = {
		limit = {
			check_variable = {
				CAL_populares_seats_to_draw > 0 
			}
		}
		set_variable = {
			CAL_populares_seats_to_draw_this_round = CAL_populares_percentage
		}
		multiply_variable = {
			CAL_populares_seats_to_draw_this_round = 25
		}
		round_variable = CAL_populares_seats_to_draw_this_round
		if = {
			limit = { 
				check_variable = { CAL_populares_seats_to_draw_this_round = 0 }
			}
			set_variable = {
				CAL_populares_seats_to_draw_this_round = 1
			}
		}
		if = {
			limit = {
				check_variable = {
					CAL_populares_seats_to_draw < CAL_populares_seats_to_draw_this_round
				}
			}
			set_variable = {CAL_populares_seats_to_draw_this_round = CAL_populares_seats_to_draw}
		}
		set_variable = {CAL_populares_at_row6 = CAL_populares_seats_to_draw_this_round}
		subtract_from_variable = { CAL_populares_seats_to_draw = CAL_populares_at_row6}
	}

	# #another bonus round (for lvl 2)
	if = {
		limit = {
			check_variable = { CAL_senate_lvl = 2 }
			check_variable = { CAL_populares_seats_to_draw > 0}
		}
		while_loop_effect = {
			limit = {
				check_variable = { CAL_populares_seats_to_draw > 0 }
			}
			if = {
				limit = {
					check_variable = {CAL_populares_seats_to_draw > 0 }
				}
				add_to_variable = { CAL_populares_at_row6 = 1}
			}
			subtract_from_variable = { CAL_populares_seats_to_draw = 1 }	
			if = {
				limit = {
					check_variable = {CAL_populares_seats_to_draw > 0 }
				}
				add_to_variable = { CAL_populares_at_row5 = 1}
			}
			subtract_from_variable = { CAL_populares_seats_to_draw = 1 }		
		}
	}
	# #round 7
	if = {
		limit = {
			check_variable = {
				CAL_populares_seats_to_draw > 0 
			}
		}
		set_variable = {
			CAL_populares_seats_to_draw_this_round = CAL_populares_percentage
		}
		multiply_variable = {
			CAL_populares_seats_to_draw_this_round = 33
		}
		round_variable = CAL_populares_seats_to_draw_this_round
		if = {
			limit = { 
				check_variable = { CAL_populares_seats_to_draw_this_round = 0 }
			}
			set_variable = {
				CAL_populares_seats_to_draw_this_round = 1
			}
		}
		if = {
			limit = {
				check_variable = {
					CAL_populares_seats_to_draw < CAL_populares_seats_to_draw_this_round
				}
			}
			set_variable = {CAL_populares_seats_to_draw_this_round = CAL_populares_seats_to_draw}
		}
		set_variable = {CAL_populares_at_row7 = CAL_populares_seats_to_draw_this_round}
		subtract_from_variable = { CAL_populares_seats_to_draw = CAL_populares_at_row7}
	}
	# #round 8
	if = {
		limit = {
			check_variable = {
				CAL_populares_seats_to_draw > 0 
			}
		}
		set_variable = {
			CAL_populares_seats_to_draw_this_round = CAL_populares_percentage
		}
		multiply_variable = {
			CAL_populares_seats_to_draw_this_round = 35
		}
		round_variable = CAL_populares_seats_to_draw_this_round
		if = {
			limit = { 
				check_variable = { CAL_populares_seats_to_draw_this_round = 0 }
			}
			set_variable = {
				CAL_populares_seats_to_draw_this_round = 1
			}
		}
		if = {
			limit = {
				check_variable = {
					CAL_populares_seats_to_draw < CAL_populares_seats_to_draw_this_round
				}
			}
			set_variable = {CAL_populares_seats_to_draw_this_round = CAL_populares_seats_to_draw}
		}
		set_variable = {CAL_populares_at_row8 = CAL_populares_seats_to_draw_this_round}
		subtract_from_variable = { CAL_populares_seats_to_draw = CAL_populares_at_row8}
	}
	#round 9
	if = {
		limit = {
			check_variable = {
				CAL_populares_seats_to_draw > 0 
			}
		}
		set_variable = {
			CAL_populares_seats_to_draw_this_round = CAL_populares_percentage
		}
		multiply_variable = {
			CAL_populares_seats_to_draw_this_round = 39
		}
		round_variable = CAL_populares_seats_to_draw_this_round
		if = {
			limit = { 
				check_variable = { CAL_populares_seats_to_draw_this_round = 0 }
			}
			set_variable = {
				CAL_populares_seats_to_draw_this_round = 1
			}
		}
		if = {
			limit = {
				check_variable = {
					CAL_populares_seats_to_draw < CAL_populares_seats_to_draw_this_round
				}
			}
			set_variable = {CAL_populares_seats_to_draw_this_round = CAL_populares_seats_to_draw}
		}
		set_variable = {CAL_populares_at_row9 = CAL_populares_seats_to_draw_this_round}
		subtract_from_variable = { CAL_populares_seats_to_draw = CAL_populares_at_row9}
	}
	#round 10
	if = {
		limit = {
			check_variable = {
				CAL_populares_seats_to_draw > 0 
			}
		}
		set_variable = {
			CAL_populares_seats_to_draw_this_round = CAL_populares_percentage
		}
		multiply_variable = {
			CAL_populares_seats_to_draw_this_round = 43
		}
		round_variable = CAL_populares_seats_to_draw_this_round
		if = {
			limit = { 
				check_variable = { CAL_populares_seats_to_draw_this_round = 0 }
			}
			set_variable = {
				CAL_populares_seats_to_draw_this_round = 1
			}
		}
		if = {
			limit = {
				check_variable = {
					CAL_populares_seats_to_draw < CAL_populares_seats_to_draw_this_round
				}
			}
			set_variable = {CAL_populares_seats_to_draw_this_round = CAL_populares_seats_to_draw}
		}
		set_variable = {CAL_populares_at_row10 = CAL_populares_seats_to_draw_this_round}
		subtract_from_variable = { CAL_populares_seats_to_draw = CAL_populares_at_row10}
	}
	#another bonus round (for lvl 3)
	if = {
		limit = {
			check_variable = { CAL_senate_lvl = 3 }
			check_variable = { CAL_populares_seats_to_draw > 0}
		}
		log = "[?CAL_populares_seats_to_draw]"
		while_loop_effect = {
			limit = {
				check_variable = { CAL_populares_seats_to_draw > 0 }
			}
			if = {
				limit = {
					check_variable = { CAL_populares_seats_to_draw > 0 }
				}
				add_to_variable = { CAL_populares_at_row10 = 1}
			}
			subtract_from_variable = { CAL_populares_seats_to_draw = 1 }
			if = {
				limit = {
					check_variable = { CAL_populares_seats_to_draw > 0 }
				}
				add_to_variable = { CAL_populares_at_row9 = 1}
			}
			subtract_from_variable = { CAL_populares_seats_to_draw = 1 }
			if = {
				limit = {
					check_variable = { CAL_populares_seats_to_draw > 0 }
				}
				add_to_variable = { CAL_populares_at_row8 = 1}
			}
			subtract_from_variable = { CAL_populares_seats_to_draw = 1 }
		}
	}
	# #round 11
	if = {
		limit = {
			check_variable = {
				CAL_populares_seats_to_draw > 0 
			}
		}
		set_variable = {
			CAL_populares_seats_to_draw_this_round = CAL_populares_percentage
		}
		multiply_variable = {
			CAL_populares_seats_to_draw_this_round = 47
		}
		round_variable = CAL_populares_seats_to_draw_this_round
		if = {
			limit = { 
				check_variable = { CAL_populares_seats_to_draw_this_round = 0 }
			}
			set_variable = {
				CAL_populares_seats_to_draw_this_round = 1
			}
		}
		if = {
			limit = {
				check_variable = {
					CAL_populares_seats_to_draw < CAL_populares_seats_to_draw_this_round
				}
			}
			set_variable = {CAL_populares_seats_to_draw_this_round = CAL_populares_seats_to_draw}
		}
		set_variable = {CAL_populares_at_row11 = CAL_populares_seats_to_draw_this_round}
		subtract_from_variable = { CAL_populares_seats_to_draw = CAL_populares_at_row11}
	}
	# #round 12
	if = {
		limit = {
			check_variable = {
				CAL_populares_seats_to_draw > 0 
			}
		}
		set_variable = {
			CAL_populares_seats_to_draw_this_round = CAL_populares_percentage
		}
		multiply_variable = {
			CAL_populares_seats_to_draw_this_round = 52
		}
		round_variable = CAL_populares_seats_to_draw_this_round
		if = {
			limit = { 
				check_variable = { CAL_populares_seats_to_draw_this_round = 0 }
			}
			set_variable = {
				CAL_populares_seats_to_draw_this_round = 1
			}
		}
		if = {
			limit = {
				check_variable = {
					CAL_populares_seats_to_draw < CAL_populares_seats_to_draw_this_round
				}
			}
			set_variable = {CAL_populares_seats_to_draw_this_round = CAL_populares_seats_to_draw}
		}
		set_variable = {CAL_populares_at_row12 = CAL_populares_seats_to_draw_this_round}
		subtract_from_variable = { CAL_populares_seats_to_draw = CAL_populares_at_row12}
	}
	# #round 13
	if = {
		limit = {
			check_variable = {
				CAL_populares_seats_to_draw > 0 
			}
		}
		set_variable = {
			CAL_populares_seats_to_draw_this_round = CAL_populares_percentage
		}
		multiply_variable = {
			CAL_populares_seats_to_draw_this_round = 57
		}
		round_variable = CAL_populares_seats_to_draw_this_round
		if = {
			limit = { 
				check_variable = { CAL_populares_seats_to_draw_this_round = 0 }
			}
			set_variable = {
				CAL_populares_seats_to_draw_this_round = 1
			}
		}
		if = {
			limit = {
				check_variable = {
					CAL_populares_seats_to_draw < CAL_populares_seats_to_draw_this_round
				}
			}
			set_variable = {CAL_populares_seats_to_draw_this_round = CAL_populares_seats_to_draw}
		}
		set_variable = {CAL_populares_at_row13 = CAL_populares_seats_to_draw_this_round}
		subtract_from_variable = { CAL_populares_seats_to_draw = CAL_populares_at_row13}
	}
	# #round 14
	if = {
		limit = {
			check_variable = {
				CAL_populares_seats_to_draw > 0 
			}
		}
		set_variable = {
			CAL_populares_seats_to_draw_this_round = CAL_populares_percentage
		}
		multiply_variable = {
			CAL_populares_seats_to_draw_this_round = 60
		}
		round_variable = CAL_populares_seats_to_draw_this_round
		if = {
			limit = { 
				check_variable = { CAL_populares_seats_to_draw_this_round = 0 }
			}
			set_variable = {
				CAL_populares_seats_to_draw_this_round = 1
			}
		}
		if = {
			limit = {
				check_variable = {
					CAL_populares_seats_to_draw < CAL_populares_seats_to_draw_this_round
				}
			}
			set_variable = {CAL_populares_seats_to_draw_this_round = CAL_populares_seats_to_draw}
		}
		set_variable = {CAL_populares_at_row14 = CAL_populares_seats_to_draw_this_round}
		subtract_from_variable = { CAL_populares_seats_to_draw = CAL_populares_at_row14}
	}
	# #round 15
	if = {
		limit = {
			check_variable = {
				CAL_populares_seats_to_draw > 0 
			}
		}
		set_variable = {
			CAL_populares_seats_to_draw_this_round = CAL_populares_percentage
		}
		multiply_variable = {
			CAL_populares_seats_to_draw_this_round = 63
		}
		round_variable = CAL_populares_seats_to_draw_this_round
		if = {
			limit = { 
				check_variable = { CAL_populares_seats_to_draw_this_round = 0 }
			}
			set_variable = {
				CAL_populares_seats_to_draw_this_round = 1
			}
		}
		if = {
			limit = {
				check_variable = {
					CAL_populares_seats_to_draw < CAL_populares_seats_to_draw_this_round
				}
			}
			set_variable = {CAL_populares_seats_to_draw_this_round = CAL_populares_seats_to_draw}
		}
		set_variable = {CAL_populares_at_row15 = CAL_populares_seats_to_draw_this_round}
		subtract_from_variable = { CAL_populares_seats_to_draw = CAL_populares_at_row15}
	}
	# #round 16
	if = {
		limit = {
			check_variable = {
				CAL_populares_seats_to_draw > 0 
			}
		}
		set_variable = {
			CAL_populares_seats_to_draw_this_round = CAL_populares_percentage
		}
		multiply_variable = {
			CAL_populares_seats_to_draw_this_round = 69
		}
		round_variable = CAL_populares_seats_to_draw_this_round
		if = {
			limit = { 
				check_variable = { CAL_populares_seats_to_draw_this_round = 0 }
			}
			set_variable = {
				CAL_populares_seats_to_draw_this_round = 1
			}
		}
		if = {
			limit = {
				check_variable = {
					CAL_populares_seats_to_draw < CAL_populares_seats_to_draw_this_round
				}
			}
			set_variable = {CAL_populares_seats_to_draw_this_round = CAL_populares_seats_to_draw}
		}
		set_variable = {CAL_populares_at_row16 = CAL_populares_seats_to_draw_this_round}
		subtract_from_variable = { CAL_populares_seats_to_draw = CAL_populares_at_row16}
	}
	# #round 17
	if = {
		limit = {
			check_variable = {
				CAL_populares_seats_to_draw > 0 
			}
		}
		set_variable = {
			CAL_populares_seats_to_draw_this_round = CAL_populares_percentage
		}
		multiply_variable = {
			CAL_populares_seats_to_draw_this_round = 76
		}
		round_variable = CAL_populares_seats_to_draw_this_round
		if = {
			limit = { 
				check_variable = { CAL_populares_seats_to_draw_this_round = 0 }
			}
			set_variable = {
				CAL_populares_seats_to_draw_this_round = 1
			}
		}
		if = {
			limit = {
				check_variable = {
					CAL_populares_seats_to_draw < CAL_populares_seats_to_draw_this_round
				}
			}
			set_variable = {CAL_populares_seats_to_draw_this_round = CAL_populares_seats_to_draw}
		}
		set_variable = {CAL_populares_at_row17 = CAL_populares_seats_to_draw_this_round}
		subtract_from_variable = { CAL_populares_seats_to_draw = CAL_populares_at_row17}
	}
	# #round 18
	if = {
		limit = {
			check_variable = {
				CAL_populares_seats_to_draw > 0 
			}
		}
		set_variable = {
			CAL_populares_seats_to_draw_this_round = CAL_populares_percentage
		}
		multiply_variable = {
			CAL_populares_seats_to_draw_this_round = 84
		}
		round_variable = CAL_populares_seats_to_draw_this_round
		if = {
			limit = { 
				check_variable = { CAL_populares_seats_to_draw_this_round = 0 }
			}
			set_variable = {
				CAL_populares_seats_to_draw_this_round = 1
			}
		}
		if = {
			limit = {
				check_variable = {
					CAL_populares_seats_to_draw < CAL_populares_seats_to_draw_this_round
				}
			}
			set_variable = {CAL_populares_seats_to_draw_this_round = CAL_populares_seats_to_draw}
		}
		set_variable = {CAL_populares_at_row18 = CAL_populares_seats_to_draw_this_round}
		subtract_from_variable = { CAL_populares_seats_to_draw = CAL_populares_at_row18}
	}
	# #round 19
	if = {
		limit = {
			check_variable = {
				CAL_populares_seats_to_draw > 0 
			}
		}
		set_variable = {
			CAL_populares_seats_to_draw_this_round = CAL_populares_percentage
		}
		multiply_variable = {
			CAL_populares_seats_to_draw_this_round = 92
		}
		round_variable = CAL_populares_seats_to_draw_this_round
		if = {
			limit = { 
				check_variable = { CAL_populares_seats_to_draw_this_round = 0 }
			}
			set_variable = {
				CAL_populares_seats_to_draw_this_round = 1
			}
		}
		if = {
			limit = {
				check_variable = {
					CAL_populares_seats_to_draw < CAL_populares_seats_to_draw_this_round
				}
			}
			set_variable = {CAL_populares_seats_to_draw_this_round = CAL_populares_seats_to_draw}
		}
		set_variable = {CAL_populares_at_row19 = CAL_populares_seats_to_draw_this_round}
		subtract_from_variable = { CAL_populares_seats_to_draw = CAL_populares_at_row19}
	}
	# #last level, last bonus round
	if = {
		limit = {
			check_variable = { CAL_senate_lvl = 4 }
			check_variable = { CAL_populares_seats_to_draw > 0}
		}
		log = "[?CAL_populares_seats_to_draw]"
		while_loop_effect = {
			limit = {
				check_variable = { CAL_populares_seats_to_draw > 0 }
			}
			if = {
				limit = {
					check_variable = { CAL_populares_seats_to_draw > 0 }
				}
				add_to_variable = { CAL_populares_at_row19 = 1}
			}
			subtract_from_variable = { CAL_populares_seats_to_draw = 1 }
			if = {
				limit = {
					check_variable = { CAL_populares_seats_to_draw > 0 }
				}
				add_to_variable = { CAL_populares_at_row18 = 1}
			}
			subtract_from_variable = { CAL_populares_seats_to_draw = 1 }
			if = {
				limit = {
					check_variable = { CAL_populares_seats_to_draw > 0 }
				}
				add_to_variable = { CAL_populares_at_row17 = 1}
			}
			subtract_from_variable = { CAL_populares_seats_to_draw = 1 }
			# else_if = {
			# 	limit = {
			# 		check_variable = {CAL_populares_at_row18 < 73 }
			# 	}
			# 	add_to_variable = { CAL_populares_at_row18 = 1}
			# }
			
		}
	}
	set_variable = { CAL_populares_seats_drawn = CAL_populares_at_row1 }
	add_to_variable = { CAL_populares_seats_drawn	= CAL_populares_at_row2 }
	add_to_variable = { CAL_populares_seats_drawn	= CAL_populares_at_row3 }
	add_to_variable = { CAL_populares_seats_drawn	= CAL_populares_at_row4 }
	if = {
		limit = {
			check_variable = {
				var = CAL_populares_seats_drawn
				value = CAL_populares_count
				compare = not_equals
			}
			check_variable = {
				CAL_senate_lvl = 1
			}
		}
		log= "[?CAL_populares_seats_drawn] = [?CAL_populares_count]??? GUH???"
	}
	set_variable = { CAL_optimates_seats_drawn = CAL_optimates_at_row1 }

	add_to_variable = { CAL_populares_seats_drawn	= CAL_populares_at_row5 }
	add_to_variable = { CAL_populares_seats_drawn	= CAL_populares_at_row6 }
	if = {
		limit = {
			check_variable = {
				var = CAL_populares_seats_drawn
				value = CAL_populares_count
				compare = not_equals
			}
			check_variable = {
				CAL_senate_lvl = 2
			}
		}
		log= "[?CAL_populares_seats_drawn] = [?CAL_populares_count]??? GUH???"
	}

	add_to_variable = { CAL_populares_seats_drawn	= CAL_populares_at_row7 }
	add_to_variable = { CAL_populares_seats_drawn	= CAL_populares_at_row8 }
	add_to_variable = { CAL_populares_seats_drawn	= CAL_populares_at_row9 }
	add_to_variable = { CAL_populares_seats_drawn	= CAL_populares_at_row10 }
	if = {
		limit = {
			check_variable = {
				var = CAL_populares_seats_drawn
				value = CAL_populares_count
				compare = not_equals
			}
			check_variable = {
				CAL_senate_lvl = 3
			}
		}
		log= "[?CAL_populares_seats_drawn] = [?CAL_populares_count]??? GUH???"
	}
	add_to_variable = { CAL_populares_seats_drawn	= CAL_populares_at_row11 }
	add_to_variable = { CAL_populares_seats_drawn	= CAL_populares_at_row12 }
	add_to_variable = { CAL_populares_seats_drawn	= CAL_populares_at_row13 }
	add_to_variable = { CAL_populares_seats_drawn	= CAL_populares_at_row14 }
	add_to_variable = { CAL_populares_seats_drawn	= CAL_populares_at_row15 }
	add_to_variable = { CAL_populares_seats_drawn	= CAL_populares_at_row16 }
	add_to_variable = { CAL_populares_seats_drawn	= CAL_populares_at_row17 }
	add_to_variable = { CAL_populares_seats_drawn	= CAL_populares_at_row18 }
	add_to_variable = { CAL_populares_seats_drawn	= CAL_populares_at_row19 }
	if = {
		limit = {
			check_variable = {
				var = CAL_populares_seats_drawn
				value = CAL_populares_count
				compare = not_equals
			}
			check_variable = {
				CAL_senate_lvl = 4
			}
		}
		log= "[?CAL_populares_seats_drawn] = [?CAL_populares_count]??? GUH???"
	}
}

CAL_initiate_senate_vote_populares = {
	set_variable = {
		var = CAL_total_senators
		value = CAL_populares_count
	}
	add_to_variable = {
		var = CAL_total_senators
		value = CAL_optimates_count
	}
	set_variable = {
		CAL_half_of_senators = CAL_total_senators
	}
	divide_variable = {
		CAL_half_of_senators = 2
	}
	set_variable = {
		CAL_populares_moving_yes_percentage = 0.3
	}
	set_variable = {
		CAL_populares_moving_no_percentage = 1
	}
	set_variable = {
		CAL_optimates_moving_yes_percentage = 0.1
	}
	set_variable = {
		CAL_optimates_moving_no_percentage = 1
	}
	#loyalty-bonus-populare
	if ={
		limit = {
			check_variable = {
				var = CAL_populares_loyalty
				value = 10
				compare = less_than_or_equals
			}
		}
		set_variable = {
			CAL_populares_moving_yes_percentage = 0
		}
	}
	else_if = {
		limit = {
			check_variable = {
				var = CAL_populares_loyalty
				value = 20
				compare = less_than_or_equals
			}
		}
		subtract_from_variable = {
			CAL_populares_moving_yes_percentage = 0.2
		}
	}
	else_if = {
		limit = {
			check_variable = {
				var = CAL_populares_loyalty
				value = 30
				compare = less_than_or_equals
			}
		}
		subtract_from_variable = {
			CAL_populares_moving_yes_percentage = 0.1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				var = CAL_populares_loyalty
				value = 80
				compare = greater_than_or_equals
			}
			check_variable = {
				var = CAL_populares_loyalty
				value = 90
				compare = less_than_or_equals
			}
		}
		add_to_variable = {
			CAL_populares_moving_yes_percentage = 0.1
		}
	}
	else = {
		add_to_variable = {
			CAL_populares_moving_yes_percentage = 0.2
		}
	}
	#loyalty-bonus-optimate
	if ={
		limit = {
			check_variable = {
				var = CAL_optimates_loyalty
				value = 10
				compare = less_than_or_equals
			}
		}
		set_variable = {
			CAL_optimates_moving_yes_percentage = 0
		}
	}
	else_if = {
		limit = {
			check_variable = {
				var = CAL_optimates_loyalty
				value = 20
				compare = less_than_or_equals
			}
		}
		subtract_from_variable = {
			CAL_optimates_moving_yes_percentage = 0.2
		}
	}
	else_if = {
		limit = {
			check_variable = {
				var = CAL_optimates_loyalty
				value = 30
				compare = less_than_or_equals
			}
		}
		subtract_from_variable = {
			CAL_optimates_moving_yes_percentage = 0.1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				var = CAL_optimates_loyalty
				value = 80
				compare = greater_than_or_equals
			}
			check_variable = {
				var = CAL_optimates_loyalty
				value = 90
				compare = less_than_or_equals
			}
		}
		add_to_variable = {
			CAL_optimates_moving_yes_percentage = 0.1
		}
	}
	else = {
		add_to_variable = {
			CAL_optimates_moving_yes_percentage = 0.2
		}
	}
	clamp_variable = {
		var = CAL_populares_moving_yes_percentage
		min = 0
	}
	clamp_variable = {
		var = CAL_optimates_moving_yes_percentage
		min = 0
	}
	subtract_from_variable = {
		CAL_populares_moving_no_percentage = CAL_populares_moving_yes_percentage
	}
	subtract_from_variable = {
		CAL_optimates_moving_no_percentage = CAL_optimates_moving_yes_percentage
	}
	#############
	# Populares #
	#############

	# Yes
	set_variable = {
		var = CAL_populares_moving_yes
		value = CAL_populares_count
	}
	multiply_variable = {
		var = CAL_populares_moving_yes
		value = CAL_populares_moving_yes_percentage
	}
	round_variable = CAL_populares_moving_yes
	set_variable = {
		var = CAL_populares_yes
		value = CAL_populares_moving_yes
	}
	# No
	set_variable = {
		var = CAL_populares_moving_no
		value = CAL_populares_count
	}
	multiply_variable = {
		var = CAL_populares_moving_no
		value = CAL_populares_moving_no_percentage
	}
	round_variable = CAL_populares_moving_no
	set_variable = {
		var = CAL_populares_no
		value = CAL_populares_moving_no
	}

	#############
	# Optimates #
	#############

	# Yes
	set_variable = {
		var = CAL_optimates_moving_yes
		value = CAL_optimates_count
	}
	multiply_variable = {
		var = CAL_optimates_moving_yes
		value = CAL_optimates_moving_yes_percentage
	}
	round_variable = CAL_optimates_moving_yes
	set_variable = {
		var = CAL_optimates_yes
		value = CAL_optimates_moving_yes
	}
	# No
	set_variable = {
		var = CAL_optimates_moving_no
		value = CAL_optimates_count
	}
	multiply_variable = {
		var = CAL_optimates_moving_no
		value = CAL_optimates_moving_no_percentage
	}
	round_variable = CAL_optimates_moving_no
	set_variable = {
		var = CAL_optimates_no
		value = CAL_optimates_moving_no
	}
}

CAL_initiate_senate_vote_optimates = {
	set_variable = {
		var = CAL_total_senators
		value = CAL_populares_count
	}
	add_to_variable = {
		var = CAL_total_senators
		value = CAL_optimates_count
	}
	set_variable = {
		CAL_half_of_senators = CAL_total_senators
	}
	divide_variable = {
		CAL_half_of_senators = 2
	}
	set_variable = {
		CAL_populares_moving_yes_percentage = 0.1
	}
	set_variable = {
		CAL_populares_moving_no_percentage = 1
	}
	set_variable = {
		CAL_optimates_moving_yes_percentage = 0.3
	}
	set_variable = {
		CAL_optimates_moving_no_percentage = 1
	}
	#loyalty-bonus-populare
	if ={
		limit = {
			check_variable = {
				var = CAL_populares_loyalty
				value = 10
				compare = less_than_or_equals
			}
		}
		set_variable = {
			CAL_populares_moving_yes_percentage = 0
		}
	}
	else_if = {
		limit = {
			check_variable = {
				var = CAL_populares_loyalty
				value = 20
				compare = less_than_or_equals
			}
		}
		subtract_from_variable = {
			CAL_populares_moving_yes_percentage = 0.2
		}
	}
	else_if = {
		limit = {
			check_variable = {
				var = CAL_populares_loyalty
				value = 30
				compare = less_than_or_equals
			}
		}
		subtract_from_variable = {
			CAL_populares_moving_yes_percentage = 0.1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				var = CAL_populares_loyalty
				value = 80
				compare = greater_than_or_equals
			}
			check_variable = {
				var = CAL_populares_loyalty
				value = 90
				compare = less_than_or_equals
			}
		}
		add_to_variable = {
			CAL_populares_moving_yes_percentage = 0.1
		}
	}
	else = {
		add_to_variable = {
			CAL_populares_moving_yes_percentage = 0.2
		}
	}
	#loyalty-bonus-optimate
	if ={
		limit = {
			check_variable = {
				var = CAL_optimates_loyalty
				value = 10
				compare = less_than_or_equals
			}
		}
		set_variable = {
			CAL_optimates_moving_yes_percentage = 0
		}
	}
	else_if = {
		limit = {
			check_variable = {
				var = CAL_optimates_loyalty
				value = 20
				compare = less_than_or_equals
			}
		}
		subtract_from_variable = {
			CAL_optimates_moving_yes_percentage = 0.2
		}
	}
	else_if = {
		limit = {
			check_variable = {
				var = CAL_optimates_loyalty
				value = 30
				compare = less_than_or_equals
			}
		}
		subtract_from_variable = {
			CAL_optimates_moving_yes_percentage = 0.1
		}
	}
	else_if = {
		limit = {
			check_variable = {
				var = CAL_optimates_loyalty
				value = 80
				compare = greater_than_or_equals
			}
			check_variable = {
				var = CAL_optimates_loyalty
				value = 90
				compare = less_than_or_equals
			}
		}
		add_to_variable = {
			CAL_optimates_moving_yes_percentage = 0.1
		}
	}
	else = {
		add_to_variable = {
			CAL_optimates_moving_yes_percentage = 0.2
		}
	}
	clamp_variable = {
		var = CAL_populares_moving_yes_percentage
		min = 0
	}
	clamp_variable = {
		var = CAL_optimates_moving_yes_percentage
		min = 0
	}
	subtract_from_variable = {
		CAL_populares_moving_no_percentage = CAL_populares_moving_yes_percentage
	}
	subtract_from_variable = {
		CAL_optimates_moving_no_percentage = CAL_optimates_moving_yes_percentage
	}

	#############
	# Populares #
	#############

	# Yes
	set_variable = {
		var = CAL_populares_moving_yes
		value = CAL_populares_count
	}
	multiply_variable = {
		var = CAL_populares_moving_yes
		value = CAL_populares_moving_yes_percentage
	}
	round_variable = CAL_populares_moving_yes
	set_variable = {
		var = CAL_populares_yes
		value = CAL_populares_moving_yes
	}
	# No
	set_variable = {
		var = CAL_populares_moving_no
		value = CAL_populares_count
	}
	multiply_variable = {
		var = CAL_populares_moving_no
		value = CAL_populares_moving_no_percentage
	}
	round_variable = CAL_populares_moving_no
	set_variable = {
		var = CAL_populares_no
		value = CAL_populares_moving_no
	}

	#############
	# Optimates #
	#############

	# Yes
	set_variable = {
		var = CAL_optimates_moving_yes
		value = CAL_optimates_count
	}
	multiply_variable = {
		var = CAL_optimates_moving_yes
		value = CAL_optimates_moving_yes_percentage
	}
	round_variable = CAL_optimates_moving_yes
	set_variable = {
		var = CAL_optimates_yes
		value = CAL_optimates_moving_yes
	}
	# No
	set_variable = {
		var = CAL_optimates_moving_no
		value = CAL_optimates_count
	}
	multiply_variable = {
		var = CAL_optimates_moving_no
		value = CAL_optimates_moving_no_percentage
	}
	round_variable = CAL_optimates_moving_no
	set_variable = {
		var = CAL_optimates_no
		value = CAL_optimates_moving_no
	}
}

CAL_count_units_allegiance = {
	set_variable = {
		CAL_units_under_populares = 0
	}
	set_variable = {
		CAL_units_under_optimates = 0
	}
	set_variable = {
		CAL_units_under_legiones = 0
	}
	set_variable = {
		CAL_units_under_praetoriae = 0
	}
	every_army_leader = {
		limit = {
			has_trait = popular	
		}
		add_to_variable = {
			CAL_units_under_populares = this.num_units
		}
	}
	every_army_leader = {
		limit = {
			has_trait = optimate
		}
		add_to_variable = {
			CAL_units_under_optimates = this.num_units
		}
	}
	every_army_leader = {
		limit = {
			has_trait = legionarius
		}
		add_to_variable = {
			CAL_units_under_legiones = this.num_units
		}
	}
	every_army_leader = {
		limit = {
			has_trait = praetorian
		}
		add_to_variable = {
			CAL_units_under_praetoriae = this.num_units
		}
	}
	clamp_variable = {
		var = CAL_units_under_populares
		max = 50
	}
	clamp_variable = {
		var = CAL_units_under_optimates
		max = 50
	}
	clamp_variable = {
		var = CAL_units_under_legiones
		max = 50
	}
	clamp_variable = {
		var = CAL_units_under_praetoriae
		max = 50
	}
}

CAL_intervene_to_populares = {
	add_to_variable = {
		CAL_populares_moving_yes_percentage = 0.25
	}
	set_variable = {
		CAL_populares_moving_no_percentage = 1
	}

	subtract_from_variable = {
		CAL_populares_moving_no_percentage = CAL_populares_moving_yes_percentage
	}

	# Yes
	set_variable = {
		var = CAL_populares_moving_yes
		value = CAL_populares_count
	}
	multiply_variable = {
		var = CAL_populares_moving_yes
		value = CAL_populares_moving_yes_percentage
	}
	round_variable = CAL_populares_moving_yes
	set_variable = {
		var = CAL_populares_yes
		value = CAL_populares_moving_yes
	}
	# No
	set_variable = {
		var = CAL_populares_moving_no
		value = CAL_populares_count
	}
	multiply_variable = {
		var = CAL_populares_moving_no
		value = CAL_populares_moving_no_percentage
	}
	round_variable = CAL_populares_moving_no
	set_variable = {
		var = CAL_populares_no
		value = CAL_populares_moving_no
	}
	CAL_count_yes_and_no = yes
}

CAL_intervene_to_optimates = {
	add_to_variable = {
		CAL_optimates_moving_yes_percentage = 0.25
	}
	set_variable = {
		CAL_optimates_moving_no_percentage = 1
	}

	subtract_from_variable = {
		CAL_optimates_moving_no_percentage = CAL_optimates_moving_yes_percentage
	}
	# Yes
	set_variable = {
		var = CAL_optimates_moving_yes
		value = CAL_optimates_count
	}
	multiply_variable = {
		var = CAL_optimates_moving_yes
		value = CAL_optimates_moving_yes_percentage
	}
	round_variable = CAL_optimates_moving_yes
	set_variable = {
		var = CAL_optimates_yes
		value = CAL_optimates_moving_yes
	}
	# No
	set_variable = {
		var = CAL_optimates_moving_no
		value = CAL_optimates_count
	}
	multiply_variable = {
		var = CAL_optimates_moving_no
		value = CAL_optimates_moving_no_percentage
	}
	round_variable = CAL_optimates_moving_no
	set_variable = {
		var = CAL_optimates_no
		value = CAL_optimates_moving_no
	}
	CAL_count_yes_and_no = yes
}

CAL_populare_plea = {
	
	add_to_variable = {
		CAL_populares_moving_yes_percentage = 0.15
	}
	set_variable = {
		CAL_populares_moving_no_percentage = 1
	}

	subtract_from_variable = {
		CAL_populares_moving_no_percentage = CAL_populares_moving_yes_percentage
	}

	# Yes
	set_variable = {
		var = CAL_populares_moving_yes
		value = CAL_populares_count
	}
	multiply_variable = {
		var = CAL_populares_moving_yes
		value = CAL_populares_moving_yes_percentage
	}
	round_variable = CAL_populares_moving_yes
	set_variable = {
		var = CAL_populares_yes
		value = CAL_populares_moving_yes
	}
	# No
	set_variable = {
		var = CAL_populares_moving_no
		value = CAL_populares_count
	}
	multiply_variable = {
		var = CAL_populares_moving_no
		value = CAL_populares_moving_no_percentage
	}
	round_variable = CAL_populares_moving_no
	set_variable = {
		var = CAL_populares_no
		value = CAL_populares_moving_no
	}
	custom_effect_tooltip = CAL_populare_plea_tt
	CAL_count_yes_and_no = yes
}

CAL_optimate_plea = {
	
	add_to_variable = {
		CAL_optimates_moving_yes_percentage = 0.15
	}
	set_variable = {
		CAL_optimates_moving_no_percentage = 1
	}

	subtract_from_variable = {
		CAL_optimates_moving_no_percentage = CAL_optimates_moving_yes_percentage
	}
	# Yes
	set_variable = {
		var = CAL_optimates_moving_yes
		value = CAL_optimates_count
	}
	multiply_variable = {
		var = CAL_optimates_moving_yes
		value = CAL_optimates_moving_yes_percentage
	}
	round_variable = CAL_optimates_moving_yes
	set_variable = {
		var = CAL_optimates_yes
		value = CAL_optimates_moving_yes
	}
	# No
	set_variable = {
		var = CAL_optimates_moving_no
		value = CAL_optimates_count
	}
	multiply_variable = {
		var = CAL_optimates_moving_no
		value = CAL_optimates_moving_no_percentage
	}
	round_variable = CAL_optimates_moving_no
	set_variable = {
		var = CAL_optimates_no
		value = CAL_optimates_moving_no
	}
	custom_effect_tooltip = CAL_optimates_plea_tt
	CAL_count_yes_and_no = yes
}

CAL_populare_vote_bribery = {
	custom_effect_tooltip = CAL_populare_bribe_tt
	add_to_variable = {
		CAL_populares_moving_yes_percentage = 0.1
	}
	set_variable = {
		CAL_populares_moving_no_percentage = 1
	}

	subtract_from_variable = {
		CAL_populares_moving_no_percentage = CAL_populares_moving_yes_percentage
	}

	# Yes
	set_variable = {
		var = CAL_populares_moving_yes
		value = CAL_populares_count
	}
	multiply_variable = {
		var = CAL_populares_moving_yes
		value = CAL_populares_moving_yes_percentage
	}
	round_variable = CAL_populares_moving_yes
	set_variable = {
		var = CAL_populares_yes
		value = CAL_populares_moving_yes
	}
	# No
	set_variable = {
		var = CAL_populares_moving_no
		value = CAL_populares_count
	}
	multiply_variable = {
		var = CAL_populares_moving_no
		value = CAL_populares_moving_no_percentage
	}
	round_variable = CAL_populares_moving_no
	set_variable = {
		var = CAL_populares_no
		value = CAL_populares_moving_no
	}
	CAL_count_yes_and_no = yes
}

CAL_optimate_vote_bribery = {
	custom_effect_tooltip = CAL_optimates_bribe_tt
	add_to_variable = {
		CAL_optimates_moving_yes_percentage = 0.1
	}
	set_variable = {
		CAL_optimates_moving_no_percentage = 1
	}

	subtract_from_variable = {
		CAL_optimates_moving_no_percentage = CAL_optimates_moving_yes_percentage
	}
	# Yes
	set_variable = {
		var = CAL_optimates_moving_yes
		value = CAL_optimates_count
	}
	multiply_variable = {
		var = CAL_optimates_moving_yes
		value = CAL_optimates_moving_yes_percentage
	}
	round_variable = CAL_optimates_moving_yes
	set_variable = {
		var = CAL_optimates_yes
		value = CAL_optimates_moving_yes
	}
	# No
	set_variable = {
		var = CAL_optimates_moving_no
		value = CAL_optimates_count
	}
	multiply_variable = {
		var = CAL_optimates_moving_no
		value = CAL_optimates_moving_no_percentage
	}
	round_variable = CAL_optimates_moving_no
	set_variable = {
		var = CAL_optimates_no
		value = CAL_optimates_moving_no
	}
	CAL_count_yes_and_no = yes
}

CAL_senate_military_moves = {
	#pretorianie wykonują ruch
	if = {
		limit = {
			or = {
				has_country_flag = CAL_ager_publicus_vote
				has_country_flag = CAL_lex_tributorum_vote
				has_country_flag = CAL_lex_securitatis_vote
				has_country_flag = CAL_lex_coequatio_vote
				has_country_flag = CAL_lex_administrationis_vote
			}
			HAS_country_flag = CAL_populares_lex_voting
		}
		subtract_from_variable = {
			CAL_praetoriae_gravitas = 30
		}
		subtract_from_variable = {
			CAL_optimates_moving_yes_percentage = 0.15
		}
		subtract_from_variable = {
			CAL_populares_moving_yes_percentage = 0.15
		}
		set_variable = {
			CAL_populares_moving_no_percentage = 1
		}	
		subtract_from_variable = {
			CAL_populares_moving_no_percentage = CAL_populares_moving_yes_percentage
		}
		set_variable = {
			CAL_optimates_moving_no_percentage = 1
		}
		subtract_from_variable = {
			CAL_optimates_moving_no_percentage = CAL_optimates_moving_yes_percentage
		}
		### populares ###
		# yes
		set_variable = {
			var = CAL_populares_moving_yes
			value = CAL_populares_count
		}
		multiply_variable = {
			var = CAL_populares_moving_yes
			value = CAL_populares_moving_yes_percentage
		}
		round_variable = CAL_populares_moving_yes
		set_variable = {
			var = CAL_populares_yes
			value = CAL_populares_moving_yes
		}
		# No
		set_variable = {
			var = CAL_populares_moving_no
			value = CAL_populares_count
		}
		multiply_variable = {
			var = CAL_populares_moving_no
			value = CAL_populares_moving_no_percentage
		}
		round_variable = CAL_populares_moving_no
		set_variable = {
			var = CAL_populares_no
			value = CAL_populares_moving_no
		}
		### optimates ###
		# Yes
		set_variable = {
			var = CAL_optimates_moving_yes
			value = CAL_optimates_count
		}
		multiply_variable = {
			var = CAL_optimates_moving_yes
			value = CAL_optimates_moving_yes_percentage
		}
		round_variable = CAL_optimates_moving_yes
		set_variable = {
			var = CAL_optimates_yes
			value = CAL_optimates_moving_yes
		}
		# No
		set_variable = {
			var = CAL_optimates_moving_no
			value = CAL_optimates_count
		}
		multiply_variable = {
			var = CAL_optimates_moving_no
			value = CAL_optimates_moving_no_percentage
		}
		round_variable = CAL_optimates_moving_no
		set_variable = {
			var = CAL_optimates_no
			value = CAL_optimates_moving_no
		}
	}
	#legioniści wykonują ruch
	if = {
		limit = {
			or = {
				and = {
					has_country_flag = CAL_lex_militae_vote
					HAS_country_flag = CAL_optimates_lex_voting
				}
				and = {
					has_country_flag = CAL_lex_coequatio_vote
					HAS_country_flag = CAL_optimates_lex_voting
				}
				and = {
					has_country_flag = CAL_lex_subsidiarum_socialum_vote
					HAS_country_flag = CAL_populares_lex_voting
				}
			}
			
		}
		subtract_from_variable = {
			CAL_legiones_gravitas = 30
		}
		subtract_from_variable = {
			CAL_optimates_moving_yes_percentage = 0.15
		}
		subtract_from_variable = {
			CAL_populares_moving_yes_percentage = 0.15
		}
		set_variable = {
			CAL_populares_moving_no_percentage = 1
		}	
		subtract_from_variable = {
			CAL_populares_moving_no_percentage = CAL_populares_moving_yes_percentage
		}
		set_variable = {
			CAL_optimates_moving_no_percentage = 1
		}
		subtract_from_variable = {
			CAL_optimates_moving_no_percentage = CAL_optimates_moving_yes_percentage
		}
		### populares ###
		# yes
		set_variable = {
			var = CAL_populares_moving_yes
			value = CAL_populares_count
		}
		multiply_variable = {
			var = CAL_populares_moving_yes
			value = CAL_populares_moving_yes_percentage
		}
		round_variable = CAL_populares_moving_yes
		set_variable = {
			var = CAL_populares_yes
			value = CAL_populares_moving_yes
		}
		# No
		set_variable = {
			var = CAL_populares_moving_no
			value = CAL_populares_count
		}
		multiply_variable = {
			var = CAL_populares_moving_no
			value = CAL_populares_moving_no_percentage
		}
		round_variable = CAL_populares_moving_no
		set_variable = {
			var = CAL_populares_no
			value = CAL_populares_moving_no
		}
		### optimates ###
		# Yes
		set_variable = {
			var = CAL_optimates_moving_yes
			value = CAL_optimates_count
		}
		multiply_variable = {
			var = CAL_optimates_moving_yes
			value = CAL_optimates_moving_yes_percentage
		}
		round_variable = CAL_optimates_moving_yes
		set_variable = {
			var = CAL_optimates_yes
			value = CAL_optimates_moving_yes
		}
		# No
		set_variable = {
			var = CAL_optimates_moving_no
			value = CAL_optimates_count
		}
		multiply_variable = {
			var = CAL_optimates_moving_no
			value = CAL_optimates_moving_no_percentage
		}
		round_variable = CAL_optimates_moving_no
		set_variable = {
			var = CAL_optimates_no
			value = CAL_optimates_moving_no
		}
	}
	CAL_count_yes_and_no = yes
}

CAL_senate_fix_no = {
    subtract_from_variable = {
        var = CAL_optimates_no
        value = CAL_optimates_moving_yes
    }
    subtract_from_variable = {
        var = CAL_populares_no
        value = CAL_populares_moving_yes
    }
}

CAL_senate_fix_yes = {
    subtract_from_variable = {
        var = CAL_optimates_yes
        value = CAL_optimates_moving_no
    }
    subtract_from_variable = {
        var = CAL_populares_yes
        value = CAL_populares_moving_no
    }
}

CAL_senators_halved_voting = {
	set_variable = {
		var = CAL_total_senators
		value = CAL_populares_count
	}
	add_to_variable = {
		var = CAL_total_senators
		value = CAL_optimates_count
	}
	multiply_variable = {
		var = CAL_total_senators
		value = 0.5
	}
}

CAL_count_yes_and_no = {
	set_variable = {
		var = CAL_all_yes_show
		value = CAL_populares_yes
	}
	add_to_variable = {
		var = CAL_all_yes_show
		value = CAL_optimates_yes
	}
	set_variable = {
		var = CAL_total_yes
		value = CAL_populares_yes
	}
	add_to_variable = {
		var = CAL_total_yes
		value = CAL_optimates_yes
	}
	set_variable = {
		var = CAL_all_no_show
		value = CAL_populares_no
	}
	add_to_variable = {
		var = CAL_all_no_show
		value = CAL_optimates_no
	}
}

CAL_senate_voting_result = {
	custom_effect_tooltip = CAL_votes_show_tt
	clr_country_flag = emperor_intervened
	clr_country_flag = CAL_senate_military_made_a_move
	#CAL_senators_halved_voting = yes
	if = {
		limit = {
			is_debug = yes
		}
		log =  "ZA: [?CAL_total_yes]"
	}
	#############
	# POPULARZY #
	#############
	log = "[?CAL_total_yes]/needed [?CAL_half_of_senators]"
	if = {
		limit = {
			has_country_flag = CAL_populares_lex_voting
		}
		clr_country_flag = CAL_populares_lex_voting
		if = {
			limit = {
				CAL_yes_senators_count = yes
			}
			
			#AGER PUBLICUS
			if = {
				limit = {
					has_country_flag = CAL_ager_publicus_vote
				}
				#Nić xd
			}
			#LEX TRIBUTORUM
			if = {
				limit = {
					has_country_flag = CAL_lex_tributorum_vote
				}
				clr_country_flag = CAL_lex_tributorum_vote
				set_country_flag = CAL_lex_tributorum_populares_passed
				set_country_flag = CAL_populares_passed_lex
				country_event = calisia.138
				add_to_variable = { CAL_passed_laws_variable = 1 }
				mark_focus_tree_layout_dirty = yes
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX MILITAE
			if = {
				limit = {
					has_country_flag = CAL_lex_militae_vote
				}
				clr_country_flag = CAL_lex_militae_vote
				set_country_flag = CAL_lex_militae_populares_passed
				set_country_flag = CAL_populares_passed_lex
				country_event = calisia.138
				add_to_variable = { CAL_passed_laws_variable = 1 }
				mark_focus_tree_layout_dirty = yes
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX INDENTATAE SERVITUTIS
			if = {
				limit = {
					has_country_flag = CAL_lex_indentatae_servitutis_vote
				}
				clr_country_flag = CAL_lex_indentatae_servitutis_vote
				set_country_flag = CAL_lex_indentatae_servitutis_populares_passed
				set_country_flag = CAL_populares_passed_lex
				country_event = calisia.138
				add_to_variable = { CAL_passed_laws_variable = 1 }
				mark_focus_tree_layout_dirty = yes
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX SECURITATIS
			if = {
				limit = {
					has_country_flag = CAL_lex_securitatis_vote
				}
				clr_country_flag = CAL_lex_securitatis_vote
				swap_ideas = {
					remove_idea = basic_security
					add_idea = advanced_security
				}
				set_country_flag = CAL_populares_passed_lex
				country_event = calisia.138
				add_to_variable = { CAL_passed_laws_variable = 1 }
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX MERCATORIA
			if = {
				limit = {
					has_country_flag = CAL_lex_mercatoria_vote
				}
				clr_country_flag = CAL_lex_mercatoria_vote
				swap_ideas = {
					remove_idea = trade_regulated
					add_idea = trade_minimal
				}
				set_country_flag = CAL_populares_passed_lex
				country_event = calisia.138
				add_to_variable = { CAL_passed_laws_variable = 1 }
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX SUBSIDIARUM SOCIALUM
			if = {
				limit = {
					has_country_flag = CAL_lex_subsidiarum_socialum_vote
				}
				clr_country_flag = CAL_lex_subsidiarum_socialum_vote
				set_country_flag = CAL_lex_subsidiarum_socialum_populares_passed
				set_country_flag = CAL_populares_passed_lex
				country_event = calisia.138
				add_to_variable = { CAL_passed_laws_variable = 1 }
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX IUONONIS
			if = {
				limit = {
					has_country_flag = CAL_lex_iuononis_vote
				}
				clr_country_flag = CAL_lex_iuononis_vote
				set_country_flag = CAL_lex_iuononis_populares_passed
				set_country_flag = CAL_populares_passed_lex
				country_event = calisia.138
				add_to_variable = { CAL_passed_laws_variable = 1 }
				mark_focus_tree_layout_dirty = yes
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX CIVITATIS
			if = {
				limit = {
					has_country_flag = CAL_lex_civitatis_vote
				}
				clr_country_flag = CAL_lex_civitatis_vote
				set_country_flag = CAL_lex_civitatis_populares_passed
				set_country_flag = CAL_populares_passed_lex
				country_event = calisia.138
				add_to_variable = { CAL_passed_laws_variable = 1 }
				mark_focus_tree_layout_dirty = yes
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX ACCULTURATIONIS
			if = {
				limit = {
					has_country_flag = CAL_lex_acculturationis_vote
				}
				clr_country_flag = CAL_lex_acculturationis_vote
				set_country_flag = CAL_lex_acculturationis_populares_passed
				set_country_flag = CAL_populares_passed_lex
				country_event = calisia.138
				add_to_variable = { CAL_passed_laws_variable = 1 }
				mark_focus_tree_layout_dirty = yes
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX AMORIS LIBERI
			if = {
				limit = {
					has_country_flag = CAL_lex_amoris_liberi_vote
				}
				clr_country_flag = CAL_lex_amoris_liberi_vote
				set_country_flag = CAL_lex_amoris_liberi_populares_passed
				swap_ideas = {
					remove_idea = lgbt_limited_laws
					add_idea = lgbt_equal_laws
				}
				set_country_flag = CAL_populares_passed_lex
				country_event = calisia.138
				add_to_variable = { CAL_passed_laws_variable = 1 }
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX AESCULAPII
			if = {
				limit = {
					has_country_flag = CAL_lex_aesculapii_vote
				}
				clr_country_flag = CAL_lex_aesculapii_vote
				set_country_flag = CAL_lex_aesculapii_populares_passed
				swap_ideas = {
					remove_idea = witch_doctors
					add_idea = public_healthcare
				}
				set_country_flag = CAL_populares_passed_lex
				country_event = calisia.138
				add_to_variable = { CAL_passed_laws_variable = 1 }
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX RELIGIONIS
			if = {
				limit = {
					has_country_flag = CAL_lex_religionis_vote
				}
				clr_country_flag = CAL_lex_religionis_vote
				set_country_flag = CAL_lex_religionis_populares_passed
				set_country_flag = CAL_populares_passed_lex
				country_event = calisia.138
				add_to_variable = { CAL_passed_laws_variable = 1 }
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX POENAE CAPITALIS
			if = {
				limit = {
					has_country_flag = CAL_lex_poenae_capitalis_vote
				}
				
				clr_country_flag = CAL_lex_poenae_capitalis_vote
				set_country_flag = CAL_lex_poenae_capitalis_populares_passed
				set_country_flag = CAL_populares_passed_lex
				country_event = calisia.138
				add_to_variable = { CAL_passed_laws_variable = 1 }
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX COEQUATIO
			if = {
				limit = {
					has_country_flag = CAL_lex_coequatio_vote
				}
				
				clr_country_flag = CAL_lex_coequatio_vote
				set_country_flag = CAL_lex_coequatio_populares_passed
				set_country_flag = CAL_populares_passed_lex
				country_event = calisia.138
				#add_to_variable = { CAL_passed_laws_variable = 1 }
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX ADMINISTRATIONIS
			if = {
				limit = {
					has_country_flag = CAL_lex_administrationis_vote
				}
				
				clr_country_flag = CAL_lex_administrationis_vote
				set_country_flag = CAL_lex_administrationis_populares_passed
				set_country_flag = CAL_populares_passed_lex
				country_event = calisia.138
				#add_to_variable = { CAL_passed_laws_variable = 1 }
				add_timed_idea = { idea = CAL_reform_of_administrative_division_idea days = 90 }
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX BARBARORUM
			if = {
				limit = {
					has_country_flag = CAL_lex_barbarorum_vote
				}
				
				clr_country_flag = CAL_lex_barbarorum_vote
				set_country_flag = CAL_lex_barbarorum_populares_passed
				set_country_flag = CAL_populares_passed_lex
				country_event = calisia.138
				#add_to_variable = { CAL_passed_laws_variable = 1 }
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
		}
		else = {
			#AGER PUBLICUS
			if = {
				limit = {
					has_country_flag = CAL_ager_publicus_vote
				}
				custom_effect_tooltip = CAL_ager_publicus_populares_fails_tt
				hidden_effect = {
					clr_country_flag = CAL_ager_publicus_vote
					country_event = {
						id = calisia.14
						days = 7
					}
				}
			}
			#LEX TRIBUTORUM
			if = {
				limit = {
					has_country_flag = CAL_lex_tributorum_vote
				}
				
				clr_country_flag = CAL_lex_tributorum_vote
				set_country_flag = CAL_lex_tributorum_optimates_passed
				set_country_flag = CAL_lex_populares_failed
				country_event = calisia.153
				mark_focus_tree_layout_dirty = yes
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX MILITAE
			if = {
				limit = {
					has_country_flag = CAL_lex_militae_vote
				}
				
				clr_country_flag = CAL_lex_militae_vote
				set_country_flag = CAL_lex_militae_optimates_passed
				set_country_flag = CAL_lex_populares_failed
				country_event = calisia.153
				mark_focus_tree_layout_dirty = yes
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX INDENTATAE SERVITUTIS
			if = {
				limit = {
					has_country_flag = CAL_lex_indentatae_servitutis_vote
				}
				
				clr_country_flag = CAL_lex_indentatae_servitutis_vote
				set_country_flag = CAL_lex_indentatae_servitutis_optimates_passed
				set_country_flag = CAL_lex_populares_failed
				country_event = calisia.153
				mark_focus_tree_layout_dirty = yes
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX SECURITATIS
			if = {
				limit = {
					has_country_flag = CAL_lex_securitatis_vote
				}
				
				clr_country_flag = CAL_lex_securitatis_vote
				swap_ideas = {
					remove_idea = basic_security
					add_idea = direct_security
				}
				set_country_flag = CAL_lex_populares_failed
				country_event = calisia.153
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX MERCATORIA
			if = {
				limit = {
					has_country_flag = CAL_lex_mercatoria_vote
				}
				
				clr_country_flag = CAL_lex_mercatoria_vote
				swap_ideas = {
					remove_idea = trade_regulated
					add_idea = trade_promoted
				}
				set_country_flag = CAL_lex_populares_failed
				country_event = calisia.153
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX SUBSIDIARUM SOCIALUM
			if = {
				limit = {
					has_country_flag = CAL_lex_subsidiarum_socialum_vote
				}
				
				clr_country_flag = CAL_lex_subsidiarum_socialum_vote
				set_country_flag = CAL_lex_subsidiarum_socialum_optimates_passed
				set_country_flag = CAL_lex_populares_failed
				country_event = calisia.153
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX IUONONIS
			if = {
				limit = {
					has_country_flag = CAL_lex_iuononis_vote
				}
				
				clr_country_flag = CAL_lex_iuononis_vote
				set_country_flag = CAL_lex_iuononis_optimates_passed
				set_country_flag = CAL_lex_populares_failed
				country_event = calisia.153
				mark_focus_tree_layout_dirty = yes
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX CIVITATIS
			if = {
				limit = {
					has_country_flag = CAL_lex_civitatis_vote
				}
				
				clr_country_flag = CAL_lex_civitatis_vote
				set_country_flag = CAL_lex_civitatis_optimates_passed
				set_country_flag = CAL_lex_populares_failed
				country_event = calisia.153
				mark_focus_tree_layout_dirty = yes
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX ACCULTURATIONIS
			if = {
				limit = {
					has_country_flag = CAL_lex_acculturationis_vote
				}
				
				clr_country_flag = CAL_lex_acculturationis_vote
				set_country_flag = CAL_lex_acculturationis_optimates_passed
				set_country_flag = CAL_lex_populares_failed
				country_event = calisia.153
				mark_focus_tree_layout_dirty = yes
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX AMORIS LIBERI
			if = {
				limit = {
					has_country_flag = CAL_lex_amoris_liberi_vote
				}
				
				clr_country_flag = CAL_lex_amoris_liberi_vote
				set_country_flag = CAL_lex_amoris_liberi_optimates_passed
				swap_ideas = {
					remove_idea = lgbt_limited_laws
					add_idea = lgbt_illegal_punished
				}
				set_country_flag = CAL_lex_populares_failed
				country_event = calisia.153
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX AESCULAPII
			if = {
				limit = {
					has_country_flag = CAL_lex_aesculapii_vote
				}
				
				clr_country_flag = CAL_lex_aesculapii_vote
				set_country_flag = CAL_lex_aesculapii_optimates_passed
				swap_ideas = {
					remove_idea = witch_doctors
					add_idea = private_healthcare
				}
				set_country_flag = CAL_lex_populares_failed
				country_event = calisia.153
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX RELIGIONIS
			if = {
				limit = {
					has_country_flag = CAL_lex_religionis_vote
				}
				
				clr_country_flag = CAL_lex_religionis_vote
				set_country_flag = CAL_lex_religionis_optimates_passed
				set_country_flag = CAL_lex_populares_failed
				country_event = calisia.153
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX POENAE CAPITALIS
			if = {
				limit = {
					has_country_flag = CAL_lex_poenae_capitalis_vote
				}
				
				clr_country_flag = CAL_lex_poenae_capitalis_vote
				set_country_flag = CAL_lex_poenae_capitalis_optimates_passed
				set_country_flag = CAL_lex_populares_failed
				country_event = calisia.153
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX COEQUATIO
			if = {
				limit = {
					has_country_flag = CAL_lex_coequatio_vote
				}
				
				clr_country_flag = CAL_lex_coequatio_vote
				set_country_flag = CAL_lex_coequatio_optimates_passed
				set_country_flag = CAL_lex_populares_failed
				country_event = calisia.153
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX ADMINISTRATIONIS
			if = {
				limit = {
					has_country_flag = CAL_lex_administrationis_vote
				}
				
				clr_country_flag = CAL_lex_administrationis_vote
				set_country_flag = CAL_lex_administrationis_optimates_passed
				set_country_flag = CAL_lex_populares_failed
				add_timed_idea = { idea = CAL_reform_of_administrative_division_idea days = 90 }
				country_event = calisia.153
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX BARBARORUM
			if = {
				limit = {
					has_country_flag = CAL_lex_barbarorum_vote
				}
				
				clr_country_flag = CAL_lex_barbarorum_vote
				set_country_flag = CAL_lex_barbarorum_optimates_passed
				set_country_flag = CAL_lex_populares_failed
				country_event = calisia.153
				add_to_variable = { CAL_passed_laws_variable = 1 }
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
		}
	}

	############
	# OPTYMACI #
	############

	else_if = {
		limit = {
			has_country_flag = CAL_optimates_lex_voting
		}
		clr_country_flag = CAL_optimates_lex_voting
		if = {
			limit = {
				CAL_yes_senators_count = yes
			}
			#AGER PUBLICUS
			if = {
				limit = {
					has_country_flag = CAL_ager_publicus_vote
				}
				#Nić xd
			}
			#LEX TRIBUTORUM
			if = {
				limit = {
					has_country_flag = CAL_lex_tributorum_vote
				}
				
				clr_country_flag = CAL_lex_tributorum_vote
				set_country_flag = CAL_lex_tributorum_optimates_passed
				set_country_flag = CAL_optimates_passed_lex
				country_event = calisia.138
				add_to_variable = { CAL_passed_laws_variable = 1 }
				mark_focus_tree_layout_dirty = yes
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX MILITAE
			if = {
				limit = {
					has_country_flag = CAL_lex_militae_vote
				}
				
				clr_country_flag = CAL_lex_militae_vote
				set_country_flag = CAL_lex_militae_optimates_passed
				set_country_flag = CAL_optimates_passed_lex
				country_event = calisia.138
				add_to_variable = { CAL_passed_laws_variable = 1 }
				mark_focus_tree_layout_dirty = yes
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX INDENTATAE SERVITUTIS
			if = {
				limit = {
					has_country_flag = CAL_lex_indentatae_servitutis_vote
				}
				
				clr_country_flag = CAL_lex_indentatae_servitutis_vote
				set_country_flag = CAL_lex_indentatae_servitutis_optimates_passed
				set_country_flag = CAL_optimates_passed_lex
				country_event = calisia.138
				add_to_variable = { CAL_passed_laws_variable = 1 }
				mark_focus_tree_layout_dirty = yes
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX SECURITATIS
			if = {
				limit = {
					has_country_flag = CAL_lex_securitatis_vote
				}
				
				clr_country_flag = CAL_lex_securitatis_vote
				swap_ideas = {
					remove_idea = basic_security
					add_idea = direct_security
				}
				set_country_flag = CAL_optimates_passed_lex
				country_event = calisia.138
				add_to_variable = { CAL_passed_laws_variable = 1 }
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX MERCATORIA
			if = {
				limit = {
					has_country_flag = CAL_lex_mercatoria_vote
				}
				
				clr_country_flag = CAL_lex_mercatoria_vote
				swap_ideas = {
					remove_idea = trade_regulated
					add_idea = trade_promoted
				}
				set_country_flag = CAL_optimates_passed_lex
				country_event = calisia.138
				add_to_variable = { CAL_passed_laws_variable = 1 }
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX SUBSIDIARUM SOCIALUM
			if = {
				limit = {
					has_country_flag = CAL_lex_subsidiarum_socialum_vote
				}
				
				clr_country_flag = CAL_lex_subsidiarum_socialum_vote
				set_country_flag = CAL_lex_subsidiarum_socialum_optimates_passed
				set_country_flag = CAL_optimates_passed_lex
				country_event = calisia.138
				add_to_variable = { CAL_passed_laws_variable = 1 }
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX IUONONIS
			if = {
				limit = {
					has_country_flag = CAL_lex_iuononis_vote
				}
				
				clr_country_flag = CAL_lex_iuononis_vote
				set_country_flag = CAL_lex_iuononis_optimates_passed
				set_country_flag = CAL_optimates_passed_lex
				country_event = calisia.138
				add_to_variable = { CAL_passed_laws_variable = 1 }
				mark_focus_tree_layout_dirty = yes
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX CIVITATIS
			if = {
				limit = {
					has_country_flag = CAL_lex_civitatis_vote
				}
				
				clr_country_flag = CAL_lex_civitatis_vote
				set_country_flag = CAL_lex_civitatis_optimates_passed
				set_country_flag = CAL_optimates_passed_lex
				country_event = calisia.138
				add_to_variable = { CAL_passed_laws_variable = 1 }
				mark_focus_tree_layout_dirty = yes
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX ACCULTURATIONIS
			if = {
				limit = {
					has_country_flag = CAL_lex_acculturationis_vote
				}
				
				clr_country_flag = CAL_lex_acculturationis_vote
				set_country_flag = CAL_lex_acculturationis_optimates_passed
				set_country_flag = CAL_optimates_passed_lex
				country_event = calisia.138
				add_to_variable = { CAL_passed_laws_variable = 1 }
				mark_focus_tree_layout_dirty = yes
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX AMORIS LIBERI
			if = {
				limit = {
					has_country_flag = CAL_lex_amoris_liberi_vote
				}
				
				clr_country_flag = CAL_lex_amoris_liberi_vote
				set_country_flag = CAL_lex_amoris_liberi_optimates_passed
				swap_ideas = {
					remove_idea = lgbt_limited_laws
					add_idea = lgbt_illegal_punished
				}
				set_country_flag = CAL_optimates_passed_lex
				country_event = calisia.138
				add_to_variable = { CAL_passed_laws_variable = 1 }
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX AESCULAPII
			if = {
				limit = {
					has_country_flag = CAL_lex_aesculapii_vote
				}
				
				clr_country_flag = CAL_lex_aesculapii_vote
				set_country_flag = CAL_lex_aesculapii_optimates_passed
				swap_ideas = {
					remove_idea = witch_doctors
					add_idea = private_healthcare
				}
				set_country_flag = CAL_optimates_passed_lex
				country_event = calisia.138
				add_to_variable = { CAL_passed_laws_variable = 1 }
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX RELIGIONIS
			if = {
				limit = {
					has_country_flag = CAL_lex_religionis_vote
				}
				
				clr_country_flag = CAL_lex_religionis_vote
				set_country_flag = CAL_lex_religionis_optimates_passed
				set_country_flag = CAL_optimates_passed_lex
				country_event = calisia.138
				add_to_variable = { CAL_passed_laws_variable = 1 }
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX POENAE CAPITALIS
			if = {
				limit = {
					has_country_flag = CAL_lex_poenae_capitalis_vote
				}
				
				clr_country_flag = CAL_lex_poenae_capitalis_vote
				set_country_flag = CAL_lex_poenae_capitalis_optimates_passed
				set_country_flag = CAL_optimates_passed_lex
				country_event = calisia.138
				add_to_variable = { CAL_passed_laws_variable = 1 }
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX COEQUATIO
			if = {
				limit = {
					has_country_flag = CAL_lex_coequatio_vote
				}
				
				clr_country_flag = CAL_lex_coequatio_vote
				set_country_flag = CAL_lex_coequatio_optimates_passed
				set_country_flag = CAL_optimates_passed_lex
				country_event = calisia.138
				#add_to_variable = { CAL_passed_laws_variable = 1 }
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX ADMINISTRATIONIS
			if = {
				limit = {
					has_country_flag = CAL_lex_administrationis_vote
				}
				
				clr_country_flag = CAL_lex_administrationis_vote
				set_country_flag = CAL_lex_administrationis_optimates_passed
				set_country_flag = CAL_optimates_passed_lex
				add_timed_idea = { idea = CAL_reform_of_administrative_division_idea days = 90 }
				country_event = calisia.138
				#add_to_variable = { CAL_passed_laws_variable = 1 }
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX BARBARORUM
			if = {
				limit = {
					has_country_flag = CAL_lex_barbarorum_vote
				}
				
				clr_country_flag = CAL_lex_barbarorum_vote
				set_country_flag = CAL_lex_barbarorum_optimates_passed
				set_country_flag = CAL_optimates_passed_lex
				country_event = calisia.138
				#add_to_variable = { CAL_passed_laws_variable = 1 }
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
		}
		else = {
			#AGER PUBLICUS
			if = {
				limit = {
					has_country_flag = CAL_ager_publicus_vote
				}
				custom_effect_tooltip = CAL_ager_publicus_optimates_fails_tt
				hidden_effect = {	
					clr_country_flag = CAL_ager_publicus_vote
					country_event = {
						id = calisia.14
						days = 7
					}
				}
			}
			#LEX TRIBUTORUM
			if = {
				limit = {
					has_country_flag = CAL_lex_tributorum_vote
				}
				
				clr_country_flag = CAL_lex_tributorum_vote
				set_country_flag = CAL_lex_tributorum_populares_passed
				set_country_flag = CAL_lex_optimates_failed
				country_event = calisia.153
				mark_focus_tree_layout_dirty = yes
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX MILITAE
			if = {
				limit = {
					has_country_flag = CAL_lex_militae_vote
				}
				
				clr_country_flag = CAL_lex_militae_vote
				set_country_flag = CAL_lex_militae_populares_passed
				set_country_flag = CAL_lex_optimates_failed
				country_event = calisia.153
				mark_focus_tree_layout_dirty = yes
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX INDENTATAE SERVITUTIS
			if = {
				limit = {
					has_country_flag = CAL_lex_indentatae_servitutis_vote
				}
				
				clr_country_flag = CAL_lex_indentatae_servitutis_vote
				set_country_flag = CAL_lex_indentatae_servitutis_populares_passed
				set_country_flag = CAL_lex_optimates_failed
				country_event = calisia.153
				mark_focus_tree_layout_dirty = yes
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX SECURITATIS
			if = {
				limit = {
					has_country_flag = CAL_lex_securitatis_vote
				}
				
				clr_country_flag = CAL_lex_securitatis_vote
				swap_ideas = {
					remove_idea = basic_security
					add_idea = advanced_security
				}
				set_country_flag = CAL_lex_optimates_failed
				country_event = calisia.153
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX MERCATORIA
			if = {
				limit = {
					has_country_flag = CAL_lex_mercatoria_vote
				}
				
				clr_country_flag = CAL_lex_mercatoria_vote
				swap_ideas = {
					remove_idea = trade_regulated
					add_idea = trade_minimal
				}
				set_country_flag = CAL_lex_optimates_failed
				country_event = calisia.153
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX SUBSIDIARUM SOCIALUM
			if = {
				limit = {
					has_country_flag = CAL_lex_subsidiarum_socialum_vote
				}
				
				clr_country_flag = CAL_lex_subsidiarum_socialum_vote
				set_country_flag = CAL_lex_subsidiarum_socialum_populares_passed
				set_country_flag = CAL_lex_optimates_failed
				country_event = calisia.153
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX IUONONIS
			if = {
				limit = {
					has_country_flag = CAL_lex_iuononis_vote
				}
				
				clr_country_flag = CAL_lex_iuononis_vote
				set_country_flag = CAL_lex_iuononis_populares_passed
				set_country_flag = CAL_lex_optimates_failed
				country_event = calisia.153
				mark_focus_tree_layout_dirty = yes
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX CIVITATIS
			if = {
				limit = {
					has_country_flag = CAL_lex_civitatis_vote
				}
				
				clr_country_flag = CAL_lex_civitatis_vote
				set_country_flag = CAL_lex_civitatis_populares_passed
				set_country_flag = CAL_lex_optimates_failed
				country_event = calisia.153
				mark_focus_tree_layout_dirty = yes
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX ACCULTURATIONIS
			if = {
				limit = {
					has_country_flag = CAL_lex_acculturationis_vote
				}
				
				clr_country_flag = CAL_lex_acculturationis_vote
				set_country_flag = CAL_lex_acculturationis_populares_passed
				set_country_flag = CAL_lex_optimates_failed
				country_event = calisia.153
				mark_focus_tree_layout_dirty = yes
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX AMORIS LIBERI
			if = {
				limit = {
					has_country_flag = CAL_lex_amoris_liberi_vote
				}
				
				clr_country_flag = CAL_lex_amoris_liberi_vote
				set_country_flag = CAL_lex_amoris_liberi_populares_passed
				#swap_ideas = {
				#	remove_idea = lgbt_
				#	add_idea = lgbt_
				#}
				set_country_flag = CAL_lex_optimates_failed
				country_event = calisia.153
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX AESCULAPII
			if = {
				limit = {
					has_country_flag = CAL_lex_aesculapii_vote
				}
				
				clr_country_flag = CAL_lex_aesculapii_vote
				set_country_flag = CAL_lex_aesculapii_populares_passed
				#swap_ideas = {
				#	remove_idea = lgbt_
				#	add_idea = lgbt_
				#}
				set_country_flag = CAL_lex_optimates_failed
				country_event = calisia.153
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX RELIGIONIS
			if = {
				limit = {
					has_country_flag = CAL_lex_religionis_vote
				}
				
				clr_country_flag = CAL_lex_religionis_vote
				set_country_flag = CAL_lex_religionis_populares_passed
				set_country_flag = CAL_lex_optimates_failed
				country_event = calisia.153
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX POENAE CAPITALIS
			if = {
				limit = {
					has_country_flag = CAL_lex_poenae_capitalis_vote
				}
				
				clr_country_flag = CAL_lex_poenae_capitalis_vote
				set_country_flag = CAL_lex_poenae_capitalis_populares_passed
				set_country_flag = CAL_lex_optimates_failed
				country_event = calisia.153
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX COEQUATIO
			if = {
				limit = {
					has_country_flag = CAL_lex_coequatio_vote
				}
				
				clr_country_flag = CAL_lex_coequatio_vote
				set_country_flag = CAL_lex_coequatio_populares_passed
				set_country_flag = CAL_lex_optimates_failed
				country_event = calisia.153
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX ADMINISTRATIONIS
			if = {
				limit = {
					has_country_flag = CAL_lex_administrationis_vote
				}
				
				clr_country_flag = CAL_lex_administrationis_vote
				set_country_flag = CAL_lex_administrationis_populares_passed
				set_country_flag = CAL_lex_optimates_failed
				country_event = calisia.153
				add_timed_idea = { idea = CAL_reform_of_administrative_division_idea days = 90 }
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
			#LEX BARBARORUM
			if = {
				limit = {
					has_country_flag = CAL_lex_barbarorum_vote
				}
				
				clr_country_flag = CAL_lex_barbarorum_vote
				set_country_flag = CAL_lex_barbarorum_populares_passed
				set_country_flag = CAL_lex_optimates_failed
				country_event = calisia.153
				add_to_variable = { CAL_passed_laws_variable = 1 }
				hidden_effect = {
					country_event = {
						id = calisia.75
						days = 30
					}
				}
			}
		}
	}
}

CAL_project_funding = {
	hidden_effect = {
		if = {
			limit = {
				check_variable = { CAL_spending_level < 17 }
			}
			add_to_variable = { CAL_spending_level = 1 }
		}
		else_if = {
			limit = {
				check_variable = { CAL_spending_level = 17 }
			}
			country_event = {
				id = calisia.37 #Coffers Are Empty
				days = 10
			}
		}
	}
}

CAL_lex_reward = {
	if = {
		limit = {
			check_variable = { CAL_passed_laws_variable = 13 }
		}
		custom_effect_tooltip = CAL_lex_reward_tt
		add_political_power = 130
	}
	else_if = {
		limit = {
			check_variable = { CAL_passed_laws_variable = 12 }
		}
		custom_effect_tooltip = CAL_lex_reward_tt
		add_political_power = 120
	}
	else_if = {
		limit = {
			check_variable = { CAL_passed_laws_variable = 11 }
		}
		custom_effect_tooltip = CAL_lex_reward_tt
		add_political_power = 110
	}
	else_if = {
		limit = {
			check_variable = { CAL_passed_laws_variable = 10 }
		}
		custom_effect_tooltip = CAL_lex_reward_tt
		add_political_power = 100
	}
	else_if = {
		limit = {
			check_variable = { CAL_passed_laws_variable = 9 }
		}
		custom_effect_tooltip = CAL_lex_reward_tt
		add_political_power = 90
	}
	else_if = {
		limit = {
			check_variable = { CAL_passed_laws_variable = 8 }
		}
		custom_effect_tooltip = CAL_lex_reward_tt
		add_political_power = 80
	}
	else_if = {
		limit = {
			check_variable = { CAL_passed_laws_variable = 7 }
		}
		custom_effect_tooltip = CAL_lex_reward_tt
		add_political_power = 70
	}
	else_if = {
		limit = {
			check_variable = { CAL_passed_laws_variable = 6 }
		}
		custom_effect_tooltip = CAL_lex_reward_tt
		add_political_power = 60
	}
	else_if = {
		limit = {
			check_variable = { CAL_passed_laws_variable = 5 }
		}
		custom_effect_tooltip = CAL_lex_reward_tt
		add_political_power = 50
	}
	else_if = {
		limit = {
			check_variable = { CAL_passed_laws_variable = 4 }
		}
		custom_effect_tooltip = CAL_lex_reward_tt
		add_political_power = 40
	}
	else_if = {
		limit = {
			check_variable = { CAL_passed_laws_variable = 3 }
		}
		custom_effect_tooltip = CAL_lex_reward_tt
		add_political_power = 30
	}
	else_if = {
		limit = {
			check_variable = { CAL_passed_laws_variable = 2 }
		}
		custom_effect_tooltip = CAL_lex_reward_tt
		add_political_power = 20
	}
	else_if = {
		limit = {
			check_variable = { CAL_passed_laws_variable = 1 }
		}
		custom_effect_tooltip = CAL_lex_reward_tt
		add_political_power = 10
	}
	else = {
		custom_effect_tooltip = CAL_lex_reward_explaining_tt
	}
}


CAL_spawn_jutes = {
	JUT = {
		add_ideas = barbarians_idea
		load_focus_tree = blank_tree
		add_offsite_building = {
			type = arms_factory
			level = 5
		}
		set_technology = {
			melee_weapons = 1
			ranged_weapons = 1
		}
		
	}
	618 = {
		transfer_state_to = JUT
		add_core_of = JUT
	}

	JUT = {
		delete_unit_template_and_units = {
			division_template = "Infanteriebataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Panzergrenadierbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Panzerpionierbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Versorgungsbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Panzerbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Jägerbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Artilleriebataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Aufklärungsbataillon"
		}
		load_oob = "barbarians"
	}

	set_global_flag = CAL_jutes_spawned
	
}

CAL_spawn_ostrogoths = {
	OST = {
		add_ideas = barbarians_idea
		load_focus_tree = blank_tree
		add_offsite_building = {
			type = arms_factory
			level = 5
		}
		set_technology = {
			melee_weapons = 1
			ranged_weapons = 1
		}	
	}
	923 = {
		transfer_state_to = OST
		add_core_of = OST
	}
	OST = {
		delete_unit_template_and_units = {
			division_template = "Infanteriebataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Panzergrenadierbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Panzerpionierbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Versorgungsbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Panzerbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Jägerbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Artilleriebataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Aufklärungsbataillon"
		}
		load_oob = "barbarians"
	}
	set_global_flag = CAL_ostrogoths_spawned
	
}

CAL_spawn_franks = {
	FRK = {
		add_ideas = barbarians_idea
		load_focus_tree = blank_tree
		add_offsite_building = {
			type = arms_factory
			level = 5
		}
		set_technology = {
			melee_weapons = 1
			ranged_weapons = 1
		}	
	}
	922 = {
		transfer_state_to = FRK
		add_core_of = FRK
	}
	FRK = {
		delete_unit_template_and_units = {
			division_template = "Infanteriebataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Panzergrenadierbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Panzerpionierbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Versorgungsbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Panzerbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Jägerbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Artilleriebataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Aufklärungsbataillon"
		}
		load_oob = "barbarians"
	}
	set_global_flag = CAL_franks_spawned
	
}

CAL_spawn_visigoths = {
	WIZ = {
		add_ideas = barbarians_idea
		load_focus_tree = blank_tree
		create_faction = "Gotish Federation"
		add_to_faction = OST
		add_offsite_building = {
			type = arms_factory
			level = 5
		}
		set_technology = {
			melee_weapons = 1
			ranged_weapons = 1
		}	
	}
	919 = {
		transfer_state_to = WIZ
		add_core_of = WIZ
	}
	WIZ = {
		delete_unit_template_and_units = {
			division_template = "Infanteriebataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Panzergrenadierbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Panzerpionierbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Versorgungsbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Panzerbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Jägerbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Artilleriebataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Aufklärungsbataillon"
		}
		load_oob = "barbarians"
	}
	set_global_flag = CAL_visigoths_spawned
}

CAL_spawn_saxons = {
	SAX = {
		add_ideas = barbarians_idea
		load_focus_tree = blank_tree
		create_faction = "Franko-Saxons"
		add_to_faction = FRK
		add_offsite_building = {
			type = arms_factory
			level = 5
		}
		set_technology = {
			melee_weapons = 1
			ranged_weapons = 1
		}	
	}
	415 = {
		transfer_state_to = SAX
		add_core_of = SAX
	}
	SAX = {
		delete_unit_template_and_units = {
			division_template = "Infanteriebataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Panzergrenadierbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Panzerpionierbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Versorgungsbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Panzerbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Jägerbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Artilleriebataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Aufklärungsbataillon"
		}
		load_oob = "barbarians"
	}
	set_global_flag = CAL_saxons_spawned
}

CAL_spawn_vandals = {
	VAN = {
		add_ideas = barbarians_idea
		load_focus_tree = blank_tree
		add_offsite_building = {
			type = arms_factory
			level = 5
		}
		set_technology = {
			melee_weapons = 1
			ranged_weapons = 1
		}	
	}
	920 = {
		transfer_state_to = VAN
		add_core_of = VAN
	}
	VAN = {
		delete_unit_template_and_units = {
			division_template = "Infanteriebataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Panzergrenadierbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Panzerpionierbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Versorgungsbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Panzerbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Jägerbataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Artilleriebataillon"
		}
		delete_unit_template_and_units = {
			division_template = "Aufklärungsbataillon"
		}
		load_oob = "barbarians"
	}
	set_global_flag = CAL_vandals_spawned
}

CAL_spawn_estes = {
	AES = {
		load_focus_tree = blank_tree
		add_ideas = barbarians_idea
		add_offsite_building = {
			type = arms_factory
			level = 5
		}
		set_technology = {
			melee_weapons = 1
			ranged_weapons = 1
		}	
	}
	25 = {
		transfer_state_to = AES
		add_core_of = AES
	}
	AES = {
		load_oob = "barbarians"
	}
	set_global_flag = CAL_estes_spawned
}

CAL_spawn_huns= {
	HNN = {
		add_ideas = barbarians_idea
		load_focus_tree = blank_tree
		add_offsite_building = {
			type = arms_factory
			level = 5
		}
		set_technology = {
			melee_weapons = 1
			ranged_weapons = 1
		}	
	}
	830 = {
		transfer_state_to = HNN
		add_core_of = HNN
	}
	HNN = {
		load_oob = "barbarians"
	}
	set_global_flag = CAL_huns_spawned
}

CAL_spawn_scythians= {
	SCY = {
		add_ideas = barbarians_idea
		load_focus_tree = blank_tree
		add_offsite_building = {
			type = arms_factory
			level = 5
		}
		set_technology = {
			melee_weapons = 1
			ranged_weapons = 1
		}	
	}
	520 = {
		transfer_state_to = SCY
		add_core_of = SCY
	}
	SCY = {
		load_oob = "barbarians"
	}
	set_global_flag = CAL_scythians_spawned
}

CAL_spawn_slave_revolt = {

	481 = {
		transfer_state_to = SPA
		add_core_of = SPA
	}
	798 = {
		transfer_state_to = SPA
		add_core_of = SPA
	}
	453 = {
		transfer_state_to = SPA
		add_core_of = SPA
	}
	589 = {
		transfer_state_to = SPA
		add_core_of = SPA
	}
	460 = {
		transfer_state_to = SPA
		add_core_of = SPA
	}
	735 = {
		transfer_state_to = SPA
		add_core_of = SPA
	}
	736 = {
		transfer_state_to = SPA
		add_core_of = SPA
	}
	777 = {
		transfer_state_to = SPA
		add_core_of = SPA
	}
	737 = {
		transfer_state_to = SPA
		add_core_of = SPA
	}
	480 = {
		transfer_state_to = SPA
		add_core_of = SPA
	}
	776 = {
		transfer_state_to = SPA
		add_core_of = SPA
	}
	775 = {
		transfer_state_to = SPA
		add_core_of = SPA
	}
	SPA = {
		inherit_technology = CAL
	}
	set_global_flag = CAL_spartakus_risen
}

CAL_jutes_win_barbarian_crisis = {
	54 = {
		transfer_state_to = JUT
	}
	22 = {
		transfer_state_to = JUT
	}	
	618 = {
		transfer_state_to = JUT
	}
	31 = {
		transfer_state_to = JUT
	}	
	83 = {
		transfer_state_to = JUT
	}
	619 = {
		transfer_state_to = JUT
	}
	70 = {
		transfer_state_to = JUT
	}
	68 = {
		transfer_state_to = JUT
	}
	620 = {
		transfer_state_to = JUT
	}
	621 = {
		transfer_state_to = JUT
	}
	55 = {
		transfer_state_to = JUT
	}
	61 = {
		transfer_state_to = JUT
	}
	874 = {
		transfer_state_to = JUT
	}
	88 = {
		transfer_state_to = JUT
	}
	617 = {
		transfer_state_to = JUT
	}
	114 = {
		transfer_state_to = JUT
	}
	616 = {
		transfer_state_to = JUT
	}
	105 = {
		transfer_state_to = JUT
	}
	90 = {
		transfer_state_to = JUT
	}
	43 = {
		transfer_state_to = JUT
	}
	JUT = {
		set_capital = { state = 70 }
		set_cosmetic_tag = JUT_CAL
	}
}

CAL_franks_win_barbarian_crisis = {
	122 = {
		transfer_state_to = FRK
	}
	923 = {
		transfer_state_to = FRK
	}
	922 = {
		transfer_state_to = FRK
	}	
	133 = {
		transfer_state_to = FRK
	}
	615 = {
		transfer_state_to = FRK
	}
	158 = {
		transfer_state_to = FRK
	}
	614 = {
		transfer_state_to = FRK
	}
	175 = {
		transfer_state_to = FRK
	}
	613 = {
		transfer_state_to = FRK
	}
	187 = {
		transfer_state_to = FRK
	}
	183 = {
		transfer_state_to = FRK
	}
	185 = {
		transfer_state_to = FRK
	}
	204 = {
		transfer_state_to = FRK
	}
	209 = {
		transfer_state_to = FRK
	}
	227 = {
		transfer_state_to = FRK
	}
	190 = {
		transfer_state_to = FRK
	}
	FRK = {
		set_capital = { state = 922 }
		set_cosmetic_tag = FRK_CAL
	}
}

CAL_saxons_win_barbarian_crisis = {
	273 = {
		transfer_state_to = SAX
	}
	267 = {
		transfer_state_to = SAX
	}
	297 = {
		transfer_state_to = SAX
	}
	293 = {
		transfer_state_to = SAX
	}
	894 = {
		transfer_state_to = SAX
	}
	345 = {
		transfer_state_to = SAX
	}
	372 = {
		transfer_state_to = SAX
	}
	804 = {
		transfer_state_to = SAX
	}
	336 = {
		transfer_state_to = SAX
	}
	313 = {
		transfer_state_to = SAX
	}
	308 = {
		transfer_state_to = SAX
	}
	276 = {
		transfer_state_to = SAX
	}
	251 = {
		transfer_state_to = SAX
	}
	295 = {
		transfer_state_to = SAX
	}
	609 = {
		transfer_state_to = SAX
	}
	610 = {
		transfer_state_to = SAX
	}
	282 = {
		transfer_state_to = SAX
	}
	611 = {
		transfer_state_to = SAX
	}
	316 = {
		transfer_state_to = SAX
	}
	325 = {
		transfer_state_to = SAX
	}
	329 = {
		transfer_state_to = SAX
	}
	339 = {
		transfer_state_to = SAX
	}
	729 = {
		transfer_state_to = SAX
	}
	727 = {
		transfer_state_to = SAX
	}
	725 = {
		transfer_state_to = SAX
	}
	356 = {
		transfer_state_to = SAX
	}
	381 = {
		transfer_state_to = SAX
	}
	367 = {
		transfer_state_to = SAX
	}
	373 = {
		transfer_state_to = SAX
	}
	374 = {
		transfer_state_to = SAX
	}
	401 = {
		transfer_state_to = SAX
	}
	728 = {
		transfer_state_to = SAX
	}
	407 = {
		transfer_state_to = SAX
	}
	408 = {
		transfer_state_to = SAX
	}
	SAX = {
		set_capital = { state = 345 }
		set_cosmetic_tag = SAX_CAL
	}
}

CAL_vandals_win_barbarian_crisis = {
	414 = {
		transfer_state_to = VAN
	}
	726 = {
		transfer_state_to = VAN
	}
	397 = {
		transfer_state_to = VAN
	}
	605 = {
		transfer_state_to = VAN
	}
	419 = {
		transfer_state_to = VAN
	}
	431 = {
		transfer_state_to = VAN
	}
	805 = {
		transfer_state_to = VAN
	}
	439 = {
		transfer_state_to = VAN
	}
	449 = {
		transfer_state_to = VAN
	}
	446 = {
		transfer_state_to = VAN
	}
	409 = {
		transfer_state_to = VAN
	}
	371 = {
		transfer_state_to = VAN
	}
	387 = {
		transfer_state_to = VAN
	}
	606 = {
		transfer_state_to = VAN
	}
	608 = {
		transfer_state_to = VAN
	}
	607 = {
		transfer_state_to = VAN
	}
	388 = {
		transfer_state_to = VAN
	}
	375 = {
		transfer_state_to = VAN
	}
	376 = {
		transfer_state_to = VAN
	}
	369 = {
		transfer_state_to = VAN
	}
	806 = {
		transfer_state_to = VAN
	}
	343 = {
		transfer_state_to = VAN
	}
	344 = {
		transfer_state_to = VAN
	}
	334 = {
		transfer_state_to = VAN
	}
	324 = {
		transfer_state_to = VAN
	}
	351 = {
		transfer_state_to = VAN
	}
	866 = {
		transfer_state_to = VAN
	}
	380 = {
		transfer_state_to = VAN
	}
	399 = {
		transfer_state_to = VAN
	}
	402 = {
		transfer_state_to = VAN
	}
	796 = {
		transfer_state_to = VAN
	}
	410 = {
		transfer_state_to = VAN
	}
	802 = {
		transfer_state_to = VAN
	}
	383 = {
		transfer_state_to = VAN
	}
	386 = {
		transfer_state_to = VAN
	}
	602 = {
		transfer_state_to = VAN
	}
	425 = {
		transfer_state_to = VAN
	}
	404 = {
		transfer_state_to = VAN
	}
	428 = {
		transfer_state_to = VAN
	}
	797 = {
		transfer_state_to = VAN
	}
	427 = {
		transfer_state_to = VAN
	}
	450 = {
		transfer_state_to = VAN
	}
	448 = {
		transfer_state_to = VAN
	}
	435 = {
		transfer_state_to = VAN
	}
	795 = {
		transfer_state_to = VAN
	}
	451 = {
		transfer_state_to = VAN
	}
	471 = {
		transfer_state_to = VAN
	}
	794 = {
		transfer_state_to = VAN
	}
	467 = {
		transfer_state_to = VAN
	}
	463 = {
		transfer_state_to = VAN
	}
	792 = {
		transfer_state_to = VAN
	}
	488 = {
		transfer_state_to = VAN
	}
	500 = {
		transfer_state_to = VAN
	}
	790 = {
		transfer_state_to = VAN
	}
	510 = {
		transfer_state_to = VAN
	}
	504 = {
		transfer_state_to = VAN
	}
	497 = {
		transfer_state_to = VAN
	}
	791 = {
		transfer_state_to = VAN
	}
	793 = {
		transfer_state_to = VAN
	}
	VAN = {
		set_capital = { state = 608 }
		set_cosmetic_tag = VAN_CAL
	}
	920 = {
		transfer_state_to = SAX
	}
}

CAL_visigoths_win_barbarian_crisis = {
	681 = {
		transfer_state_to = WIZ
	}
	283 = {
		transfer_state_to = WIZ
	}
	686 = {
		transfer_state_to = WIZ
	}
	576 = {
		transfer_state_to = WIZ
	}
	580 = {
		transfer_state_to = WIZ
	}
	302 = {
		transfer_state_to = WIZ
	}
	759 = {
		transfer_state_to = WIZ
	}
	578 = {
		transfer_state_to = WIZ
	}
	579 = {
		transfer_state_to = WIZ
	}
	685 = {
		transfer_state_to = WIZ
	}
	904 = {
		transfer_state_to = WIZ
	}
	318 = {
		transfer_state_to = WIZ
	}
	317 = {
		transfer_state_to = WIZ
	}
	309 = {
		transfer_state_to = WIZ
	}
	684 = {
		transfer_state_to = WIZ
	}
	683 = {
		transfer_state_to = WIZ
	}
	328 = {
		transfer_state_to = WIZ
	}
	361 = {
		transfer_state_to = WIZ
	}
	353 = {
		transfer_state_to = WIZ
	}
	358 = {
		transfer_state_to = WIZ
	}
	341 = {
		transfer_state_to = WIZ
	}
	379 = {
		transfer_state_to = WIZ
	}
	398 = {
		transfer_state_to = WIZ
	}
	394 = {
		transfer_state_to = WIZ
	}
	362 = {
		transfer_state_to = WIZ
	}
	370 = {
		transfer_state_to = WIZ
	}
	368 = {
		transfer_state_to = WIZ
	}
	396 = {
		transfer_state_to = WIZ
	}
	903 = {
		transfer_state_to = WIZ
	}
	848 = {
		transfer_state_to = WIZ
	}
	861 = {
		transfer_state_to = WIZ
	}
	WIZ = {
		set_capital = { state = 341 }
		set_cosmetic_tag = WIZ_CAL
	}
	919 = {
		transfer_state_to = FRK
	}
}

CAL_ostrogoths_win_barbarian_crisis = {
	258 = {
		transfer_state_to = OST
	}
	236 = {
		transfer_state_to = OST
	}
	222 = {
		transfer_state_to = OST
	}
	213 = {
		transfer_state_to = OST
	}
	232 = {
		transfer_state_to = OST
	}
	260 = {
		transfer_state_to = OST
	}
	849 = {
		transfer_state_to = OST
	}
	191 = {
		transfer_state_to = OST
	}
	198 = {
		transfer_state_to = OST
	}
	182 = {
		transfer_state_to = OST
	}
	167 = {
		transfer_state_to = OST
	}
	847 = {
		transfer_state_to = OST
	}
	172 = {
		transfer_state_to = OST
	}
	124 = {
		transfer_state_to = OST
	}
	708 = {
		transfer_state_to = OST
	}
	907 = {
		transfer_state_to = OST
	}
	706 = {
		transfer_state_to = OST
	}
	705 = {
		transfer_state_to = OST
	}
	171 = {
		transfer_state_to = OST
	}
	181 = {
		transfer_state_to = OST
	}
	701 = {
		transfer_state_to = OST
	}
	176 = {
		transfer_state_to = OST
	}
	702 = {
		transfer_state_to = OST
	}
	703 = {
		transfer_state_to = OST
	}
	704 = {
		transfer_state_to = OST
	}
	200 = {
		transfer_state_to = OST
	}
	912 = {
		transfer_state_to = OST
	}
	852 = {
		transfer_state_to = OST
	}
	OST = {
		set_capital = { state = 701 }
		set_cosmetic_tag = OST_CAL
	}
	43 = {
		transfer_state_to = JUT
	}
}

CAL_scythia_wins_barbarian_crisis = {
	517 = {
		transfer_state_to = SCY
	}
	520 = {
		transfer_state_to = SCY
	}
	808 = {
		transfer_state_to = SCY
	}
	485 = {
		transfer_state_to = SCY
	}
	499 = {
		transfer_state_to = SCY
	}
	473 = {
		transfer_state_to = SCY
	}
	457 = {
		transfer_state_to = SCY
	}
	668 = {
		transfer_state_to = SCY
	}
	411 = {
		transfer_state_to = SCY
	}
	442 = {
		transfer_state_to = SCY
	}
	426 = {
		transfer_state_to = SCY
	}
	393 = {
		transfer_state_to = SCY
	}
	403 = {
		transfer_state_to = SCY
	}
	424 = {
		transfer_state_to = SCY
	}
	413 = {
		transfer_state_to = SCY
	}
	406 = {
		transfer_state_to = SCY
	}
	815 = {
		transfer_state_to = SCY
	}
	667 = {
		transfer_state_to = SCY
	}
	391 = {
		transfer_state_to = SCY
	}
	350 = {
		transfer_state_to = SCY
	}
	382 = {
		transfer_state_to = SCY
	}
	354 = {
		transfer_state_to = SCY
	}
	349 = {
		transfer_state_to = SCY
	}
	384 = {
		transfer_state_to = SCY
	}
	669 = {
		transfer_state_to = SCY
	}
	663 = {
		transfer_state_to = SCY
	}
	364 = {
		transfer_state_to = SCY
	}
	658 = {
		transfer_state_to = SCY
	}
	355 = {
		transfer_state_to = SCY
	}
	661 = {
		transfer_state_to = SCY
	}
	662 = {
		transfer_state_to = SCY
	}
	665 = {
		transfer_state_to = SCY
	}
	664 = {
		transfer_state_to = SCY
	}
	363 = {
		transfer_state_to = SCY
	}
	365 = {
		transfer_state_to = SCY
	}
	330 = {
		transfer_state_to = SCY
	}
	347 = {
		transfer_state_to = SCY
	}
	326 = {
		transfer_state_to = SCY
	}
	322 = {
		transfer_state_to = SCY
	}
	306 = {
		transfer_state_to = SCY
	}
	304 = {
		transfer_state_to = SCY
	}
	SCY = {
		set_capital = { state = 363 }
		set_cosmetic_tag = SCY_CAL
	}
}

CAL_huns_win_barbarian_crisis = {
	241 = {
		transfer_state_to = HNN
	}
	277 = {
		transfer_state_to = HNN
	}
	231 = {
		transfer_state_to = HNN
	}
	656 = {
		transfer_state_to = HNN
	}
	199 = {
		transfer_state_to = HNN
	}
	194 = {
		transfer_state_to = HNN
	}
	827 = {
		transfer_state_to = HNN
	}
	828 = {
		transfer_state_to = HNN
	}
	829 = {
		transfer_state_to = HNN
	}
	830 = {
		transfer_state_to = HNN
	}
	203 = {
		transfer_state_to = HNN
	}
	169 = {
		transfer_state_to = HNN
	}
	838 = {
		transfer_state_to = HNN
	}
	151 = {
		transfer_state_to = HNN
	}
	142 = {
		transfer_state_to = HNN
	}
	831 = {
		transfer_state_to = HNN
	}
	635 = {
		transfer_state_to = HNN
	}
	174 = {
		transfer_state_to = HNN
	}
	168 = {
		transfer_state_to = HNN
	}
	149 = {
		transfer_state_to = HNN
	}
	154 = {
		transfer_state_to = HNN
	}
	834 = {
		transfer_state_to = HNN
	}
	638 = {
		transfer_state_to = HNN
	}
	639 = {
		transfer_state_to = HNN
	}
	634 = {
		transfer_state_to = HNN
	}
	641 = {
		transfer_state_to = HNN
	}
	94 = {
		transfer_state_to = HNN
	}
	833 = {
		transfer_state_to = HNN
	}
	123 = {
		transfer_state_to = HNN
	}
	640 = {
		transfer_state_to = HNN
	}
	143 = {
		transfer_state_to = HNN
	}
	844 = {
		transfer_state_to = HNN
	}
	845 = {
		transfer_state_to = HNN
	}
	637 = {
		transfer_state_to = HNN
	}
	636 = {
		transfer_state_to = HNN
	}
	103 = {
		transfer_state_to = HNN
	}
	137 = {
		transfer_state_to = HNN
	}
	HNN = {
		set_capital = { state = 143 }
		set_cosmetic_tag = HNN_CAL		
	}
}

CAL_aesti_wins_barbarian_crisis = {
	87 = {
		transfer_state_to = AES
	}
	77 = {
		transfer_state_to = AES
	}
	86 = {
		transfer_state_to = AES
	}
	73 = {
		transfer_state_to = AES
	}
	106 = {
		transfer_state_to = AES
	}
	69 = {
		transfer_state_to = AES
	}
	91 = {
		transfer_state_to = AES
	}
	854 = {
		transfer_state_to = AES
	}
	877 = {
		transfer_state_to = AES
	}
	72 = {
		transfer_state_to = AES
	}
	59 = {
		transfer_state_to = AES
	}
	47 = {
		transfer_state_to = AES
	}
	51 = {
		transfer_state_to = AES
	}
	58 = {
		transfer_state_to = AES
	}
	40 = {
		transfer_state_to = AES
	}
	42 = {
		transfer_state_to = AES
	}
	46 = {
		transfer_state_to = AES
	}
	875 = {
		transfer_state_to = AES
	}
	880 = {
		transfer_state_to = AES
	}
	878 = {
		transfer_state_to = AES
	}
	879 = {
		transfer_state_to = AES
	}
	881 = {
		transfer_state_to = AES
	}
	893 = {
		transfer_state_to = AES
	}
	891 = {
		transfer_state_to = AES
	}
	29 = {
		transfer_state_to = AES
	}
	882 = {
		transfer_state_to = AES
	}
	883 = {
		transfer_state_to = AES
	}
	887 = {
		transfer_state_to = AES
	}
	48 = {
		transfer_state_to = AES
	}
	888 = {
		transfer_state_to = AES
	}
	889 = {
		transfer_state_to = AES
	}
	890 = {
		transfer_state_to = AES
	}
	892 = {
		transfer_state_to = AES
	}
	25 = {
		transfer_state_to = AES
	}
	AES = {
		set_capital = { state = 48 }
		set_cosmetic_tag = AES_CAL
	}
}

CAL_legio_fanatica_spawns_barbarian_crisis = {
	876 = {
		transfer_state_to = PZW
	}
	93 = {
		transfer_state_to = PZW
	}
	117 = {
		transfer_state_to = PZW
	}
	132 = {
		transfer_state_to = PZW
	}
	138 = {
		transfer_state_to = PZW
	}
	120 = {
		transfer_state_to = PZW
	}
	110 = {
		transfer_state_to = PZW
	}
	116 = {
		transfer_state_to = PZW
	}
	95 = {
		transfer_state_to = PZW
	}
	92 = {
		transfer_state_to = PZW
	}
	79 = {
		transfer_state_to = PZW
	}
	832 = {
		transfer_state_to = PZW
	}
	80 = {
		transfer_state_to = PZW
	}
	71 = {
		transfer_state_to = PZW
	}
	97 = {
		transfer_state_to = PZW
	}
	75 = {
		transfer_state_to = PZW
	}
	85 = {
		transfer_state_to = PZW
	}
	60 = {
		transfer_state_to = PZW
	}
	57 = {
		transfer_state_to = PZW
	}
	66 = {
		transfer_state_to = PZW
	}
	37 = {
		transfer_state_to = PZW
	}
	50 = {
		transfer_state_to = PZW
	}
	633 = {
		transfer_state_to = PZW
	}
	PZW = {
		set_capital = { state = 75 }
		set_cosmetic_tag = PZW_CAL
		set_politics = {
			ruling_party = reactionary
			long_name = "Legio XXXVII Fanatica"
			name = "Legio XXXVII Fanatica"					
		}
		set_political_party = {
			ideology = reactionary
			popularity = 100
		}
		add_country_leader_role = {
			character = PZW_carassius
			promote_leader = yes
			country_leader = {
				ideology = reactionary_subtype
			}
		}
	}
}

CAL_eastern_calisian_empire_spawns_barbarian_crisis = {
	197 = {
		transfer_state_to = TRZ
	}
	186 = {
		transfer_state_to = TRZ
	}
	210 = {
		transfer_state_to = TRZ
	}
	180 = {
		transfer_state_to = TRZ
	}
	216 = {
		transfer_state_to = TRZ
	}
	214 = {
		transfer_state_to = TRZ
	}
	223 = {
		transfer_state_to = TRZ
	}
	228 = {
		transfer_state_to = TRZ
	}
	237 = {
		transfer_state_to = TRZ
	}
	270 = {
		transfer_state_to = TRZ
	}
	262 = {
		transfer_state_to = TRZ
	}
	238 = {
		transfer_state_to = TRZ
	}
	261 = {
		transfer_state_to = TRZ
	}
	645 = {
		transfer_state_to = TRZ
	}
	647 = {
		transfer_state_to = TRZ
	}
	755 = {
		transfer_state_to = TRZ
	}
	756 = {
		transfer_state_to = TRZ
	}
	268 = {
		transfer_state_to = TRZ
	}
	754 = {
		transfer_state_to = TRZ
	}
	753 = {
		transfer_state_to = TRZ
	}
	558 = {
		transfer_state_to = TRZ
	}
	563 = {
		transfer_state_to = TRZ
	}
	646 = {
		transfer_state_to = TRZ
	}
	720 = {
		transfer_state_to = TRZ
	}
	566 = {
		transfer_state_to = TRZ
	}
	568 = {
		transfer_state_to = TRZ
	}
	564 = {
		transfer_state_to = TRZ
	}
	567 = {
		transfer_state_to = TRZ
	}
	557 = {
		transfer_state_to = TRZ
	}
	565 = {
		transfer_state_to = TRZ
	}
	719 = {
		transfer_state_to = TRZ
	}
	242 = {
		transfer_state_to = TRZ
	}
	560 = {
		transfer_state_to = TRZ
	}
	562 = {
		transfer_state_to = TRZ
	}
	644 = {
		transfer_state_to = TRZ
	}
	239 = {
		transfer_state_to = TRZ
	}
	211 = {
		transfer_state_to = TRZ
	}
	189 = {
		transfer_state_to = TRZ
	}
	561 = {
		transfer_state_to = TRZ
	}
	559 = {
		transfer_state_to = TRZ
	}
	648 = {
		transfer_state_to = TRZ
	}
	215 = {
		transfer_state_to = TRZ
	}
	835 = {
		transfer_state_to = TRZ
	}
	718 = {
		transfer_state_to = TRZ
	}
	650 = {
		transfer_state_to = TRZ
	}
	649 = {
		transfer_state_to = TRZ
	}
	751 = {
		transfer_state_to = TRZ
	}
	750 = {
		transfer_state_to = TRZ
	}
	252 = {
		transfer_state_to = TRZ
	}
	752 = {
		transfer_state_to = TRZ
	}
	233 = {
		transfer_state_to = TRZ
	}
	284 = {
		transfer_state_to = TRZ
	}
	254 = {
		transfer_state_to = TRZ
	}
	226 = {
		transfer_state_to = TRZ
	}
	201 = {
		transfer_state_to = TRZ
	}
	290 = {
		transfer_state_to = TRZ
	}
	278 = {
		transfer_state_to = TRZ
	}
	657 = {
		transfer_state_to = TRZ
	}
	837 = {
		transfer_state_to = TRZ
	}
	836 = {
		transfer_state_to = TRZ
	}
	659 = {
		transfer_state_to = TRZ
	}
	310 = {
		transfer_state_to = TRZ
	}
	655 = {
		transfer_state_to = TRZ
	}
	TRZ = {
		set_capital = { state = 753 }
		set_cosmetic_tag = TRZ_CAL
		set_politics = {
			ruling_party = euroliberalism
			long_name = "SPQC - Europaei"
			name = "Senatus Populusque Constantiae - Europaei"					
		}
		set_political_party = {
			ideology = euroliberalism
			popularity = 100
		}
		add_country_leader_role = {
			character = TRZ_rafał_trzaskowski
			promote_leader = yes
			country_leader = {
				ideology = euroliberalism_subtype
			}
		}
		TRZ_rafał_trzaskowski = {
			set_character_name = "Raphael I"
		}
		set_country_leader_portrait = {
			portrait = GFX_RAPHAEL_I
		}
	}
}

CAL_kingdom_of_calisians_spawns_barbarian_crisis = {
	430 = {
		transfer_state_to = RZE
	}
	814 = {
		transfer_state_to = RZE
	}
	429 = {
		transfer_state_to = RZE
	}
	447 = {
		transfer_state_to = RZE
	}
	461 = {
		transfer_state_to = RZE
	}
	489 = {
		transfer_state_to = RZE
	}
	484 = {
		transfer_state_to = RZE
	}
	809 = {
		transfer_state_to = RZE
	}
	601 = {
		transfer_state_to = RZE
	}
	507 = {
		transfer_state_to = RZE
	}
	468 = {
		transfer_state_to = RZE
	}
	518 = {
		transfer_state_to = RZE
	}
	816 = {
		transfer_state_to = RZE
	}
	817 = {
		transfer_state_to = RZE
	}
	456 = {
		transfer_state_to = RZE
	}
	455 = {
		transfer_state_to = RZE
	}
	472 = {
		transfer_state_to = RZE
	}
	491 = {
		transfer_state_to = RZE
	}
	512 = {
		transfer_state_to = RZE
	}
	492 = {
		transfer_state_to = RZE
	}
	822 = {
		transfer_state_to = RZE
	}
	812 = {
		transfer_state_to = RZE
	}
	813 = {
		transfer_state_to = RZE
	}
	494 = {
		transfer_state_to = RZE
	}
	498 = {
		transfer_state_to = RZE
	}
	RZE = {
		set_capital = { state = 507 }
		set_cosmetic_tag = RZE_CAL
		set_politics = {
			ruling_party = socialdemocrature
			long_name = "SPQC - Populares"
			name = "SPQC - Populares"					
		}
		set_political_party = {
			ideology = socialdemocrature
			popularity = 100
		}
		every_possible_country = {
			limit = { has_character = CAL_sylwiusz_jakubowski }
			random_character = {
				limit = { is_character = CAL_sylwiusz_jakubowski }
				set_nationality = RZE
			}
		}
		add_country_leader_role = {
			character = CAL_sylwiusz_jakubowski
			promote_leader = yes
			country_leader = {
				ideology = socialdemocrature_subtype
			}
		}
		CAL_sylwiusz_jakubowski = {
			set_character_name = "Silvius I"
		}
		set_country_leader_portrait = {
			portrait = GFX_SILVIUS_I
		}
	}
}

CAL_legio_alpha_spawns_barbarian_crisis = {
	807 = {
		transfer_state_to = ALP
	}
	536 = {
		transfer_state_to = ALP
	}
	547 = {
		transfer_state_to = ALP
	}
	542 = {
		transfer_state_to = ALP
	}
	810 = {
		transfer_state_to = ALP
	}
	541 = {
		transfer_state_to = ALP
	}
	538 = {
		transfer_state_to = ALP
	}
	526 = {
		transfer_state_to = ALP
	}
	527 = {
		transfer_state_to = ALP
	}
	535 = {
		transfer_state_to = ALP
	}
	524 = {
		transfer_state_to = ALP
	}
	533 = {
		transfer_state_to = ALP
	}
	811 = {
		transfer_state_to = ALP
	}
	ALP = {
		set_capital = { state = 538 }
		set_country_leader_portrait = {
			portrait = GFX_VINICIUS_2
		}
	}
}

CAL_nova_calisia_spawns_barbarian_crisis = {
	98 = {
		transfer_state_to = JAS
	}
	84 = {
		transfer_state_to = JAS
	}
	78 = {
		transfer_state_to = JAS
	}
	82 = {
		transfer_state_to = JAS
	}
	107 = {
		transfer_state_to = JAS
	}
	127 = {
		transfer_state_to = JAS
	}
	871 = {
		transfer_state_to = JAS
	}
	153 = {
		transfer_state_to = JAS
	}
	177 = {
		transfer_state_to = JAS
	}
	155 = {
		transfer_state_to = JAS
	}
	118 = {
		transfer_state_to = JAS
	}
	916 = {
		transfer_state_to = JAS
	}
	135 = {
		transfer_state_to = JAS
	}
	102 = {
		transfer_state_to = JAS
	}
	873 = {
		transfer_state_to = JAS
	}
	872 = {
		transfer_state_to = JAS
	}
	JAS = {
		set_capital = { state = 98 }
		add_victory_points = {
			province = 401
			value = 15
		}
		set_cosmetic_tag = JAS_CAL
		set_politics = {
			ruling_party = neonationalism
			long_name = "Societas Lacertae"
			name = "Societas Lacertae"					
		}
		set_political_party = {
			ideology = neonationalism
			popularity = 100
		}
		add_country_leader_role = {
			character = JAS_aleksander_jabłonowski
			promote_leader = yes
			country_leader = {
				ideology = neonationalism_subtype
			}
		}
		JAS_aleksander_jabłonowski = {
			set_character_name = "Phaon Alnus"
		}
		set_country_leader_portrait = {
			portrait = GFX_PHAON_ALNUS
		}
	}
}

CAL_carthagdinia_spawns_barbarian_crisis = {
	884 = {
		transfer_state_to = GDA
	}
	26 = {
		transfer_state_to = GDA
	}
	886 = {
		transfer_state_to = GDA
	}
	885 = {
		transfer_state_to = GDA
	}
	41 = {
		transfer_state_to = GDA
	}
	632 = {
		transfer_state_to = GDA
	}
	631 = {
		transfer_state_to = GDA
	}
	49 = {
		transfer_state_to = GDA
	}
	56 = {
		transfer_state_to = GDA
	}
	64 = {
		transfer_state_to = GDA
	}
	15 = {
		transfer_state_to = GDA
	}
	52 = {
		transfer_state_to = GDA
	}
	44 = {
		transfer_state_to = GDA
	}
	715 = {
		transfer_state_to = GDA
	}
	630 = {
		transfer_state_to = GDA
	}
	39 = {
		transfer_state_to = GDA
	}
	717 = {
		transfer_state_to = GDA
	}
	897 = {
		transfer_state_to = GDA
	}
	714 = {
		transfer_state_to = GDA
	}
	716 = {
		transfer_state_to = GDA
	}
	709 = {
		transfer_state_to = GDA
	}
	712 = {
		transfer_state_to = GDA
	}
	713 = {
		transfer_state_to = GDA
	}
	711 = {
		transfer_state_to = GDA
	}
	20 = {
		transfer_state_to = GDA
	}
	710 = {
		transfer_state_to = GDA
	}
	34 = {
		transfer_state_to = GDA
	}
	626 = {
		transfer_state_to = GDA
	}
	21 = {
		transfer_state_to = GDA
	}
	36 = {
		transfer_state_to = GDA
	}
	666 = {
		transfer_state_to = GDA
	}
	628 = {
		transfer_state_to = GDA
	}
	627 = {
		transfer_state_to = GDA
	}
	625 = {
		transfer_state_to = GDA
	}
	624 = {
		transfer_state_to = GDA
	}
	623 = {
		transfer_state_to = GDA
	}
	622 = {
		transfer_state_to = GDA
	}
	63 = {
		transfer_state_to = GDA
	}
	53 = {
		transfer_state_to = GDA
	}
	33 = {
		transfer_state_to = GDA
	}
	23 = {
		transfer_state_to = GDA
	}
	24 = {
		transfer_state_to = GDA
	}
	35 = {
		transfer_state_to = GDA
	}
	45 = {
		transfer_state_to = GDA
	}
	GDA = {
		set_capital = { state = 34 }
		set_cosmetic_tag = GDA_CAL
		set_politics = {
			ruling_party = autocracy
			long_name = "Adirim"
			name = "Adirim"		
		}
		set_political_party = {
			ideology = autocracy
			popularity = 100
		}
		add_country_leader_role = {
			character = GDA_aleksandra_dulkiewicz
			promote_leader = yes
			country_leader = {
				ideology = autocracy_subtype
			}
		}
		GDA_aleksandra_dulkiewicz = {
			set_character_name = "Dulco"
		}
		set_country_leader_portrait = {
			portrait = GFX_DULKONA
		}
	}
}

CAL_empire_of_last_days_spawns_barbarian_crisis = {
	38 = {
		transfer_state_to = SYJ
	}
	868 = {
		transfer_state_to = SYJ
	}
	81 = {
		transfer_state_to = SYJ
	}
	89 = {
		transfer_state_to = SYJ
	}
	74 = {
		transfer_state_to = SYJ
	}
	62 = {
		transfer_state_to = SYJ
	}
	111 = {
		transfer_state_to = SYJ
	}
	130 = {
		transfer_state_to = SYJ
	}
	104 = {
		transfer_state_to = SYJ
	}
	906 = {
		transfer_state_to = SYJ
	}
	905 = {
		transfer_state_to = SYJ
	}
	707 = {
		transfer_state_to = SYJ
	}
	148 = {
		transfer_state_to = SYJ
	}
	150 = {
		transfer_state_to = SYJ
	}
	136 = {
		transfer_state_to = SYJ
	}
	128 = {
		transfer_state_to = SYJ
	}
	99 = {
		transfer_state_to = SYJ
	}
	96 = {
		transfer_state_to = SYJ
	}
	100 = {
		transfer_state_to = SYJ
	}
	65 = {
		transfer_state_to = SYJ
	}
	67 = {
		transfer_state_to = SYJ
	}
	629 = {
		transfer_state_to = SYJ
	}
	853 = {
		transfer_state_to = SYJ
	}
	SYJ = {
		set_capital = { state = 81 }
		set_cosmetic_tag = SYJ_CAL
		set_politics = {
			ruling_party = postpolonism
			long_name = "Synodus Ultima"
			name = "Synodus Ultima"		
		}
		set_political_party = {
			ideology = postpolonism
			popularity = 100
		}
		add_country_leader_role = {
			character = SYJ_prorok_lichwała
			promote_leader = yes
			country_leader = {
				ideology = postpolonism_subtype
			}
		}
		SYJ_prorok_lichwała = {
			set_character_name = "Emperor of The Last Days"
		}
		set_country_leader_portrait = {
			portrait = GFX_CESARZ_DNI_OSTATNICH
		}
	}
}

CAL_aquilin_spawns_barbarian_crisis = {
	115 = {
		transfer_state_to = ORL
	}
	108 = {
		transfer_state_to = ORL
	}
	112 = {
		transfer_state_to = ORL
	}
	121 = {
		transfer_state_to = ORL
	}
	129 = {
		transfer_state_to = ORL
	}
	126 = {
		transfer_state_to = ORL
	}
	141 = {
		transfer_state_to = ORL
	}
	140 = {
		transfer_state_to = ORL
	}
	145 = {
		transfer_state_to = ORL
	}
	165 = {
		transfer_state_to = ORL
	}
	134 = {
		transfer_state_to = ORL
	}
	163 = {
		transfer_state_to = ORL
	}
	152 = {
		transfer_state_to = ORL
	}
	146 = {
		transfer_state_to = ORL
	}
	170 = {
		transfer_state_to = ORL
	}
	196 = {
		transfer_state_to = ORL
	}
	192 = {
		transfer_state_to = ORL
	}
	173 = {
		transfer_state_to = ORL
	}
	156 = {
		transfer_state_to = ORL
	}
	147 = {
		transfer_state_to = ORL
	}
	125 = {
		transfer_state_to = ORL
	}
	144 = {
		transfer_state_to = ORL
	}
	113 = {
		transfer_state_to = ORL
	}
	139 = {
		transfer_state_to = ORL
	}
	160 = {
		transfer_state_to = ORL
	}
	131 = {
		transfer_state_to = ORL
	}
	157 = {
		transfer_state_to = ORL
	}
	839 = {
		transfer_state_to = ORL
	}
	840 = {
		transfer_state_to = ORL
	}
	841 = {
		transfer_state_to = ORL
	}
	842 = {
		transfer_state_to = ORL
	}
	179 = {
		transfer_state_to = ORL
	}
	642 = {
		transfer_state_to = ORL
	}
	643 = {
		transfer_state_to = ORL
	}
	28 = {
		transfer_state_to = ORL
	}
	ORL = {
		set_capital = { state = 642 }
		set_cosmetic_tag = ORL_CAL
		set_politics = {
			ruling_party = autocracy
			long_name = "Consilium Aqulinae"
			name = "Consilium Aqulinae"		
		}
		set_political_party = {
			ideology = autocracy
			popularity = 100
		}
		add_country_leader_role = {
			character = ORL_daniel_obajtek
			promote_leader = yes
			country_leader = {
				ideology = autocracy_subtype
			}
		}
		ORL_daniel_obajtek = {
			set_character_name = "Danielus Obajtkus"
		}
		set_country_leader_portrait = {
			portrait = GFX_OBAJTKUS
		}
	}
}

CAL_judah_spawns_barbarian_crisis = {
	687 = {
		transfer_state_to = ZYD
	}
	289 = {
		transfer_state_to = ZYD
	}
	272 = {
		transfer_state_to = ZYD
	}
	275 = {
		transfer_state_to = ZYD
	}
	269 = {
		transfer_state_to = ZYD
	}
	288 = {
		transfer_state_to = ZYD
	}
	682 = {
		transfer_state_to = ZYD
	}
	757 = {
		transfer_state_to = ZYD
	}
	758 = {
		transfer_state_to = ZYD
	}
	577 = {
		transfer_state_to = ZYD
	}
	303 = {
		transfer_state_to = ZYD
	}
	315 = {
		transfer_state_to = ZYD
	}
	319 = {
		transfer_state_to = ZYD
	}
	340 = {
		transfer_state_to = ZYD
	}
	333 = {
		transfer_state_to = ZYD
	}
	331 = {
		transfer_state_to = ZYD
	}
	332 = {
		transfer_state_to = ZYD
	}
	323 = {
		transfer_state_to = ZYD
	}
	300 = {
		transfer_state_to = ZYD
	}
	850 = {
		transfer_state_to = ZYD
	}
	296 = {
		transfer_state_to = ZYD
	}
	294 = {
		transfer_state_to = ZYD
	}
	651 = {
		transfer_state_to = ZYD
	}
	ZYD = {
		set_capital = { state = 577 }
		set_cosmetic_tag = ZYD_CAL
		every_possible_country = {
			limit = { has_character = SOS_zukowska }
			random_character = {
				limit = { is_character = SOS_zukowska }
				set_nationality = ZYD
			}
		}
		set_politics = {
			ruling_party = squattism
			long_name = "Court of Judah"
			name = "Court of Judah"					
		}
		set_political_party = {
			ideology = squattism
			popularity = 100
		}
		add_country_leader_role = {
			character = SOS_zukowska
			promote_leader = yes
			country_leader = {
				ideology = squattism_subtype
			}
		}
		SOS_zukowska = {
			set_character_name = "Hannāh Miriam Khipushít"
		}
		set_country_leader_portrait = {
			portrait = GFX_AMZ_ZYD
		}
	}
}

CAL_gaulicia_spawns_barbarian_crisis = {
	301 = {
		transfer_state_to = MNI
	}
	346 = {
		transfer_state_to = MNI
	}
	660 = {
		transfer_state_to = MNI
	}
	654 = {
		transfer_state_to = MNI
	}
	653 = {
		transfer_state_to = MNI
	}
	652 = {
		transfer_state_to = MNI
	}
	348 = {
		transfer_state_to = MNI
	}
	366 = {
		transfer_state_to = MNI
	}
	360 = {
		transfer_state_to = MNI
	}
	673 = {
		transfer_state_to = MNI
	}
	672 = {
		transfer_state_to = MNI
	}
	378 = {
		transfer_state_to = MNI
	}
	860 = {
		transfer_state_to = MNI
	}
	864 = {
		transfer_state_to = MNI
	}
	679 = {
		transfer_state_to = MNI
	}
	899 = {
		transfer_state_to = MNI
	}
	377 = {
		transfer_state_to = MNI
	}
	859 = {
		transfer_state_to = MNI
	}
	858 = {
		transfer_state_to = MNI
	}
	392 = {
		transfer_state_to = MNI
	}
	671 = {
		transfer_state_to = MNI
	}
	670 = {
		transfer_state_to = MNI
	}
	678 = {
		transfer_state_to = MNI
	}
	677 = {
		transfer_state_to = MNI
	}
	433 = {
		transfer_state_to = MNI
	}
	676 = {
		transfer_state_to = MNI
	}
	675 = {
		transfer_state_to = MNI
	}
	674 = {
		transfer_state_to = MNI
	}
	914 = {
		transfer_state_to = MNI
	}
	915 = {
		transfer_state_to = MNI
	}
	913 = {
		transfer_state_to = MNI
	}
	416 = {
		transfer_state_to = MNI
	}
	865 = {
		transfer_state_to = MNI
	}
	389 = {
		transfer_state_to = MNI
	}
	417 = {
		transfer_state_to = MNI
	}
	433 = {
		transfer_state_to = MNI
	}
	857 = {
		transfer_state_to = MNI
	}
	856 = {
		transfer_state_to = MNI
	}
	855 = {
		transfer_state_to = MNI
	}
	863 = {
		transfer_state_to = MNI
	}
	862 = {
		transfer_state_to = MNI
	}
	469 = {
		transfer_state_to = MNI
	}
	441 = {
		transfer_state_to = MNI
	}
	443 = {
		transfer_state_to = MNI
	}
	454 = {
		transfer_state_to = MNI
	}
	438 = {
		transfer_state_to = MNI
	}
	432 = {
		transfer_state_to = MNI
	}
	420 = {
		transfer_state_to = MNI
	}
	MNI = {
		set_capital = { state = 416 }
		set_cosmetic_tag = MNI_CAL
		set_politics = {
			ruling_party = squattism
			long_name = "Gaulic Moot"
			name = "Gaulic Moot"		
		}
		set_political_party = {
			ideology = squattism
			popularity = 100
		}
		add_country_leader_role = {
			character = MNI_richard_galla
			promote_leader = yes
			country_leader = {
				ideology = squattism_subtype
			}
		}
		MNI_richard_galla = {
			set_character_name = "Ricardus Gaulus"
		}
		set_country_leader_portrait = {
			portrait = GFX_GAULUS
		}
	}
}

CAL_polonesia_spawns_barbarian_crisis = {
	412 = {
		transfer_state_to = JWK
	}
	400 = {
		transfer_state_to = JWK
	}
	870 = {
		transfer_state_to = JWK
	}
	869 = {
		transfer_state_to = JWK
	}
	418 = {
		transfer_state_to = JWK
	}
	592 = {
		transfer_state_to = JWK
	}
	591 = {
		transfer_state_to = JWK
	}
	746 = {
		transfer_state_to = JWK
	}
	390 = {
		transfer_state_to = JWK
	}
	423 = {
		transfer_state_to = JWK
	}
	436 = {
		transfer_state_to = JWK
	}
	738 = {
		transfer_state_to = JWK
	}
	440 = {
		transfer_state_to = JWK
	}
	745 = {
		transfer_state_to = JWK
	}
	744 = {
		transfer_state_to = JWK
	}
	743 = {
		transfer_state_to = JWK
	}
	421 = {
		transfer_state_to = JWK
	}
	445 = {
		transfer_state_to = JWK
	}
	JWK = {
		set_capital = { state = 421 }
		set_cosmetic_tag = JWK_CAL
		set_politics = {
			ruling_party = reactionary
			long_name = "Spartiatikos Syllogos"
			name = "Spartiatikos Syllogos"		
		}
		set_political_party = {
			ideology = reactionary
			popularity = 100
		}
		add_country_leader_role = {
			character = JWK_kukula
			promote_leader = yes
			country_leader = {
				ideology = reactionary_subtype
			}
		}
		JWK_kukula = {
			set_character_name = "Wiesław Kukuła" #Zostawiam w razie jakbyś chciał jakieś inne imie mu dać
		}
		set_country_leader_portrait = {
			portrait = GFX_ARCHAGETA
		}
	}
}

CAL_spartakus_spawns_barbarian_crisis = {
	760 = {
		transfer_state_to = SOS
	}
	731 = {
		transfer_state_to = SOS
	}
	732 = {
		transfer_state_to = SOS
	}
	730 = {
		transfer_state_to = SOS
	}
	741 = {
		transfer_state_to = SOS
	}
	739 = {
		transfer_state_to = SOS
	}
	740 = {
		transfer_state_to = SOS
	}
	826 = {
		transfer_state_to = SOS
	}
	459 = {
		transfer_state_to = SOS
	}
	825 = {
		transfer_state_to = SOS
	}
	515 = {
		transfer_state_to = SOS
	}
	594 = {
		transfer_state_to = SOS
	}
	801 = {
		transfer_state_to = SOS
	}
	800 = {
		transfer_state_to = SOS
	}
	799 = {
		transfer_state_to = SOS
	}
	513 = {
		transfer_state_to = SOS
	}
	593 = {
		transfer_state_to = SOS
	}
	493 = {
		transfer_state_to = SOS
	}
	733 = {
		transfer_state_to = SOS
	}
	734 = {
		transfer_state_to = SOS
	}
	502 = {
		transfer_state_to = SOS
	}
	761 = {
		transfer_state_to = SOS
	}
	486 = {
		transfer_state_to = SOS
	}
	487 = {
		transfer_state_to = SOS
	}
	481 = {
		transfer_state_to = SOS
	}
	453 = {
		transfer_state_to = SOS
	}
	589 = {
		transfer_state_to = SOS
	}
	769 = {
		transfer_state_to = SOS
	}
	798 = {
		transfer_state_to = SOS
	}
	480 = {
		transfer_state_to = SOS
	}
	775 = {
		transfer_state_to = SOS
	}
	776 = {
		transfer_state_to = SOS
	}
	736 = {
		transfer_state_to = SOS
	}
	737 = {
		transfer_state_to = SOS
	}
	735 = {
		transfer_state_to = SOS
	}
	777 = {
		transfer_state_to = SOS
	}
	460 = {
		transfer_state_to = SOS
	}
	SOS = {
		set_capital = { state = 737 }
		set_cosmetic_tag = SOS_CAL
		set_politics = {
			ruling_party = squattism
			long_name = "Foedus Spartaci"
			name = "Foedus Spartaci"		
		}
		set_political_party = {
			ideology = squattism
			popularity = 100
		}
		add_country_leader_role = {
			character = SOS_litewka
			promote_leader = yes
			country_leader = {
				ideology = squattism_subtype
			}
		}
		SOS_litewka = {
			set_character_name = "Lucas Litevkus"
		}
		set_country_leader_portrait = {
			portrait = GFX_SPARTAKUS
		}
	}
}

CAL_silingi_spawns_barbarian_crisis = {
	464 = {
		transfer_state_to = GLI
	}
	742 = {
		transfer_state_to = GLI
	}
	466 = {
		transfer_state_to = GLI
	}
	474 = {
		transfer_state_to = GLI
	}
	475 = {
		transfer_state_to = GLI
	}
	479 = {
		transfer_state_to = GLI
	}
	476 = {
		transfer_state_to = GLI
	}
	768 = {
		transfer_state_to = GLI
	}
	483 = {
		transfer_state_to = GLI
	}
	763 = {
		transfer_state_to = GLI
	}
	764 = {
		transfer_state_to = GLI
	}
	767 = {
		transfer_state_to = GLI
	}
	765 = {
		transfer_state_to = GLI
	}
	766 = {
		transfer_state_to = GLI
	}
	470 = {
		transfer_state_to = GLI
	}
	490 = {
		transfer_state_to = GLI
	}
	590 = {
		transfer_state_to = GLI
	}
	501 = {
		transfer_state_to = GLI
	}
	496 = {
		transfer_state_to = GLI
	}
	789 = {
		transfer_state_to = GLI
	}
	788 = {
		transfer_state_to = GLI
	}
	787 = {
		transfer_state_to = GLI
	}
	762 = {
		transfer_state_to = GLI
	}
	509 = {
		transfer_state_to = GLI
	}
	511 = {
		transfer_state_to = GLI
	}
	516 = {
		transfer_state_to = GLI
	}
	786 = {
		transfer_state_to = GLI
	}
	GLI = {
		set_capital = { state = 483 }
		set_cosmetic_tag = GLI_CAL
		set_politics = {
			ruling_party = squattism
			long_name = "Silingting"
			name = "Silingting"		
		}
		set_political_party = {
			ideology = squattism
			popularity = 100
		}
	}
}

CAL_czechia_takes_land_barbarian_crisis = {
	604 = {
		transfer_state_to = CZH
	}
	452 = {
		transfer_state_to = CZH
	}
	434 = {
		transfer_state_to = CZH
	}
	785 = {
		transfer_state_to = CZH
	}
	749 = {
		transfer_state_to = CZH
	}
	784 = {
		transfer_state_to = CZH
	}
	522 = {
		transfer_state_to = CZH
	}
	747 = {
		transfer_state_to = CZH
	}
	748 = {
		transfer_state_to = CZH
	}
	478 = {
		transfer_state_to = CZH
	}
	803 = {
		transfer_state_to = CZH
	}
}

CAL_pharaonate_spawns_barbarian_crisis = {
	599 = {
		transfer_state_to = NHT
	}
	598 = {
		transfer_state_to = NHT
	}
	477 = {
		transfer_state_to = NHT
	}
	495 = {
		transfer_state_to = NHT
	}
	482 = {
		transfer_state_to = NHT
	}
	823 = {
		transfer_state_to = NHT
	}
	824 = {
		transfer_state_to = NHT
	}
	898 = {
		transfer_state_to = NHT
	}
	505 = {
		transfer_state_to = NHT
	}
	503 = {
		transfer_state_to = NHT
	}
	508 = {
		transfer_state_to = NHT
	}
	519 = {
		transfer_state_to = NHT
	}
	596 = {
		transfer_state_to = NHT
	}
	597 = {
		transfer_state_to = NHT
	}
	574 = {
		transfer_state_to = NHT
	}
	573 = {
		transfer_state_to = NHT
	}
	575 = {
		transfer_state_to = NHT
	}
	514 = {
		transfer_state_to = NHT
	}
	570 = {
		transfer_state_to = NHT
	}
	572 = {
		transfer_state_to = NHT
	}
	571 = {
		transfer_state_to = NHT
	}
	569 = {
		transfer_state_to = NHT
	}
	773 = {
		transfer_state_to = NHT
	}
	772 = {
		transfer_state_to = NHT
	}
	774 = {
		transfer_state_to = NHT
	}
	771 = {
		transfer_state_to = NHT
	}
	770 = {
		transfer_state_to = NHT
	}
	722 = {
		transfer_state_to = NHT
	}
	721 = {
		transfer_state_to = NHT
	}
	723 = {
		transfer_state_to = NHT
	}
	724 = {
		transfer_state_to = NHT
	}
	506 = {
		transfer_state_to = NHT
	}
	NHT = {
		set_capital = { state = 506 }
		set_cosmetic_tag = NHT_CAL
		set_politics = {
			ruling_party = postpolonism
			long_name = "Oracles of Astrampsychos"
			name = "Oracles of Astrampsychos"					
		}
		set_political_party = {
			ideology = postpolonism
			popularity = 100
		}
		add_country_leader_role = {
			character = NHT_astram_psychos
			promote_leader = yes
			country_leader = {
				ideology = postpolonism_subtype
			}
		}
	}
}

CAL_armenia_spawns_barbarian_crisis = {
	600 = {
		transfer_state_to = HAB
	}
	545 = {
		transfer_state_to = HAB
	}
	525 = {
		transfer_state_to = HAB
	}
	595 = {
		transfer_state_to = HAB
	}
	783 = {
		transfer_state_to = HAB
	}
	521 = {
		transfer_state_to = HAB
	}
	523 = {
		transfer_state_to = HAB
	}
	528 = {
		transfer_state_to = HAB
	}
	532 = {
		transfer_state_to = HAB
	}
	531 = {
		transfer_state_to = HAB
	}
	539 = {
		transfer_state_to = HAB
	}
	782 = {
		transfer_state_to = HAB
	}
	781 = {
		transfer_state_to = HAB
	}
	780 = {
		transfer_state_to = HAB
	}
	779 = {
		transfer_state_to = HAB
	}
	778 = {
		transfer_state_to = HAB
	}
	534 = {
		transfer_state_to = HAB
	}
	530 = {
		transfer_state_to = HAB
	}
	529 = {
		transfer_state_to = HAB
	}
	821 = {
		transfer_state_to = HAB
	}
	820 = {
		transfer_state_to = HAB
	}
	819 = {
		transfer_state_to = HAB
	}
	818 = {
		transfer_state_to = HAB
	}
	HAB = {
		set_capital = { state = 523 }
		set_cosmetic_tag = HAB_CAL
		set_politics = {
			ruling_party = autocracy
			long_name = "Beskidi Miutyun"
			name = "Beskidi Miutyun"		
		}
		set_political_party = {
			ideology = autocracy
			popularity = 100
		}
		add_country_leader_role = {
			character = HAB_Makłowicz
			promote_leader = yes
			country_leader = {
				ideology = autocracy_subtype
			}
		}
		set_country_leader_portrait = {
			portrait = GFX_MAKLOWICZ_ARMENIA
		}
	}
}

CAL_nysa_spawns_barbarian_crisis = {
	603 = {
		transfer_state_to = NYS
	}
	NYS = {
		set_capital = { state = 603 }
		set_cosmetic_tag = NYS_CAL
		set_politics = {
			ruling_party = socialdemocrature
			long_name = "SPQN - Populares"
			name = "Senatus Populusque Nissanum - Populares"					
		}
		set_political_party = {
			ideology = socialdemocrature
			popularity = 100
		}
	}
}

CAL_set_military_loyalty_effects = {
	if = {
		limit = {
			check_variable = {
				CAL_legiones_loyalty < 20
			}
		}
		swap_ideas = {
			remove_idea = CAL_legiones_disloyal
			add_idea = CAL_legiones_rebellious
		}
	}
	else_if = {
		limit = {
			check_variable = {
				CAL_legiones_loyalty < 40
			}
		}
		if = {
			limit = {
				has_idea = CAL_legiones_hesistant
			}
			swap_ideas = {
				remove_idea = CAL_legiones_hesistant
				add_idea = CAL_legiones_disloyal
			}
		}
		else = {
			swap_ideas = {
				remove_idea = CAL_legiones_rebellious
				add_idea = CAL_legiones_disloyal
			}
		}
	}
	else_if = {
		limit = {
			check_variable = {
				CAL_legiones_loyalty < 60
			}
		}
		if = {
			limit = {
				has_idea = CAL_legiones_loyal
			}
			swap_ideas = {
				remove_idea = CAL_legiones_loyal
				add_idea = CAL_legiones_hesistant
			}
		}
		else_if = {
			limit = {
				has_idea = CAL_legiones_rebellious
			}
			swap_ideas = {
				remove_idea = CAL_legiones_rebellious
				add_idea = CAL_legiones_hesistant
			}
		}
		else = {
			swap_ideas = {
				remove_idea = CAL_legiones_disloyal
				add_idea = CAL_legiones_hesistant
			}
		}
	}
	else_if = {
		limit = {
			check_variable = {
				CAL_legiones_loyalty < 80
			}
		}
		if = {
			limit = {
				has_idea = CAL_legiones_fanatical
			}
			swap_ideas = {
				remove_idea = CAL_legiones_fanatical
				add_idea = CAL_legiones_loyal
			}
		}
		else = {
			swap_ideas = {
				remove_idea = CAL_legiones_hesistant
				add_idea = CAL_legiones_loyal
			}
		}
	}
	else = {
		swap_ideas = {
			remove_idea = CAL_legiones_loyal
			add_idea = CAL_legiones_fanatical
		}
	}

	if = {
		limit = {
			check_variable = {
				CAL_praetoriae_loyalty < 20
			}
		}
		swap_ideas = {
			remove_idea = CAL_praetoriae_disloyal
			add_idea = CAL_praetoriae_rebellious
		}
	}
	else_if = {
		limit = {
			check_variable = {
				CAL_praetoriae_loyalty < 40
			}
		}
		if = {
			limit = {
				has_idea = CAL_praetoriae_hesistant
			}
			swap_ideas = {
				remove_idea = CAL_praetoriae_hesistant
				add_idea = CAL_praetoriae_disloyal
			}
		}
		else = {
			swap_ideas = {
				remove_idea = CAL_praetoriae_rebellious
				add_idea = CAL_praetoriae_disloyal
			}
		}
	}
	else_if = {
		limit = {
			check_variable = {
				CAL_praetoriae_loyalty < 60
			}
		}
		if = {
			limit = {
				has_idea = CAL_praetoriae_loyal
			}
			swap_ideas = {
				remove_idea = CAL_praetoriae_loyal
				add_idea = CAL_praetoriae_hesistant
			}
		}
		else_if = {
			limit = {
				has_idea = CAL_praetoriae_rebellious
			}
			swap_ideas = {
				remove_idea = CAL_praetoriae_rebellious
				add_idea = CAL_praetoriae_hesistant
			}
		}
		else = {
			swap_ideas = {
				remove_idea = CAL_praetoriae_disloyal
				add_idea = CAL_praetoriae_hesistant
			}
		}
	}
	else_if = {
		limit = {
			check_variable = {
				CAL_praetoriae_loyalty < 80
			}
		}
		if = {
			limit = {
				has_idea = CAL_praetoriae_fanatical
			}
			swap_ideas = {
				remove_idea = CAL_praetoriae_fanatical
				add_idea = CAL_praetoriae_loyal
			}
		}
		else = {
			swap_ideas = {
				remove_idea = CAL_praetoriae_hesistant
				add_idea = CAL_praetoriae_loyal
			}
		}
	}
	else = {
		swap_ideas = {
			remove_idea = CAL_praetoriae_loyal
			add_idea = CAL_praetoriae_fanatical
		}
	}
}

CAL_clamp_on_loyalty_and_gravitas = {
	round_variable = CAL_populares_gravitas
	round_variable = CAL_optimates_gravitas
	round_variable = CAL_emperor_gravitas
	round_variable = CAL_legiones_gravitas
	round_variable = CAL_praetoriae_gravitas
	round_variable = CAL_populares_loyalty
	round_variable = CAL_optimates_loyalty
	round_variable = CAL_legiones_loyalty
	round_variable = CAL_praetoriae_loyalty
	clamp_variable = {
		var = CAL_populares_gravitas
		min = 0
		max = 200
	}
	clamp_variable = {
		var = CAL_optimates_gravitas
		min = 0
		max = 200
	}
	clamp_variable = {
		var = CAL_emperor_gravitas
		min = 0
		max = 200
	}
	clamp_variable = {
		var = CAL_legiones_gravitas
		min = 0
		max = 200
	}
	clamp_variable = {
		var = CAL_praetoriae_gravitas
		min = 0
		max = 200
	}
	clamp_variable = {
		var = CAL_populares_loyalty
		min = 0
		max = 100
	}
	clamp_variable = {
		var = CAL_optimates_loyalty
		min = 0
		max = 100
	}
	clamp_variable = {
		var = CAL_legiones_loyalty
		min = 0
		max = 100
	}
	clamp_variable = {
		var = CAL_praetoriae_loyalty
		min = 0
		max = 100
	}
}

CAL_pax_calisiana_review = {
	if = {
		limit = {
			check_variable = { CAL_pax_calisiana_result = 6 }
		}
		if = {
			limit = {
				has_idea = CAL_palma_non_sine_pulvere
			}
			swap_ideas = {
				remove_idea = CAL_palma_non_sine_pulvere
				add_idea = CAL_pax_calisiana_mixed
			}
		}
		else_if = {
			limit = {
				has_idea = CAL_pax_calisiana_mixed
			}
			
		}
		else_if = {
			limit = {
				has_idea = CAL_pax_calisiana_optimates
			}
			swap_ideas = {
				remove_idea = CAL_pax_calisiana_optimates
				add_idea = CAL_pax_calisiana_mixed
			}
		}
		else_if = {
			limit = {
				has_idea = CAL_pax_calisiana_populares
			}
			swap_ideas = {
				remove_idea = CAL_pax_calisiana_populares
				add_idea = CAL_pax_calisiana_mixed
			}
		}
	}
	else_if = {
		limit = {
			check_variable = { CAL_pax_calisiana_result > 6 }
		}

		if = {
			limit = {
				has_idea = CAL_palma_non_sine_pulvere
			}
			swap_ideas = {
				remove_idea = CAL_palma_non_sine_pulvere
				add_idea = CAL_pax_calisiana_populares
			}
		}
		else_if = {
			limit = {
				has_idea = CAL_pax_calisiana_populares
			}
			
		}
		else_if = {
			limit = {
				has_idea = CAL_pax_calisiana_mixed
			}
			swap_ideas = {
				remove_idea = CAL_pax_calisiana_mixed
				add_idea = CAL_pax_calisiana_populares
			}
		}
		#else_if = {
		#	limit = {
		#		has_idea = CAL_pax_calisiana_optimates
		#	}
		#	swap_ideas = {
		#		remove_idea = CAL_pax_calisiana_optimates
		#		add_idea = CAL_pax_calisiana_populares
		#	}
		#}
	}
	else_if = {
		limit = {
			check_variable = { CAL_pax_calisiana_result < 6 }
		}

		if = {
			limit = {
				has_idea = CAL_palma_non_sine_pulvere
			}
			swap_ideas = {
				remove_idea = CAL_palma_non_sine_pulvere
				add_idea = CAL_pax_calisiana_optimates
			}
		}
		else_if = {
			limit = {
				has_idea = CAL_pax_calisiana_optimates
			}
			
		}
		else_if = {
			limit = {
				has_idea = CAL_pax_calisiana_mixed
			}
			swap_ideas = {
				remove_idea = CAL_pax_calisiana_mixed
				add_idea = CAL_pax_calisiana_optimates
			}
		}
	}
}

CAL_spawn_limitanei = {
	load_oob = CAL_emergency_legions
	54 = {
		if = {
			limit = {
				is_controlled_by = ROOT
			}
			create_unit = {
				division = "division_template = \"Limitanei\" start_equipment_factor = 0.5"
				owner = ROOT
				count = 5
			}
		}
	}
	209 = {
		if = {
			limit = {
				is_controlled_by = ROOT
			}
			create_unit = {
				division = "division_template = \"Limitanei\" start_equipment_factor = 0.5"
				owner = ROOT
				count = 5
			}
		}
	}
	345 = {
		if = {
			limit = {
				is_controlled_by = ROOT
			}
			create_unit = {
				division = "division_template = \"Limitanei\" start_equipment_factor = 0.5"
				owner = ROOT
				count = 5
			}
		}
	}
	889 = {
		if = {
			limit = {
				is_controlled_by = ROOT
			}
			create_unit = {
				division = "division_template = \"Limitanei\" start_equipment_factor = 0.5"
				owner = ROOT
				count = 5
			}
		}
	}
	168 = {
		if = {
			limit = {
				is_controlled_by = ROOT
			}
			create_unit = {
				division = "division_template = \"Limitanei\" start_equipment_factor = 0.5"
				owner = ROOT
				count = 5
			}
		}
	}
	485 = {
		if = {
			limit = {
				is_controlled_by = ROOT
			}
			create_unit = {
				division = "division_template = \"Limitanei\" start_equipment_factor = 0.5"
				owner = ROOT
				count = 5
			}
		}
	}
}