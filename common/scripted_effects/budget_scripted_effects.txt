get_taxes = {
	set_variable = {
		tax = max_manpower_k #w tys. żeby się nie przelało
	}
	multiply_variable = {
		tax = 450
	}
	round_variable = tax
	multiply_variable = {
		tax = 0.015 # podzielone przez 1M żeby się nie przelało
	}
	set_temp_variable = {
		tax_rate_multiplier = 1
	}
	add_to_temp_variable = {
		tax_rate_multiplier = modifier@tax_rate
	}
	multiply_variable = {
		tax = tax_rate_multiplier
	}
	set_variable = {
		monthly_tax = tax
	}
	divide_variable = {
		monthly_tax = 12
	}
	# if = {
	# 	limit = {
	# 		tag = SLE
	# 	}
	# 	log = "U hnesza jest [?tax]M moniaków"
	# }
	get_netto = yes
	
}

get_netto = {
	set_variable = {
		budget = 1
	}
	set_variable = {
		monthly_budget_spendings = tax
	}
	multiply_variable = {
		monthly_budget_spendings = modifier@budget_spendings
	}
	divide_variable = {
		monthly_budget_spendings = 12
	}
	subtract_from_variable = {
		budget = modifier@budget_spendings
	}
	multiply_variable = {
		budget = tax
	}
	get_consumer_payments = yes
}

get_consumer_payments = {
	#wiedząc że utrzymanie fabryki kosztuje 1mln, można to pominąć co opłaty daje nam liczba_fabryk * (1+socjal+ekonomia)
	set_temp_variable = {
		consumer_payments = 1
	}
	add_to_temp_variable = {
		consumer_payments = modifier@consumer_goods_expected_value
	}
	if = {
		limit = {
			has_idea = basic_income 
		}
		add_to_temp_variable = {
			consumer_payments = 0.08
		}
	}
	else_if = {
		limit = { 
			or = {
				has_idea = civil_industry_subsidies
				has_idea = military_industry_subsidies
			}
		}
		add_to_temp_variable = {
			consumer_payments = 0.035
		}
	}
	multiply_temp_variable = {
		consumer_payments = num_of_civilian_factories
	}
	set_variable = {
		monthly_consumer_payments = consumer_payments
	}
	divide_variable = {
		monthly_consumer_payments = 12
	}
	subtract_from_variable = {
		budget = consumer_payments
	}
	get_building_payments = yes
	
}

get_building_payments = {
	set_temp_variable = {
		building_payments = num_of_civilian_factories
	}
	add_to_temp_variable = {
		building_payments = num_of_military_factories
	}
	add_to_temp_variable = {
		building_payments = num_of_dockyards
	}
	set_temp_variable = {
		payments_for_synthethic_refineries = 1.5
	}
	multiply_temp_variable = {
		payments_for_synthethic_refineries = num_of_synthethic_refineries
	}
	add_to_temp_variable = {
		building_payments = payments_for_synthethic_refineries
	}
	set_temp_variable = {
		payments_for_high_tech_complexes = 2.5
	}
	multiply_temp_variable = {
		payments_for_synthethic_refineries = num_of_high_tech_complexes
	}
	add_to_temp_variable = {
		building_payments = payments_for_high_tech_complexes
	}
	set_temp_variable = {
		payments_for_fuel_siloes = 1.25
	}
	multiply_temp_variable = {
		payments_for_fuel_siloes = num_of_fuel_siloes
	}
	add_to_temp_variable = {
		building_payments = payments_for_fuel_siloes
	}
	set_temp_variable = {
		payments_for_power_plants = 3.5
	}
	multiply_temp_variable = {
		payments_for_power_plants = sum_of_power_plants
	}
	add_to_temp_variable = {
		building_payments = payments_for_power_plants
	}
	set_temp_variable = {
		payments_for_wind_farms = 2.5
	}
	multiply_temp_variable = {
		payments_for_wind_farms = sum_of_wind_farms
	}
	add_to_temp_variable = {
		building_payments = payments_for_wind_farms
	}
	set_temp_variable = {
		payments_for_recycling_plants = 1.5
	}
	multiply_temp_variable = {
		payments_for_recycling_plants = num_of_recycling_plants
	}
	add_to_temp_variable = {
		building_payments = payments_for_recycling_plants
	}
	set_temp_variable = {
		payments_for_steel_works = 2.5
	}
	multiply_temp_variable = {
		payments_for_steel_works = num_of_steel_works
	}
	add_to_temp_variable = {
		building_payments = payments_for_steel_works
	}
	set_temp_variable = {
		payments_for_temples = 0.5
	}
	multiply_temp_variable = {
		payments_for_temples = num_of_cathedrals
	}
	add_to_temp_variable = {
		building_payments = payments_for_temples
	}
	set_temp_variable = {
		payments_for_universities = 0.25
	}
	multiply_temp_variable = {
		payments_for_universities = num_of_universities
	}
	add_to_temp_variable = {
		building_payments = payments_for_universities
	}
	set_temp_variable = {
		payments_for_hospitals = 0.325
	}
	multiply_temp_variable = {
		payments_for_steel_works = num_of_steel_works
	}
	add_to_temp_variable = {
		building_payments = payments_for_steel_works
	}
	set_temp_variable = {
		payments_for_prisons = 0.155
	}
	multiply_temp_variable = {
		payments_for_prisons = num_of_prisons
	}
	add_to_temp_variable = {
		building_payments = payments_for_prisons
	}
	set_temp_variable = {
		payments_for_januszexes = 2.5
	}
	multiply_temp_variable = {
		payments_for_januszexes = num_of_januszexes
	}
	add_to_temp_variable = {
		building_payments = payments_for_januszexes
	}
	subtract_from_variable = {
		budget = building_payments
	}
	set_variable = {
		monthly_building_payments = building_payments
	}
	divide_variable = {
		monthly_building_payments = 12
	}
	get_resource_payments = yes
}

get_resource_payments = {
	set_temp_variable = {
		aluminium_imports = resource_imported@aluminium
	}
	divide_temp_variable = {
		aluminium_imports = 100
	}
	multiply_temp_variable = {
		aluminium_imports = 2.61 #mln za 100 jednostek
	}
	set_variable = {
		monthly_imports = aluminium_imports
	}
	set_temp_variable = {
		coal_imports = resource_imported@coal
	}
	divide_temp_variable = {
		coal_imports = 100
	}
	multiply_temp_variable = {
		coal_imports = 0.36 #mln za 100 jednostek
	}
	add_to_variable = {
		monthly_imports = coal_imports
	}
	set_temp_variable = {
		electronics_imports = resource_imported@electronics
	}
	multiply_temp_variable = {
		electronics_imports = 0.3 #mln za 1 jednostkę
	}
	add_to_variable = {
		monthly_imports = electronics_imports
	}
	set_temp_variable = {
		junk_imports = resource_imported@junk
	}
	multiply_temp_variable = {
		junk_imports = 0.003 #mln za 1 jednostkę
	}
	add_to_variable = {
		monthly_imports = junk_imports
	}
	set_temp_variable = {
		oil_imports = resource_imported@oil
	}
	divide_temp_variable = {
		oil_imports = 100
	}
	multiply_temp_variable = {
		oil_imports = 1.38 #mln za 100 jednostek
	}
	add_to_variable = {
		monthly_imports = oil_imports
	}
	set_temp_variable = {
		steel_imports = resource_imported@steel
	}
	divide_temp_variable = {
		steel_imports = 100
	}
	multiply_temp_variable = {
		steel_imports = 0.42 #mln za 100 jednostek
	}
	add_to_variable = {
		monthly_imports = steel_imports
	}
	set_temp_variable = {
		food_imports = resource_imported@food
	}
	divide_temp_variable = {
		food_imports = 100
	}
	multiply_temp_variable = {
		food_imports = 0.02 #mln za 100 jednostek
	}
	add_to_variable = {
		monthly_imports = food_imports
	}	
	set_temp_variable = {
		synthetics_imports = resource_imported@synthetic_materials
	}
	divide_temp_variable = {
		synthetics_imports = 100
	}
	multiply_temp_variable = {
		synthetics_imports = 2.175 #mln za 100 jednostek
	}
	add_to_variable = {
		monthly_imports = synthetics_imports
	}
	divide_variable = {
		budget = 12
	}
	subtract_from_variable = {
		budget = monthly_imports
	}
	add_to_variable = {
		liquidity = budget
	}
}