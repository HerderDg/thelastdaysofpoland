get_taxes = {
	set_variable = {
		tax = max_manpower_k #w tys. żeby się nie przelało
	}
	multiply_variable = {
		tax = 450
	}
	round_variable = tax
	multiply_variable = {
		tax = 0.015 # podzielone przez 1M żeby się nie przelało
	}
	set_temp_variable = {
		tax_rate_multiplier = 1
	}
	add_to_temp_variable = {
		tax_rate_multiplier = modifier@tax_rate
	}
	multiply_variable = {
		tax = tax_rate_multiplier
	}
	# if = {
	# 	limit = {
	# 		tag = SLE
	# 	}
	# 	log = "U hnesza jest [?tax]M moniaków"
	# }
	get_netto = yes
	
}

get_netto = {
	set_variable = {
		budget = 1
	}
	subtract_from_variable = {
		budget = modifier@budget_spendings
	}
	multiply_variable = {
		budget = tax
	}
	get_consumer_payments = yes
}

get_consumer_payments = {
	#wiedząc że utrzymanie fabryki kosztuje 1mln, można to pominąć co opłaty daje nam liczba_fabryk * (1+socjal+ekonomia)
	set_temp_variable = {
		consumer_payments = 1
	}
	add_to_temp_variable = {
		consumer_payments = modifier@consumer_goods_expected_value
	}
	if = {
		limit = {
			has_idea = basic_income 
		}
		add_to_temp_variable = {
			consumer_payments = 0.08
		}
	}
	else_if = {
		limit = { 
			or = {
				has_idea = civil_industry_subsidies
				has_idea = military_industry_subsidies
			}
		}
		add_to_temp_variable = {
			consumer_payments = 0.035
		}
	}
	multiply_temp_variable = {
		consumer_payments = num_of_civilian_factories
	}
	subtract_from_variable = {
		budget = consumer_payments
	}
	get_building_payments = yes
	
}

get_building_payments = {
	set_temp_variable = {
		building_payments = num_of_civilian_factories
	}
	add_to_temp_variable = {
		building_payments = num_of_military_factories
	}
	add_to_temp_variable = {
		building_payments = num_of_dockyards
	}
	subtract_from_variable = {
		budget = building_payments
	}
	log = "[?budget]M"
}