
TOR_HP_clamp_min = {
	clamp_variable = {
		var = TOR_rydzyk_hp_var
		min = 0
	}
}
TOR_HP_clamp_max = {
	clamp_variable = {
		var = TOR_rydzyk_hp_var
		max = TOR_rydzyk_hp_max_var
	}
}
TOR_holy_clamp = {
	clamp_variable = {
		var = TOR_rydzyk_holy_var
		min = 0
	}
	clamp_variable = {
		var = TOR_rydzyk_holy_var
		max = 100
	}
}
TOR_holy_minus_cathedral = {
	subtract_from_variable = { TOR_rydzyk_holy_var = TOR_minus_holy_cathedrals }
	custom_effect_tooltip = TOR_holy_minus_cathedral
}
TOR_holy_minus_5 = {
	add_to_variable = { TOR_rydzyk_holy_var = -5 }
	custom_effect_tooltip = TOR_holy_minus_5
}
TOR_holy_minus_10 = {
	add_to_variable = { TOR_rydzyk_holy_var = -10 }
	custom_effect_tooltip = TOR_holy_minus_10
}
TOR_holy_minus_20 = {
	add_to_variable = { TOR_rydzyk_holy_var = -20 }
	custom_effect_tooltip = TOR_holy_minus_20
}
TOR_holy_plus_5 = {
	add_to_variable = { TOR_rydzyk_holy_var = 5 }
	custom_effect_tooltip = TOR_holy_plus_5
}
TOR_holy_plus_10 = {
	add_to_variable = { TOR_rydzyk_holy_var = 10 }
	custom_effect_tooltip = TOR_holy_plus_10
}
TOR_holy_plus_20 = {
	add_to_variable = { TOR_rydzyk_holy_var = 20 }
	custom_effect_tooltip = TOR_holy_plus_20
}
d_TOR_holy_plus_20 = {
	add_to_variable = { TOR_rydzyk_holy_var = 20 }
	custom_effect_tooltip = TOR_holy_plus_20
}
TOR_holy_equ_minus_2 = {
	add_to_variable = { TOR_holiness_equilibrium_var = -2 }
	custom_effect_tooltip = TOR_holy_equ_minus_2
}
TOR_holy_equ_plus_2 = {
	add_to_variable = { TOR_holiness_equilibrium_var = 2 }
	custom_effect_tooltip = TOR_holy_equ_plus_2
}

TOR_hp_plus_1 = {
	add_to_variable = { TOR_rydzyk_hp_var = 1 }
	custom_effect_tooltip = TOR_hp_plus_1
}
d_TOR_hp_plus_1 = {
	add_to_variable = { TOR_rydzyk_hp_var = 1 }
	custom_effect_tooltip = TOR_hp_plus_1
}
TOR_hp_minus_1 = {
	add_to_variable = { TOR_rydzyk_hp_var = -1 }
	custom_effect_tooltip = TOR_hp_minus_1
}
d_TOR_hp_minus_1 = {
	add_to_variable = { TOR_rydzyk_hp_var = -1 }
	custom_effect_tooltip = TOR_hp_minus_1
}

TOR_hp_max_minus_1 = {
	add_to_variable = { TOR_rydzyk_hp_max_var = -1 }
	custom_effect_tooltip = TOR_hp_max_minus_1
}
d_TOR_hp_max_minus_1 = {
	add_to_variable = { TOR_rydzyk_hp_max_var = -1 }
	custom_effect_tooltip = TOR_hp_max_minus_1
}

TOR_hp_max_plus_1 = {
	add_to_variable = { TOR_rydzyk_hp_max_var = 1 }
	custom_effect_tooltip = TOR_hp_max_plus_1
}
TOR_holiness_modifier_calc = {
	if = {
		limit = {
			check_variable = { TOR_rydzyk_holy_var < 50 }
		}
		#kalkulacyja
		set_variable = { holyness_base_calc_var = TOR_rydzyk_holy_var }
		add_to_variable = { holyness_base_calc_var = -50 }
		multiply_variable = { holyness_base_calc_var = 0.001 }
		#implementacyja
		set_variable = { TOR_holy_stab_war_var = holyness_base_calc_var }
		set_variable = { TOR_holy_army_var = holyness_base_calc_var }
		set_variable = { TOR_holy_pol_var = holyness_base_calc_var }
		set_variable = { TOR_holy_pop_var = holyness_base_calc_var }
		set_variable = { TOR_holy_tax_var = holyness_base_calc_var }
		set_variable = { TOR_holy_res_var = holyness_base_calc_var }
		#modyfikacyja
		multiply_variable = { TOR_holy_stab_war_var = 2 }
		multiply_variable = { TOR_holy_army_var = 1 }
		multiply_variable = { TOR_holy_pol_var = 15 }
		multiply_variable = { TOR_holy_pop_var = 0.5 }
		multiply_variable = { TOR_holy_tax_var = 5 }
		multiply_variable = { TOR_holy_res_var = -1.5 }
		
	}
	else_if = {
		limit = {
			check_variable = { TOR_rydzyk_holy_var = 50 }
		}
		set_variable = { TOR_holy_stab_war_var = 0 }
		set_variable = { TOR_holy_army_var = 0 }
		set_variable = { TOR_holy_pol_var = 0 }
		set_variable = { TOR_holy_pop_var = 0 }
		set_variable = { TOR_holy_tax_var = 0 }
		set_variable = { TOR_holy_res_var = 0 }
	}
	else_if = {
		limit = {
			check_variable = { TOR_rydzyk_holy_var > 49 }
		}
		#kalkulacyja
		set_variable = { holyness_base_calc_var = TOR_rydzyk_holy_var }
		add_to_variable = { holyness_base_calc_var = -50 }
		multiply_variable = { holyness_base_calc_var = 0.001 }
		#implementacyja
		set_variable = { TOR_holy_stab_war_var = holyness_base_calc_var }
		set_variable = { TOR_holy_army_var = holyness_base_calc_var }
		set_variable = { TOR_holy_pol_var = holyness_base_calc_var }
		set_variable = { TOR_holy_pop_var = holyness_base_calc_var }
		set_variable = { TOR_holy_tax_var = holyness_base_calc_var }
		set_variable = { TOR_holy_res_var = holyness_base_calc_var }
		#modyfikacyja
		multiply_variable = { TOR_holy_stab_war_var = 2 }
		multiply_variable = { TOR_holy_army_var = 1 }
		multiply_variable = { TOR_holy_pol_var = 15 }
		multiply_variable = { TOR_holy_pop_var = 0.5 }
		multiply_variable = { TOR_holy_tax_var = 5 }
		multiply_variable = { TOR_holy_res_var = -1.5 }
	}
}
TOR_holiness_hidden_idea_calc = {
	if = {
		limit = {
			check_variable = { TOR_rydzyk_holy_var < TOR_holiness_equilibrium_var}
		}
		remove_ideas = TOR_holiness_50_idea
		remove_ideas = TOR_holiness_50_100_idea
		add_ideas = TOR_holiness_0_50_idea
	}
	else_if = {
		limit = {
			check_variable = { TOR_rydzyk_holy_var = TOR_holiness_equilibrium_var }
		}
		remove_ideas = TOR_holiness_0_50_idea
		remove_ideas = TOR_holiness_50_100_idea
		add_ideas = TOR_holiness_50_idea
	}
	else_if = {
		limit = {
			check_variable = { TOR_rydzyk_holy_var > TOR_holiness_equilibrium_var }
		}
		remove_ideas = TOR_holiness_0_50_idea
		remove_ideas = TOR_holiness_50_idea
		add_ideas = TOR_holiness_50_100_idea
	}
	
}


TOR_GUI_all_check = {
	hidden_effect = {
		TOR_HP_clamp_min = yes
		TOR_HP_clamp_max = yes
		TOR_holy_clamp = yes
		TOR_holiness_hidden_idea_calc = yes
		TOR_holiness_modifier_calc = yes
	}
}
d_TOR_GUI_all_check = {
	hidden_effect = {
		TOR_HP_clamp_min = yes
		TOR_HP_clamp_max = yes
		TOR_holy_clamp = yes
		TOR_holiness_hidden_idea_calc = yes
		TOR_holiness_modifier_calc = yes
	}
}
TOR_no_civil_war_effect = {
	MEM = {
		annex_country = {
			target = TOR
			transfer_troops = yes
		}
		every_owned_state = {
			limit = {
				is_owned_by = MEM
			}
			add_core_of = MEM
		}
		delete_unit_template_and_units = {
			division_template = "Milicja Parafialna"
			disband = yes
		}
		delete_unit_template_and_units = {
			division_template = "Moherowe Berety"
			disband = yes
		}
		delete_unit_template_and_units = {
			division_template = "Ochotniczy Batalion Wiernych"
			disband = yes
		}
		country_event = {
			id = TOR.92
			days = 4
		}
	}
}
TOR_civil_war_effect = {
	MEM = {
		transfer_state = 146
		transfer_state = 1056
		transfer_state = 1050
		transfer_state = 170
		transfer_state = 1051
		transfer_state = 165
		transfer_state = 847
		transfer_state = 163
		transfer_state = 145
		transfer_state = 140
		transfer_state = 1054
		transfer_state = 126
		transfer_state = 1052
		transfer_state = 134
		transfer_state = 121
		transfer_state = 129
		transfer_state = 1053
		transfer_state = 115
		transfer_state = 108
		transfer_state = 196
		transfer_state = 702
		transfer_state = 703
		transfer_state = 198
		transfer_state = 176
		transfer_state = 200
		transfer_state = 167
		transfer_state = 171
		transfer_state = 1055
		transfer_state = 191
		transfer_state = 1049
		transfer_state = 704
		transfer_state = 1048
		transfer_state = 852
		transfer_state = 1046
		transfer_state = 182
		transfer_state = 181
		transfer_state = 1057
	}
	if = {
		limit = {
			TOR = {
				owns_state = 99
			}
		}
		MEM = {
			transfer_state = 1058
			transfer_state = 99
			transfer_state = 1060
			transfer_state = 1059
		}
	}
	MEM = {
		every_owned_state = {
			limit = { 
				is_owned_by = MEM
			}
			add_core_of = MEM
		}
		add_popularity = {
			ideology = corporativism
			popularity = -0.5
		}
	}
	TOR = {
		declare_war_on = {
			target = MEM
			type = civil_war
		}
		transfer_units_fraction = {
			target = MEM
			size = 0.7
			stockpile_ratio = 0.7
			army_ratio = 0.8
			navy_ratio = 0.5
			air_ratio = 0.5
		}
	}
	
	#Extra Units for Mentzen from friendly Warlords
	#In future if time and strenght allow it, a special event can be created to make their apperance that much more special.
	if = {
		limit = {
			TOR = {
				has_country_flag = TOR_braun_helps
			}
		}
		MEM = {
			load_oob = "MEM_braun"
		}
	}
	if = {
		limit = {
			TOR = {
				has_country_flag = TOR_dziamb_helps
			}
		}
		MEM = {
			load_oob = "MEM_dziamb"
		}
	}
	if = {
		limit = {
			TOR = {
				has_country_flag = TOR_bosak_helps
			}
		}
		MEM = {
			load_oob = "MEM_bosak"
		}
	}
}
TOR_Mentzen_govt_swap = {
	if = {
		limit = {
			TOR = {
				has_idea = taxes_collection_plate
			}			
		}
		swap_ideas = {
			remove_idea = taxes_high
			add_idea = taxes_collection_plate
		}
	}
}
TOR_Mentzen_character_shuffle = {
	every_possible_country = {
        limit = { has_character = HOG_jacek_hoga }
        random_character = {
            limit = { is_character = HOG_jacek_hoga }
            set_nationality = MEM
        }
    }
	every_possible_country = {
        limit = { has_character = TOR_marcin_sypniewski }
        random_character = {
            limit = { is_character = TOR_marcin_sypniewski }
            set_nationality = MEM
        }
    }
	every_possible_country = {
        limit = { has_character = TOR_dojas }
        random_character = {
            limit = { is_character = TOR_dojas }
            set_nationality = MEM
        }
    }
	every_possible_country = {
        limit = { has_character = SWC_dyk }
        random_character = {
            limit = { is_character = SWC_dyk }
            set_nationality = MEM
        }
    }
	every_possible_country = {
        limit = { has_character = GRU_slawomir_makosa }
        random_character = {
            limit = { is_character = GRU_slawomir_makosa }
            set_nationality = MEM
        }
    }
	every_possible_country = {
        limit = { has_character = TOR_jakub_banas }
        random_character = {
            limit = { is_character = TOR_jakub_banas }
            set_nationality = MEM
        }
    }
	MEM = {
		add_advisor_role = {
			character = TOR_marcin_sypniewski
			activate = yes
			advisor = {
				slot = interior_minister
				idea_token = MEM_marcin_sypniewski
				removal_cost = -1
				can_be_fired = no
				cost = -1
			}
		}
		add_advisor_role = {
			character = HOG_jacek_hoga
			activate = yes
			advisor = {
				slot = minister_of_war
				idea_token = HOG_jacek_hoga
				removal_cost = -1
				can_be_fired = no
				cost = -1
				traits = { hoga_memcen_trait }
			}
		}
		HOG_jacek_hoga = {
			add_unit_leader_trait = urban_assault_specialist
		}
	}
}
TOR_civil_war_volunteers = { #I hate this code, but I don't want to write anything better
	if = {
		limit = {
			has_country_flag = TOR_RZE_helps
			RZE = { exists = yes }
		}
		MEM = {
			add_equipment_to_stockpile = {
				type = ranged_equipment
				amount = 500
				producer = RZE
			}
			add_manpower = 500
		}
	}
	if = {
		limit = {
			has_country_flag = TOR_NAC_helps
			NAC = { exists = yes }
		}
		MEM = {
			add_equipment_to_stockpile = {
				type = ranged_equipment
				amount = 500
				producer = NAC
			}
			add_manpower = 500
		}
	}
	if = {
		limit = {
			has_country_flag = TOR_BRK_helps
			BRK = { exists = yes }
		}
		BRK = {
			add_equipment_to_stockpile = {
				type = ranged_equipment
				amount = 500
				producer = BRK
			}
			add_manpower = 500
		}
	}
	if = {
		limit = {
			has_country_flag = TOR_HEL_helps
			HEL = { exists = yes }
		}
		MEM = {
			add_equipment_to_stockpile = {
				type = ranged_equipment
				amount = 500
				producer = HEL
			}
			add_manpower = 500
		}
	}
	if = {
		limit = {
			has_country_flag = TOR_KAT_helps
			KAT = { exists = yes }
		}
		MEM = {
			add_equipment_to_stockpile = {
				type = ranged_equipment
				amount = 500
				producer = KAT
			}
			add_manpower = 500
		}
	}
	if = {
		limit = {
			has_country_flag = TOR_KIE_helps
			KIE = { exists = yes }
		}
		MEM = {
			add_equipment_to_stockpile = {
				type = ranged_equipment
				amount = 500
				producer = KIE
			}
			add_manpower = 500
		}
	}
	if = {
		limit = {
			has_country_flag = TOR_OPO_helps
			OPO = { exists = yes }
		}
		MEM = {
			add_equipment_to_stockpile = {
				type = ranged_equipment
				amount = 500
				producer = OPO
			}
			add_manpower = 500
		}
	}
	if = {
		limit = {
			has_country_flag = TOR_LMZ_helps
			LMZ = { exists = yes }
		}
		MEM = {
			add_equipment_to_stockpile = {
				type = ranged_equipment
				amount = 500
				producer = LMZ
			}
			add_manpower = 500
		}
	}
	if = {
		limit = {
			has_country_flag = TOR_KEL_helps
			KEL = { exists = yes }
		}
		MEM = {
			add_equipment_to_stockpile = {
				type = ranged_equipment
				amount = 500
				producer = KEL
			}
			add_manpower = 500
		}
	}
	if = {
		limit = {
			has_country_flag = TOR_ZUL_helps
			ZUL = { exists = yes }
		}
		MEM = {
			add_equipment_to_stockpile = {
				type = ranged_equipment
				amount = 500
				producer = ZUL
			}
			add_manpower = 500
		}
	}
	if = {
		limit = {
			has_country_flag = TOR_DUP_helps
			DUP = { exists = yes }
		}
		MEM = {
			add_equipment_to_stockpile = {
				type = ranged_equipment
				amount = 500
				producer = DUP
			}
			add_manpower = 500
		}
	}
	if = {
		limit = {
			has_country_flag = TOR_KRS_helps
			KRS = { exists = yes }
		}
		MEM = {
			add_equipment_to_stockpile = {
				type = ranged_equipment
				amount = 500
				producer = KRS
			}
			add_manpower = 500
		}
	}
}