add_namespace = gniezno_szlachta
add_namespace = gniezno 
# pierwszy namespace jest do spraw szlachekich, drugi ogólny
# - szpieg

country_event = { #Gniezno zaczyna rozważać mordowanie szlachty
	id = gniezno_szlachta.1
	title = gniezno_szlachta.1.t
	desc = gniezno_szlachta.1.desc
	trigger = {
		original_tag = GNI
		date > "2027.11.10"
	}

	immediate = { log = "[GetDateText]: [ROOT.GetName] fires gniezno_szlachta.1"}
	fire_only_once = yes
	option = { 
		name = gniezno_szlachta.1.a
		KNN = {
			country_event ={
				id = gniezno_szlachta.2
				days = 2
			}
		}
		ai_chance = {
			base = 80
		}
	}
	option = { 
		name = gniezno_szlachta.1.b
		ai_chance = {
			base = 20
		}
		add_political_power = 75
	}
}

country_event = { #wiadomość do Konina o to, że chcemy ich kulturalnie zeżreć
	id = gniezno_szlachta.2
	title = gniezno_szlachta.2.t
	desc = gniezno_szlachta.2.desc
	is_triggered_only = yes

	immediate = { log = "[GetDateText]: [ROOT.GetName] fires gniezno_szlachta.2"}
	fire_only_once = yes
	option = { 
		name = gniezno_szlachta.2.a
		GNI = {
			country_event ={
				id = gniezno_szlachta.3
				days = 2
			}
			annex_country = {
				target = KNN
			}
			add_state_core = 219
			add_state_core = 912
			add_state_core = 256
			add_state_core = 255
			add_state_core = 1145
		}
		ai_chance = {
			base = 50
		}
	}
	option = { 
		name = gniezno_szlachta.2.b
		GNI = {
			country_event ={
				id = gniezno_szlachta.16
				days = 2
			}
		}
		ai_chance = {
			base = 50
		}
	}
}

country_event = { #wysłanie ultimatum do koła
	id = gniezno_szlachta.3
	title = gniezno_szlachta.3.t
	desc = gniezno_szlachta.3.desc


	immediate = { log = "[GetDateText]: [ROOT.GetName] fires gniezno_szlachta.3"}
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = gniezno_szlachta.3.a
		hidden_effect = {
			KLO = {
				country_event ={
					id = gniezno_szlachta.4
					days = 7
				}
			}
		}
	}
}

country_event = { #kolo otrzymuje żądanie
	id = gniezno_szlachta.4
	title = gniezno_szlachta.4.t
	desc = gniezno_szlachta.4.desc


	immediate = { log = "[GetDateText]: [ROOT.GetName] fires gniezno_szlachta.4"}
	fire_only_once = yes
	is_triggered_only = yes
	option = { 
		name = gniezno_szlachta.4.a
		annex_country = {
			target = KLO
		}
		GNI = {
			country_event = {
				id = gniezno_szlachta.5
				days = 3
			}
		}
		ai_chance = {
			base = 50
		}
	}
	option = { 
		name = gniezno_szlachta.4.b
		CAL = {
			country_event = {
				id = gniezno_szlachta.6
				days = 3
			}
		}
		ai_chance = {
			base = 50
		}
	}
}

country_event = { #aneksja koła przez gniezno
	id = gniezno_szlachta.5
	title = gniezno_szlachta.5.t
	desc = gniezno_szlachta.5.desc


	immediate = { log = "[GetDateText]: [ROOT.GetName] fires gniezno_szlachta.5"}
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = gniezno_szlachta.5.a
		GNI = {
			annex_country = {
				target = KLO
			}
		}
	}
}

country_event = { #kalisz decyduje o tym czy chce mieć koło, czy nie chce
	id = gniezno_szlachta.6
	title = gniezno_szlachta.6.t
	desc = gniezno_szlachta.6.desc


	immediate = { log = "[GetDateText]: [ROOT.GetName] fires gniezno_szlachta.6"}
	fire_only_once = yes
	is_triggered_only = yes
	option = { 
		name = gniezno_szlachta.6.a
		hidden_effect = {
			KLO = {
				add_country_leader_role = {
					character = KLO_ilski
					promote_leader = yes
					country_leader = {
						ideology = socialdemocrature_subtype
					}
				}
				set_character_name = {
					character = KLO_ilski
					name = "Flavius Theodosius"
				}
			}
		}
		KLO = { get_current_government_type = yes }
		set_autonomy = {
			target = KLO
			autonomy_state = autonomy_colony
		}
		KLO = { restore_previous_government_type = yes }
		hidden_effect = {
			KLO = {
				set_cosmetic_tag = KLO_calisian
				every_owned_state = {
					meta_effect = {
						text = {
							THIS = {
								set_state_name = CAL_STATE_[STATE_ID]
							}
						}
						STATE_ID = "[?THIS.GetID]"
					}
				}
				set_party_name = {
					ideology = autocracy
					long_name = "Societas Rota"
					name = "Societas Rota"
				}
			}
			set_province_name = {
				id = 289
				name = CAL_VICTORY_POINTS_289
			}
			set_province_name = {
				id = 14492
				name = CAL_VICTORY_POINTS_14492
			}
			set_province_name = {
				id = 14500
				name = CAL_VICTORY_POINTS_14500
			}
			set_province_name = {
				id = 14508
				name = CAL_VICTORY_POINTS_14508
			}	
			set_province_name = {
				id = 14518
				name = CAL_VICTORY_POINTS_14518
			}
			set_province_name = {
				id = 14519
				name = CAL_VICTORY_POINTS_14519
			}	
			set_province_name = {
				id = 14521
				name = CAL_VICTORY_POINTS_14521
			}			
			set_province_name = {
				id = 14516
				name = CAL_VICTORY_POINTS_14516
			}
			set_province_name = {
				id = 14
				name = CAL_VICTORY_POINTS_14
			}															
			set_province_name = {
				id = 1996
				name = CAL_VICTORY_POINTS_1996
			}									
		}
		ai_chance = {
			base = 65
		}
		GNI = {
			country_event = {
				id = gniezno_szlachta.9
				days = 7
			}
		}
	}
	option = { 
		name = gniezno_szlachta.6.b
		hidden_effect = {
			GNI = {
				country_event = {
					id = gniezno_szlachta.7
					days = 2
				}
			}
		}
		ai_chance = {
			base = 35
		}
	}
}

country_event = { #Kalisz nie przyjmuje Koła i jest atakowane
	id = gniezno_szlachta.7
	title = gniezno_szlachta.7.t
	desc = gniezno_szlachta.7.desc


	immediate = { log = "[GetDateText]: [ROOT.GetName] fires gniezno_szlachta.7"}
	fire_only_once = yes
	is_triggered_only = yes
	option = { 
		name = gniezno_szlachta.7.a 
		GNI = {
			declare_war_on = {
				target = KLO
				type = voivodeship_war
			}
		}
	}
}

country_event = { #aneksja koła przez kalisz
	id = gniezno_szlachta.8
	title = gniezno_szlachta.8.t
	desc = gniezno_szlachta.8.desc


	immediate = { log = "[GetDateText]: [ROOT.GetName] fires gniezno_szlachta.8"}
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = gniezno_szlachta.8.a
		CAL = {
			annex_country = {
				target = KLO
				transfer_troops = yes
			}
		}
	}
}


country_event = { # Gniezno wkurza się na Kalisz, że mu prawowitego Wasala zajebał
	id = gniezno_szlachta.9
	title = gniezno_szlachta.9.t
	desc = gniezno_szlachta.9.desc


	immediate = { log = "[GetDateText]: [ROOT.GetName] fires gniezno_szlachta.9"}
	fire_only_once = yes
	is_triggered_only = yes
	option = { 
		name = gniezno_szlachta.9.a 
		declare_war_on = {
			target = CAL
			type = voivodeship_war
		}
		declare_war_on = {
			target = ALP
			type = voivodeship_war
		}
		declare_war_on = {
			target = KLO
			type = voivodeship_war
		}
		declare_war_on = {
			target = PRT
			type = voivodeship_war
		}
		set_global_flag = gniezno_vs_calisia_war
		ai_chance = {
			base = 50
		}
		hidden_effect = {
			every_country = {
				limit = { NOT = { is_ai = yes } }
			}
		}
	}
	option = { 
		name = gniezno_szlachta.9.b 
		add_political_power = -100
		hidden_effect = {
			CAL = {
				country_event = {
					id = gniezno_szlachta.8
					days = 730
				}
			}
		}
		ai_chance = {
			base = 50
		}
	}
}




country_event = { # TOTAL CALISA SWEEP
	id = gniezno_szlachta.10
	title = gniezno_szlachta.10.t
	desc = gniezno_szlachta.10.desc
	immediate = { log = "[GetDateText]: [ROOT.GetName] fires gniezno_szlachta.10"}
	fire_only_once = yes
	trigger = {
		original_tag = CAL
		has_war_with = GNI
		GNI = {
			surrender_progress > 0.4
		}
		has_global_flag = gniezno_vs_calisia_war
	}
	option = { 
		name = gniezno_szlachta.10.a 
		white_peace = GNI
		CAL = {
			transfer_state = 255
			transfer_state = 259
			transfer_state = 1145
		}
		KLO = {
			transfer_state = 260
			transfer_state = 232
		}
		CAL = {
			diplomatic_relation = {
				country = KLO
				relation = puppet
				active = yes
			}
		}
		ALP = {
			transfer_state = 266
		}
		CAL = {
			diplomatic_relation = {
				country = ALP
				relation = puppet
				active = yes
			}
		}
		hidden_effect = {
			CAL = {
				country_event = {
					id = gniezno_szlachta.8
					days = 730
				}
			}
			clr_global_flag = gniezno_vs_calisia_war
			every_country = {
				limit = { NOT = { is_ai = yes } }
			}
		}
		GNI = {
			country_event = {
				id = gniezno_szlachta.11
				days = 1
			}
		}
	}
}

country_event = { 
	id = gniezno_szlachta.11
	title = gniezno_szlachta.11.t
	desc = gniezno_szlachta.11.desc

	immediate = { log = "[GetDateText]: [ROOT.GetName] fires gniezno_szlachta.11"}
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = gniezno_szlachta.11.a
	}
}

country_event = { #TOTAL GNIEZNO SWEEP
	id = gniezno_szlachta.12
	title = gniezno_szlachta.12.t
	desc = gniezno_szlachta.12.desc
	immediate = { log = "[GetDateText]: [ROOT.GetName] fires gniezno_szlachta.12"}
	fire_only_once = yes
	trigger = {
		original_tag = GNI
		has_war_with = CAL
		CAL = {
			surrender_progress > 0.4
		}
		has_global_flag = gniezno_vs_calisia_war
	}
	option = { 
		name = gniezno_szlachta.12.a 
		white_peace = CAL
		white_peace = KLO
		white_peace = PRT
		white_peace = ALP
		280 = {
			transfer_state_to = GNI
		}
		GNI = {
			annex_country = {
				target = KLO
			}
		}
		GNI = {
			annex_country = {
				target = ALP
			}
		}
		hidden_effect = {
			260 = {
				transfer_state_to = GNI
			}
			232 = {
				transfer_state_to = GNI
			}
			266 = {
				transfer_state_to = GNI
			}
			clr_global_flag = gniezno_vs_calisia_war
			every_country = {
				limit = { NOT = { is_ai = yes } }
			}
		}
	}
}

country_event = { 
	id = gniezno_szlachta.13
	title = gniezno_szlachta.13.t
	desc = gniezno_szlachta.13.desc

	immediate = { log = "[GetDateText]: [ROOT.GetName] fires gniezno_szlachta.13"}
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = gniezno_szlachta.13.a
	}
}

country_event = { #Gniezno vs Calisia Stalemate
	id = gniezno_szlachta.14
	title = gniezno_szlachta.14.t
	desc = gniezno_szlachta.14.desc
	immediate = { log = "[GetDateText]: [ROOT.GetName] fires gniezno_szlachta.14"}
	fire_only_once = yes
	trigger = {
		original_tag = GNI
		has_war_with = CAL
		NOT = {
			surrender_progress > 0.4
		}
		CAL = {
			NOT = {
				surrender_progress > 0.4
			}
		}
		has_global_flag = {
			flag = gniezno_vs_calisia_war
			days > 364
		}
	}
	option = { 
		name = gniezno_szlachta.14.a 
		white_peace = CAL
		white_peace = KLO
		white_peace = ALP
		white_peace = PRT
		if = {
			limit = {
				ALP = {
					exists = no
				}
			}
			release = ALP
			CAL = {
				diplomatic_relation = {
					country = ALP
					relation = puppet
					active = yes
				}
			}
		}
		if = {
			limit = {
				KLO = {
					exists = no
				}
			}
			release = KLO
			CAL = {
				diplomatic_relation = {
					country = KLO
					relation = puppet
					active = yes
				}
			}	
		}
		hidden_effect = {
			clr_global_flag = gniezno_vs_calisia_war
			CAL = {
				country_event = gniezno_szlachta.15
			}
			every_country = {
				limit = { NOT = { is_ai = yes } }
			}
		}
	}
}

country_event = { 
	id = gniezno_szlachta.15
	title = gniezno_szlachta.15.t
	desc = gniezno_szlachta.15.desc

	immediate = { log = "[GetDateText]: [ROOT.GetName] fires gniezno_szlachta.15"}
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = gniezno_szlachta.15.a
	}
}

country_event = { # Konin Odmawia, pytamy się Koła
	id = gniezno_szlachta.16
	title = gniezno_szlachta.16.t
	desc = gniezno_szlachta.16.desc


	immediate = { log = "[GetDateText]: [ROOT.GetName] fires gniezno_szlachta.16"}
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = gniezno_szlachta.16.a 
		hidden_effect = {
			KLO = {
				country_event ={
					id = gniezno_szlachta.17
					days = 2
				}
			}
		}
	}
}

country_event = { #Event kiedy Koło wybiera czy chce się zgodzić
	id = gniezno_szlachta.17
	title = gniezno_szlachta.17.t
	desc = gniezno_szlachta.17.desc

	immediate = { log = "[GetDateText]: [ROOT.GetName] fires gniezno_szlachta.17"}
	fire_only_once = yes
	is_triggered_only = yes
	option = { 
		name = gniezno_szlachta.17.a
		GNI = {
			country_event ={
				id = gniezno_szlachta.18
				days = 2
			}
		}
		ai_chance = {
			base = 40
		}
	}
	option = { 
		name = gniezno_szlachta.17.b
		GNI = {
			country_event ={
				id = gniezno_szlachta.20
				days = 2
			}
		}
		ai_chance = {
			base = 60
		}
	}
}

country_event = { # Podział Konina
	id = gniezno_szlachta.18
	title = gniezno_szlachta.18.t
	desc = gniezno_szlachta.18.desc


	immediate = { log = "[GetDateText]: [ROOT.GetName] fires gniezno_szlachta.18" }
	fire_only_once = yes
	is_triggered_only = yes
	option = { 
		name = gniezno_szlachta.18.a
		KNN = {
			diplomatic_relation = {
				country = KLO
				relation = puppet
				active = no
			}
		}
		GNI = {
			diplomatic_relation = {
				country = KNN
				relation = puppet
				active = no
			}
			diplomatic_relation = {
				country = KLO
				relation = puppet
				active = yes
			}
		}
		declare_war_on = {
			target = KNN
			type = voivodeship_war
		}
		KLO = {
			declare_war_on = {
				target = KNN
				type = voivodeship_war
			}
		}
		GNI = {
			set_country_flag = gniezno_partition_flag
		}
	}
}

country_event = { #Rozbiór Partition Peace Deal
	id = gniezno_szlachta.19
	title = gniezno_szlachta.19.t
	desc = gniezno_szlachta.19.desc

	immediate = { log = "[GetDateText]: [ROOT.GetName] fires gniezno_szlachta.19"}
	fire_only_once = yes
	is_triggered_only = yes
	trigger = {
		original_tag = GNI
		GNI = {
			has_country_flag = gniezno_partition_flag
		}
		NOT = {
			has_war_with = KNN
		}
	}

	option = {
		name = gniezno_szlachta.19.a
		if = {
			limit = {
				NOT = {
					country_exists = KLO
				}
			}
			release = KLO
		}
		912 = {
			transfer_state_to = KLO
		}
		KLO = {
			set_cosmetic_tag = KLO_castellany
		}
		hidden_effect = {
			GNI = {
				transfer_state = 255
				transfer_state = 219
				transfer_state = 256
				transfer_state = 1145
			}
			clr_country_flag = gniezno_partition_flag
		}
	}
}

country_event = { # Koło także odmawia i staje po stronie Konina
	id = gniezno_szlachta.20
	title = gniezno_szlachta.20.t
	desc = gniezno_szlachta.20.desc


	immediate = { log = "[GetDateText]: [ROOT.GetName] fires gniezno_szlachta.20" }
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = gniezno_szlachta.20.a 
		GNI = {
			diplomatic_relation = {
				country = KNN
				relation = puppet
				active = no
			}
			declare_war_on = {
				target = KNN
				type = voivodeship_war
			}
			declare_war_on = {
				target = KLO
				type = voivodeship_war
			}
			set_country_flag = gniezno_tyranny_flag
		}
	}
}

country_event = { # Peace Deal kiedy Konin i Koło wygrywają
	id = gniezno_szlachta.21
	title = gniezno_szlachta.21.t
	desc = gniezno_szlachta.21.desc

	immediate = { log = "[GetDateText]: [ROOT.GetName] fires gniezno_szlachta.21"}
	fire_only_once = yes
	trigger = {
		original_tag = KNN
		has_country_flag = gniezno_tyranny_flag
		NOT = {
			has_war_with = GNI
		}
	}

	option = {
		name = gniezno_szlachta.21.a
		release = GNI
		every_possible_country = {
			limit = { has_character = KNN_danielewski }
			random_character = {
				limit = { is_character = KNN_danielewski }
				set_nationality = GNI
			}
		}
		GNI = {
			diplomatic_relation = {
				country = KNN
				relation = puppet
				active = yes
			}
			retire_character = GNI_przemysł_iii
			add_country_leader_role = {
				character = KNN_danielewski
				promote_leader = yes
				country_leader = {
					ideology = autocracy_absolutism_subtype
					expire = "1.1.1.1"
				}
			}
		}
		KNN = {
			add_country_leader_role = {
				character = KNN_placeholder
				promote_leader = yes
				country_leader = {
					ideology = autocracy_absolutism_subtype
					expire = "1.1.1.1"
				}
			}
		}
		KLO = {
			set_cosmetic_tag = KLO_castellany
		}
		hidden_effect = {
			clr_country_flag = gniezno_tyranny_flag
		}
	}
}

country_event = { #Gniezno wygrywa z Kołem i Koninem
	id = gniezno_szlachta.22
	title = gniezno_szlachta.22.t
	desc = gniezno_szlachta.22.desc

	immediate = { log = "[GetDateText]: [ROOT.GetName] fires gniezno_szlachta.22"}
	fire_only_once = yes
	trigger = {
		original_tag = GNI
		GNI = {
			has_country_flag = gniezno_tyranny_flag
		}
		NOT = {
			has_war_with = KLO
			}
		NOT = {
			has_war_with = KNN
		}
	}
	option = {
		name = gniezno_szlachta.22.a
		GNI = {
			clr_country_flag = gniezno_tyranny_flag
			add_timed_idea = {
				idea = GNI_angry_nobles
				days = 180
			}
		}
	}
}

country_event = { #Gniezno jakimś cudem przeżywa rozbiór
	id = gniezno_szlachta.23
	title = gniezno_szlachta.23.t
	desc = gniezno_szlachta.23.desc

	immediate = { log = "[GetDateText]: [ROOT.GetName] fires gniezno_szlachta.23"}
	fire_only_once = yes
	is_triggered_only = yes
	trigger = {
		original_tag = KNN
		GNI = {
			has_country_flag = gniezno_partition_flag
		}
		NOT = {
			has_war_with = GNI
		}
		NOT = {
			has_war_with = KLO
		}
	}

	option = {
		name = gniezno_szlachta.23.a
		release = GNI
		every_possible_country = {
			limit = { has_character = KNN_danielewski }
			random_character = {
				limit = { is_character = KNN_danielewski }
				set_nationality = GNI
			}
		}
		GNI = {
			diplomatic_relation = {
				country = KNN
				relation = puppet
				active = yes
			}
			retire_character = GNI_przemysł_iii
			add_country_leader_role = {
				character = KNN_danielewski
				promote_leader = yes
				country_leader = {
					ideology = autocracy_absolutism_subtype
					expire = "1.1.1.1"
				}
			}
		}
		KNN = {
			add_country_leader_role = {
				character = KNN_placeholder
				promote_leader = yes
				country_leader = {
					ideology = autocracy_absolutism_subtype
					expire = "1.1.1.1"
				}
			}
		}
		hidden_effect = {
			clr_country_flag = gniezno_partition_flag
		}
	}
}

news_event = { #Wojna na wodzie
	id = gniezno_szlachta.24
	title = gniezno_szlachta.24.t
	desc = gniezno_szlachta.24.desc
	#picture = 

	immediate = { log = "[GetDateText]: [ROOT.GetName] fires gniezno_szlachta.24"}
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = gniezno_szlachta.24.a
	}
}

news_event = { #wygrania calisii
	id = gniezno_szlachta.25
	title = gniezno_szlachta.25.t
	desc = gniezno_szlachta.25.desc
	#picture = 

	immediate = { log = "[GetDateText]: [ROOT.GetName] fires gniezno_szlachta.25"}
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = gniezno_szlachta.25.a
	}
}

news_event = { #wygrana konina
	id = gniezno_szlachta.26
	title = gniezno_szlachta.26.t
	desc = gniezno_szlachta.26.desc
	#picture = 

	immediate = { log = "[GetDateText]: [ROOT.GetName] fires gniezno_szlachta.26"}
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = gniezno_szlachta.26.a
	}
}

news_event = { # stalemate
	id = gniezno_szlachta.27
	title = gniezno_szlachta.27.t
	desc = gniezno_szlachta.27.desc
	#picture = 

	immediate = { log = "[GetDateText]: [ROOT.GetName] fires gniezno_szlachta.27"}
	fire_only_once = yes
	is_triggered_only = yes

	option = {
		name = gniezno_szlachta.27.a
	}
}